!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.commdash=t():e.commdash=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/codebase/",r(r.s=184)}([function(e,t,r){"use strict";r.d(t,"h",(function(){return a})),r.d(t,"a",(function(){return o})),r.d(t,"d",(function(){return i})),r.d(t,"g",(function(){return u})),r.d(t,"j",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"e",(function(){return l})),r.d(t,"f",(function(){return p})),r.d(t,"i",(function(){return f}));var n=r(1);function a(e){return e&&null!=e&&void 0!==e?Math.abs(e)>999?Math.abs(e)>999999?Math.abs(e)>999999999?Math.abs(e)>999999999999?Math.sign(e)*(Math.abs(e)/1e12).toFixed(2)+" kMd":Math.sign(e)*(Math.abs(e)/1e9).toFixed(2)+" Md":Math.sign(e)*(Math.abs(e)/1e6).toFixed(2)+" M":Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+" k":(Math.sign(e)*Math.abs(e)).toFixed(2):0}function o(e){return e&&null!=e&&void 0!==e?Math.abs(e)>=1024?Math.abs(e)>=1048576?Math.abs(e)>=1073741824?Math.abs(e)>=1099511627776?Math.abs(e)>=0x4000000000000?Math.sign(e)*(Math.abs(e)/1073741824/1024/1024).toFixed(1)+" Po":Math.sign(e)*(Math.abs(e)/1073741824/1024).toFixed(1)+" To":Math.sign(e)*(Math.abs(e)/1073741824).toFixed(2)+" Go":Math.sign(e)*(Math.abs(e)/1048576).toFixed(2)+" Mo":Math.sign(e)*(Math.abs(e)/1024).toFixed(1)+" ko":(Math.sign(e)*Math.abs(e)).toFixed(2):0}function i(e){var t=n.k.getItem(n.k.getFirstId());return"small"!=l()&&"mobile"!=l()&&"mobile_rotated"!=l()?t.kpi_fields[e]?t.kpi_fields[e].label:n.i[e]?n.i[e].label:"":t.kpi_fields[e]?t.kpi_fields[e].shortlab?t.kpi_fields[e].shortlab:t.kpi_fields[e].label:n.i[e]?n.i[e].shortlab?n.i[e].shortlab:n.i[e].label:""}function u(e){return n.j[e]?n.j[e]:""}function s(e){$$(e).hideProgress(),$$(e).enable()}function c(e){var t={};switch(e){case"rev_global":case"rev":case"rev_pyg":case"command_glob":case"bills_fact":t={"font-weight":"bold",background:"#59d0eb","font-size":"medium"};break;case"traffic_voix":case"command_split":case"rev_bundle":case"offer_type":case"bills_paie":t={"font-weight":"bold",background:"#b09fb5","font-size":"medium"};break;case"traffic_data":case"tot":case"sales_split":case"parc_other":case"rev_other":case"bills_recouvr":t={"font-weight":"bold",background:"#dcdede","font-size":"medium"};break;case"mnt_recharge":case"mnt_paid":case"revtab":case"rev_sales":t={"font-weight":"bold",background:"#e8d0a7","font-size":"medium"};break;case"mnt_bundle":case"parc_status_ligne":case"gros_offer_type":case"rev_by_line":case"rev_by_offer_gros":t={"font-weight":"bold",background:"#59d0eb","font-size":"medium"};break;case"parc_by_bill":case"rev_by_line":case"rev_geo_split":t={"font-weight":"bold",background:"#e8d0a7","font-size":"medium"};break;case"rev_by_op":t={"font-weight":"bold",background:"#b09fb5","font-size":"medium"};break;case"rev_by_bndle":case"traffic_geo_orange_voice":t={"font-weight":"bold",background:"#dcdede","font-size":"medium"};break;case"traffic_geo_int_voice":case"rec_by_prod":t={"font-weight":"bold",background:"#e8d0a7","font-size":"medium"};break;case"traffic_other_voice":case"rec_by_type":t={"font-weight":"bold",background:"#59d0eb","font-size":"medium"};break;case"traffic_geo_orange_sms":t={"font-weight":"bold",background:"#ffc4cb","font-size":"medium"};break;case"traffic_geo_int_sms":case"data_repartition":t={"font-weight":"bold",background:"#e8d0a7","font-size":"medium"};break;case"traffic_other_sms":case"traffic_other_data":t={"font-weight":"bold",background:"#b09fb5","font-size":"medium"};break;case"arpu":t={"font-weight":"bold",background:"#20c997","font-size":"medium"};break;case"traffics":t={"font-weight":"bold",background:"#dcdede","font-size":"medium"};break;default:t={"font-weight":"bold",background:"#ffc4cb","font-size":"medium"}}return t}function d(e,t){return void 0!==t?webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:2}):webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:0})}function l(){var e=document.body.offsetHeight,t=document.body.offsetWidth;return/Android|webOS|iPhone|iPad|Mac|Macintosh|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&window.screen.width<=600?"mobile":/Android|webOS|iPhone|iPad|Mac|Macintosh|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&window.screen.height<=600?"mobile_rotated":e<=740&&t>=1e3?"small":e>=740&&t>=1e3?"standard":"normal"}function p(e){return webix.storage.session.get("screenType:"+e)}function f(e,t){webix.storage.session.put("screenType:"+e,t)}},function(e,t,r){"use strict";r.d(t,"k",(function(){return i})),r.d(t,"n",(function(){return u})),r.d(t,"m",(function(){return s})),r.d(t,"j",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"i",(function(){return p})),r.d(t,"d",(function(){return f})),r.d(t,"o",(function(){return h})),r.d(t,"l",(function(){return _})),r.d(t,"g",(function(){return v})),r.d(t,"f",(function(){return b})),r.d(t,"a",(function(){return m})),r.d(t,"e",(function(){return g})),r.d(t,"c",(function(){return $})),r.d(t,"b",(function(){return x}));var n=r(4);function a(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=new webix.DataCollection({url:Object(n.d)("refdata"),id:"refdata"}),u=(new webix.DataCollection({url:Object(n.d)("distref"),id:"distref"}),{voice:{index:0,name:"Voix (min.)"},sms:{index:1,name:"SMS (Qte.)"},data:{index:2,name:"Data (Octets)"}}),s={},c={},d={},l={},p={},f={},h={},_={},v=[],b=new Promise((function(e,t){i.waitData.then((function(){for(var t,r=i.getItem(i.getFirstId()).filters_opt,n=i.getItem(i.getFirstId()).opt_ref,o={filters:{}},u=a(r);!(t=u()).done;){var s=t.value;v.push(s.name),o.filters[s.name]={default:s.default,desc:s.description,icon:s.icon,illustration:s.illustration,options:[].concat(n[s.name])}}e(o)}))})),m=new webix.promise((function(e,t){i.waitData.then((function(){var t=i.getItem(i.getFirstId()).color_ref,r={};for(var n in t)r[n]=t[n];e(r)}))})),y=[],g=new webix.promise((function(e,t){i.waitData.then((function(){var t=i.getItem(i.getFirstId()).kpis_long_name,r={};for(var n in t)r[n]=t[n];e(r)}))}));new webix.promise((function(e,t){i.waitData.then((function(){for(var t,r=[],n=a(i.getItem(i.getFirstId()).select_options.parcGeoOptions);!(t=n()).done;){var o=t.value;r.push(o)}e(r)}))})),new webix.promise((function(e,t){i.waitData.then((function(){for(var t,r=[],n=a(i.getItem(i.getFirstId()).select_options.recFilterOptions);!(t=n()).done;){var o=t.value;r.push(o)}e(r)}))})),new webix.promise((function(e,t){i.waitData.then((function(){for(var t,r=[],n=a(i.getItem(i.getFirstId()).select_options.revGeoOptions);!(t=n()).done;){var o=t.value;r.push(o)}e(r)}))}));i.waitData.then((function(){var e=i.getItem(i.getFirstId()).titles;for(var t in e)c[t]=e[t];var r=i.getItem(i.getFirstId()).kpi_labels;for(var n in r)p[n]=r[n];var o=i.getItem(i.getFirstId()).dash_titles;for(var u in o)f[u]=o[u];for(var v,b=a(i.getItem(i.getFirstId()).opt_ref.b);!(v=b()).done;){var m=v.value;y.push(m)}var g=i.getItem(i.getFirstId()).urls;for(var $ in g)h[$]=g[$];var w=i.getItem(i.getFirstId()).geo_files;for(var x in w)l[x]=w[x];var j=i.getItem(i.getFirstId()).geo_config;for(var O in j)d[O]=j[O];var S=i.getItem(i.getFirstId()).tool_bar_refs;for(var k in S)_[k]=S[k];var T=i.getItem(i.getFirstId()).revenues;for(var A in T)s[A]=T[A]}));var $={home:[],revenue:[],traffic:[],parc:[],recharge:[],om:[],monitor:[],wimax:[],sales:[],bills:[]},w=[];i.waitData.then((function(){var e=i.getItem(i.getFirstId()).recharge_type,t=1;w.push({id:t,value:"Tous",_type:"all"});for(var r,n=a(e);!(r=n()).done;){var o=r.value;t++,w.push({id:t,value:o,_type:o})}}));var x=["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},function(e,t,r){"use strict";function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function a(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"c",(function(){return H})),r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return p}));var i=function(){},u=function(){function e(e){this.webixJet=!0,this.webix=e,this._events=[],this._subs={},this._data={}}var t=e.prototype;return t.getRoot=function(){return this._root},t.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},t.setParam=function(e,t,r){if(this._data[e]!==t&&(this._data[e]=t,this._segment.update(e,t,0),r))return this.show(null)},t.getParam=function(e,t){var r=this._data[e];if(void 0!==r||!t)return r;var n=this.getParentView();return n?n.getParam(e,t):void 0},t.getUrl=function(){return this._segment.suburl()},t.getUrlString=function(){return this._segment.toString()},t.getParentView=function(){return this._parent},t.$$=function(e){if("string"==typeof e){var t=this.getRoot();return t.queryView((function(r){return(r.config.id===e||r.config.localId===e)&&r.$scope===t.$scope}),"self")}return e},t.on=function(e,t,r){var n=e.attachEvent(t,r);return this._events.push({obj:e,id:n}),n},t.contains=function(e){for(var t in this._subs){var r=this._subs[t].view;if(r===e||r.contains(e))return!0}return!1},t.getSubView=function(e){var t=this.getSubViewInfo(e);if(t)return t.subview.view},t.getSubViewInfo=function(e){var t=this._subs[e||"default"];return t?{subview:t,parent:this}:"_top"===e?(this._subs[e]={url:"",id:null,popup:!0},this.getSubViewInfo(e)):this._parent?this._parent.getSubViewInfo(e):null},t._detachEvents=function(){for(var e=this._events,t=e.length-1;t>=0;t--)e[t].obj.detachEvent(e[t].id)},t._destroySubs=function(){for(var e in this._subs){var t=this._subs[e].view;t&&t.destructor()}this._subs={}},t._init_url_data=function(){var e=this._segment.current();this._data={},this.webix.extend(this._data,e.params,!0)},t._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var e in this._subs){var t=this._subs[e];if(!t.branch&&t.view&&"_top"!==e){var r=t.view._getDefaultSub();if(r)return r}}},t._routed_view=function(){var e=this.getParentView();if(!e)return!0;var t=e._getDefaultSub();return!(!t&&t!==this)&&e._routed_view()},e}();function s(e){"/"===e[0]&&(e=e.substr(1));for(var t=e.split("/"),r=[],n=0;n<t.length;n++){var o=t[n],i={},u=o.indexOf(":");if(-1===u&&(u=o.indexOf("?")),-1!==u)for(var s,c=a(o.substr(u+1).split(/[\:\?\&]/g));!(s=c()).done;){var d=s.value.split("=");i[d[0]]=decodeURIComponent(d[1])}r[n]={page:u>-1?o.substr(0,u):o,params:i,isNew:!0}}return r}function c(e){for(var t,r=[],n=a(e);!(t=n()).done;){var o=t.value;r.push("/"+o.page);var i=d(o.params);i&&r.push("?"+i)}return r.join("")}function d(e){var t=[];for(var r in e)t.length&&t.push("&"),t.push(r+"="+encodeURIComponent(e[r]));return t.join("")}var l=function(){function e(e,t){this._next=1,this.route="string"==typeof e?{url:s(e),path:e}:e,this.index=t}var t=e.prototype;return t.current=function(){return this.route.url[this.index]},t.next=function(){return this.route.url[this.index+this._next]},t.suburl=function(){return this.route.url.slice(this.index)},t.shift=function(){return new e(this.route,this.index+this._next)},t.refresh=function(){for(var e=this.route.url,t=this.index+1;t<e.length;t++)e[t].isNew=!0},t.toString=function(){var e=c(this.suburl());return e?e.substr(1):""},t._join=function(e,t){var r=this.route.url;if(null===e)return r;var n=this.route.url;if(r=n.slice(0,this.index+(t?this._next:0)),e){r=r.concat(s(e));for(var a=0;a<r.length;a++)n[a]&&(r[a].view=n[a].view),n[a]&&r[a].page===n[a].page&&(r[a].isNew=!1)}return r},t.append=function(e){var t=this._join(e,!0);return this.route.path=c(t),this.route.url=t,this.route.path},t.show=function(e,t,r){var n=this,a=this._join(e,r);return new Promise((function(e,r){var o=c(a),u={url:a,redirect:o,confirm:Promise.resolve()},s=t?t.app:null;if(s&&!s.callEvent("app:guard",[u.redirect,t,u]))return void r(new i);u.confirm.catch((function(e){return r(e)})).then((function(){if(null!==u.redirect){if(u.redirect!==o)return s.show(u.redirect),void r(new i);n.route.path=o,n.route.url=a,e()}else r(new i)}))}))},t.size=function(e){this._next=e},t.split=function(){var t={url:this.route.url.slice(this.index+1),path:""};return t.url.length&&(t.path=c(t.url)),new e(t,0)},t.update=function(e,t,r){var n=this.route.url[this.index+(r||0)];if(!n)return this.route.url.push({page:"",params:{}}),this.update(e,t,r);""===e?n.page=t:n.params[e]=t,this.route.path=c(this.route.url)},e}(),p=function(e){function t(t,r){var n;return(n=e.call(this,t.webix)||this).app=t,n._children=[],n}n(t,e);var r=t.prototype;return r.ui=function(e,t){var r=(t=t||{}).container||e.container,n=this.app.createView(e);return this._children.push(n),n.render(r,this._segment,this),"object"!=typeof e||e instanceof u?n:n.getRoot()},r.show=function(e,t){if(t=t||{},"object"==typeof e){for(var r in e)this.setParam(r,e[r]);e=null}else{if("/"===e.substr(0,1))return this.app.show(e);if(0===e.indexOf("./")&&(e=e.substr(2)),0===e.indexOf("../")){var n=this.getParentView();return n?n.show(e.substr(3),t):this.app.show("/"+e.substr(3))}var a=this.getSubViewInfo(t.target);if(a){if(a.parent!==this)return a.parent.show(e,t);if(t.target&&"default"!==t.target)return this._renderFrameLock(t.target,a.subview,e)}else if(e)return this.app.show("/"+e)}return this._show(this._segment,e,this)},r._show=function(e,t,r){var n=this;return e.show(t,r,!0).then((function(){return n._init_url_data(),n._urlChange()})).then((function(){e.route.linkRouter&&(n.app.getRouter().set(e.route.path,{silent:!0}),n.app.callEvent("app:route",[e.route.path]))}))},r.init=function(e,t){},r.ready=function(e,t){},r.config=function(){this.app.webix.message("View:Config is not implemented")},r.urlChange=function(e,t){},r.destroy=function(){},r.destructor=function(){this.destroy(),this._destroyKids(),this._root.destructor(),e.prototype.destructor.call(this)},r.use=function(e,t){e(this.app,this,t)},r.refresh=function(){this.getUrl();return this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},r.render=function(e,t,r){var n=this;"string"==typeof t&&(t=new l(t,0)),this._segment=t,this._parent=r,this._init_url_data();var a="string"==typeof(e=e||document.body)?this.webix.toNode(e):e;return this._container!==a?(this._container=a,this._render(t)):this._urlChange().then((function(){return n.getRoot()}))},r._render=function(e){var t=this,r=this.config();return r.then?r.then((function(r){return t._render_final(r,e)})):this._render_final(r,e)},r._render_final=function(e,t){var r,n=this,a=null,o=null,i=!1;if(this._container.tagName?o=this._container:(a=this._container).popup?(o=document.body,i=!0):o=this.webix.$$(a.id),!this.app||!o)return Promise.reject(null);var u=this._segment.current(),s={ui:{}};this.app.copyConfig(e,s.ui,this._subs),this.app.callEvent("app:render",[this,t,s]),s.ui.$scope=this,!a&&u.isNew&&u.view&&u.view.destructor();try{if(a&&!i){var c=o,d=c.getParentView();d&&"multiview"===d.name&&!s.ui.id&&(s.ui.id=c.config.id)}this._root=this.app.webix.ui(s.ui,o);var l=this._root;i&&l.setPosition&&!l.isVisible()&&l.show(),a&&(a.view&&a.view!==this&&a.view!==this.app&&a.view.destructor(),a.id=this._root.config.id,this.getParentView()||!this.app.app?a.view=this:a.view=this.app),u.isNew&&(u.view=this,u.isNew=!1),r=Promise.resolve(this._init(this._root,t)).then((function(){return n._urlChange().then((function(){return n._initUrl=null,n.ready(n._root,t.suburl())}))}))}catch(e){r=Promise.reject(e)}return r.catch((function(e){return n._initError(n,e)}))},r._init=function(e,t){return this.init(e,t.suburl())},r._urlChange=function(){var e=this;this.app.callEvent("app:urlchange",[this,this._segment]);var t=[];for(var r in this._subs){var n=this._subs[r],a=this._renderFrameLock(r,n,null);a&&t.push(a)}return Promise.all(t).then((function(){return e.urlChange(e._root,e._segment.suburl())}))},r._renderFrameLock=function(e,t,r){if(!t.lock){var n=this._renderFrame(e,t,r);n&&(t.lock=n.then((function(){return t.lock=null}),(function(){return t.lock=null})))}return t.lock},r._renderFrame=function(e,t,r){var n=this;if("default"===e){if(this._segment.next())return this._createSubView(t,this._segment.shift());t.view&&t.popup&&(t.view.destructor(),t.view=null)}if(null!==r&&(t.url=r),t.route){if(null!==r)return t.route.show(r,t.view).then((function(){return n._createSubView(t,t.route)}));if(t.branch)return}var a=t.view;if(!a&&t.url){if("string"==typeof t.url)return t.route=new l(t.url,0),this._createSubView(t,t.route);"function"!=typeof t.url||a instanceof t.url||(a=new t.url(this.app,"")),a||(a=t.url)}if(a)return a.render(t,t.route||this._segment,this)},r._initError=function(e,t){return this.app&&this.app.error("app:error:initview",[t,e]),!0},r._createSubView=function(e,t){var r=this;return this.app.createFromURL(t.current()).then((function(n){return n.render(e,t,r)}))},r._destroyKids=function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t]&&e[t].destructor&&e[t].destructor();this._children=[]},t}(u),f=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this)._ui=r.ui,n}return n(t,e),t.prototype.config=function(){return this._ui},t}(p),h=function(){function e(e,t,r){this.path="",this.app=r}var t=e.prototype;return t.set=function(e,t){this.path=e;var r=this.app;r.app.getRouter().set(r._segment.append(this.path),{silent:!0})},t.get=function(){return this.path},e}(),_=!0,v=function(e){function t(t){var r,n=(t||{}).webix||window.webix;return(r=e.call(this,n)||this).config=r.webix.extend({name:"App",version:"1.0",start:"/home"},t,!0),r.app=r.config.app,r.ready=Promise.resolve(),r._services={},r.webix.extend(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r),r.webix.EventSystem),r}n(t,e);var r=t.prototype;return r.getUrl=function(){return this._subSegment.suburl()},r.getUrlString=function(){return this._subSegment.toString()},r.getService=function(e){var t=this._services[e];return"function"==typeof t&&(t=this._services[e]=t(this)),t},r.setService=function(e,t){this._services[e]=t},r.destructor=function(){this.getSubView().destructor(),e.prototype.destructor.call(this)},r.copyConfig=function(e,t,r){if((e instanceof u||"function"==typeof e&&e.prototype instanceof u)&&(e={$subview:e}),void 0!==e.$subview)return this.addSubView(e,t,r);for(var n in t=t||(e instanceof Array?[]:{}),e){var a=e[n];if("function"==typeof a&&a.prototype instanceof u&&(a={$subview:a}),!a||"object"!=typeof a||a instanceof this.webix.DataCollection||a instanceof RegExp||a instanceof Map)t[n]=a;else if(a instanceof Date)t[n]=new Date(a);else{var o=this.copyConfig(a,a instanceof Array?[]:{},r);null!==o&&(t[n]=o)}}return t},r.getRouter=function(){return this.$router},r.clickHandler=function(e,t){if(e&&(t=t||e.target||e.srcElement)&&t.getAttribute){var r=t.getAttribute("trigger");if(r)return this._forView(t,(function(e){return e.app.trigger(r)})),e.cancelBubble=!0,e.preventDefault();var n=t.getAttribute("route");if(n)return this._forView(t,(function(e){return e.show(n)})),e.cancelBubble=!0,e.preventDefault()}var a=t.parentNode;a&&this.clickHandler(e,a)},r.getRoot=function(){return this.getSubView().getRoot()},r.refresh=function(){var e=this;return this._subSegment?this.getSubView().refresh().then((function(t){return e.callEvent("app:route",[e.getUrl()]),t})):Promise.resolve(null)},r.loadView=function(e){var t=this,r=this.config.views,n=null;if(""===e)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{r&&"string"==typeof(n="function"==typeof r?r(e):r[e])&&(e=n,n=null),n||(n="_blank"===e?{}:this._loadViewDynamic(e))}catch(t){n=this._loadError(e,t)}return n.then||(n=Promise.resolve(n)),n=n.then((function(e){return e.__esModule?e.default:e})).catch((function(r){return t._loadError(e,r)}))},r._forView=function(e,t){var r=this.webix.$$(e);r&&t(r.$scope)},r._loadViewDynamic=function(e){return null},r.createFromURL=function(e){var t=this;return e.isNew||!e.view?this.loadView(e.page).then((function(e){return t.createView(e,name)})):Promise.resolve(e.view)},r.createView=function(e,r){if("function"==typeof e){if(e.prototype instanceof t)return new e({app:this,name:r,router:h});if(e.prototype instanceof u)return new e(this,{name:r});e=e(this)}return e instanceof u?e:new f(this,{name:r,ui:e})},r.show=function(e){return this.render(this._container,e||this.config.start)},r.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.apply(e,r)},r.apply=function(e,t){this.callEvent(e,t)},r.action=function(e){return this.webix.bind((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this.apply(e,r)}),this)},r.on=function(e,t){this.attachEvent(e,t)},r.use=function(e,t){e(this,null,t)},r.error=function(e,t){if(this.callEvent(e,t),this.callEvent("app:error",t),this.config.debug)for(var r=0;r<t.length;r++)if(console.error(t[r]),t[r]instanceof Error){var n=t[r].message;0===n.indexOf("Module build failed")?(n=n.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+n+"</pre>"):(n+="<br><br>Check console for more details",this.webix.message({type:"error",text:n,expire:-1}))}},r.render=function(e,t,r){var n=this;this._container="string"==typeof e?this.webix.toNode(e):e||document.body;var a=null;!this.$router?(_&&"tagName"in this._container&&(this.webix.event(document.body,"click",(function(e){return n.clickHandler(e)})),_=!1),"string"==typeof t&&(t=new l(t,0)),this._subSegment=this._first_start(t),this._subSegment.route.linkRouter=!0):a="string"==typeof t?t:this.app?t.split().route.path||this.config.start:t.toString();var o=this.getSubView(),i=this._subSegment,u=i.show(a,o).then((function(){return n.createFromURL(i.current())})).then((function(t){return t.render(e,i)})).then((function(e){return n.$router.set(i.route.path,{silent:!0}),n.callEvent("app:route",[n.getUrl()]),e}));return this.ready=this.ready.then((function(){return u})),u},r.getSubView=function(){if(this._subSegment){var e=this._subSegment.current().view;if(e)return e}return new p(this,{})},r._first_start=function(e){var t=this;this._segment=e;if(this.$router=new this.config.router((function(e){return setTimeout((function(){t.show(e).catch((function(e){if(!(e instanceof i))throw e}))}),1)}),this.config,this),this._container===document.body&&!1!==this.config.animation){var r=this._container;this.webix.html.addCss(r,"webixappstart"),setTimeout((function(){t.webix.html.removeCss(r,"webixappstart"),t.webix.html.addCss(r,"webixapp")}),10)}if(e)this.app&&(e.current().view=this,e.next()?(e.refresh(),e=e.split()):e=new l(this.config.start,0));else{var n=this.$router.get();n||(n=this.config.start,this.$router.set(n,{silent:!0})),e=new l(n,0)}return e},r._loadError=function(e,t){return this.error("app:error:resolve",[t,e]),{template:" "}},r.addSubView=function(e,t,r){var n=!0!==e.$subview?e.$subview:null,a=e.name||(n?this.webix.uid():"default");return t.id=e.id||"s"+this.webix.uid(),(r[a]={id:t.id,url:n,branch:e.branch,popup:e.popup}).popup?null:t},t}(u),b=function(){function e(e,t){var r=this;this.config=t||{},this._detectPrefix(),this.cb=e,window.onpopstate=function(){return r.cb(r.get())}}var t=e.prototype;return t.set=function(e,t){var r=this;if(this.config.routes){var n=e.split("?",2);for(var a in this.config.routes)if(this.config.routes[a]===n[0]){e=a+(n.length>1?"?"+n[1]:"");break}}this.get()!==e&&window.history.pushState(null,null,this.prefix+this.sufix+e),t&&t.silent||setTimeout((function(){return r.cb(e)}),1)},t.get=function(){var e=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(e="/"!==e&&"#"!==e?e:"",this.config.routes){var t=e.split("?",2),r=this.config.routes[t[0]];r&&(e=r+(t.length>1?"?"+t[1]:""))}return e},t._detectPrefix=function(){var e=this.config.routerPrefix;this.sufix="#"+(void 0===e?"!":e),this.prefix=document.location.href.split("#",2)[0]},t._getRaw=function(){return document.location.href},e}(),m=!1;function y(e){if(!m&&e){m=!0;var t=window;t.Promise||(t.Promise=e.promise);var r=e.version.split(".");10*r[0]+1*r[1]<53&&(e.ui.freeze=function(t){var r=t();return r&&r.then?r.then((function(t){return e.ui.$freeze=!1,e.ui.resize(),t})):(e.ui.$freeze=!1,e.ui.resize()),r});var n=e.ui.baselayout.prototype.addView,a=e.ui.baselayout.prototype.removeView,o={addView:function(e,t){var r=this;if(!this.$scope||!this.$scope.webixJet||e.queryView)return n.apply(this,arguments);var a=function(){var a=r.$scope,o={};e=a.app.copyConfig(e,{},o),n.apply(r,[e,t]);var i=function(e){a._renderFrame(e,o[e],null).then((function(){a._subs[e]=o[e]}))};for(var u in o)i(u);return{v:e.id}}();return"object"==typeof a?a.v:void 0},removeView:function(){if(a.apply(this,arguments),this.$scope&&this.$scope.webixJet){var t=this.$scope._subs;for(var r in t){var n=t[r];e.$$(n.id)||(n.view.destructor(),delete t[r])}}}};e.extend(e.ui.layout.prototype,o,!0),e.extend(e.ui.baselayout.prototype,o,!0),e.protoUI({name:"jetapp",$init:function(t){this.$app=new this.app(t);var r=e.uid().toString();for(var n in t.body={id:r},this.$ready.push((function(){this.$app.render({id:r})})),this.$app){var a=this.$app[n];"function"!=typeof a||this[n]||(this[n]=a.bind(this.$app))}}},e.ui.proxy)}}var g=function(e){function t(t){var r;return t.router=t.router||b,y((r=e.call(this,t)||this).webix),r}return n(t,e),t.prototype._loadViewDynamic=function(e){return e=e.replace(/\./g,"/"),r(186)("./"+e)},t}(v);function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function w(e,t,r){for(var n in e)$(e,n)&&t.call(r||e,e[n],n,e)}function x(e){e="Warning: "+e,"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}}var j=String.prototype.replace,O=String.prototype.split,S=function(e){var t=e%10;return 11!==e&&1===t?0:2<=t&&t<=4&&!(e>=12&&e<=14)?1:2},k={arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:S,chinese:function(){return 0},croatian:S,french:function(e){return e>1?1:0},german:function(e){return 1!==e?1:0},russian:S,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3}},T={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function A(e){var t,r=(t={},w(T,(function(e,r){w(e,(function(e){t[e]=r}))})),t);return r[e]||r[O.call(e,/-/,1)[0]]||r.en}function C(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var D=/\$/g,z=/%\{(.*?)\}/g;function E(e,t,r,n){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var a=e,o=n||z,i="number"==typeof t?{smart_count:t}:t;if(null!=i.smart_count&&a){var u=O.call(a,"||||");a=(u[function(e,t){return k[A(e)](t)}(r||"en",i.smart_count)]||u[0]).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return a=j.call(a,o,(function(e,t){return $(i,t)&&null!=i[t]?j.call(i[t],D,"$$"):e}))}function B(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var r=t.allowMissing?E:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:r,this.warn=t.warn||x,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",r=e&&e.suffix||"}";if("||||"===t||"||||"===r)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(C(t)+"(.*?)"+C(r),"g")}(t.interpolation)}B.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},B.prototype.extend=function(e,t){w(e,(function(e,r){var n=t?t+"."+r:r;"object"==typeof e?this.extend(e,n):this.phrases[n]=e}),this)},B.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:w(e,(function(e,r){var n=t?t+"."+r:r;"object"==typeof e?this.unset(e,n):delete this.phrases[n]}),this)},B.prototype.clear=function(){this.phrases={}},B.prototype.replace=function(e){this.clear(),this.extend(e)},B.prototype.t=function(e,t){var r,n,a=null==t?{}:t;if("string"==typeof this.phrases[e])r=this.phrases[e];else if("string"==typeof a._)r=a._;else if(this.onMissingKey){n=(0,this.onMissingKey)(e,a,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+e+'"'),n=e;return"string"==typeof r&&(n=E(r,a,this.currentLocale,this.tokenRegex)),n},B.prototype.has=function(e){return $(this.phrases,e)},B.transformPhrase=function(e,t,r){return E(e,t,r)};var L=B;function P(e,t,r){if(t.urls)r=t.urls[r]||r;else if(t.param){var n;(n={})[t.param]=r,r=n}e.show(r)}var I={good:"check",error:"warning",saving:"refresh fa-spin"},N={good:"Ok",error:"Error",saving:"Connecting..."};function M(e,t,r){for(var n=0;n<r.length;n++)e[r[n]]=t[n+1]?t[n+1].page:""}var F=window.webix;F&&y(F);var H={UnloadGuard:function(e,t,r){t.on(e,"app:guard",(function(e,n,a){if(n===t||n.contains(t)){var o=r();a.confirm=!1===o?Promise.reject(new i):a.confirm.then((function(){return o}))}}))},Locale:function(e,t,n){var a=(n=n||{}).storage,o=a?a.get("lang")||"en":n.lang||"en";function i(t,r,i){r.__esModule&&(r=r.default);var u={phrases:r};n.polyglot&&e.webix.extend(u,n.polyglot);var c=s.polyglot=new L(u);if(c.locale(t),s._=e.webix.bind(c.t,c),o=t,a&&a.put("lang",o),n.webix){var d=n.webix[t];d&&e.webix.i18n.setLocale(d)}return i?Promise.resolve():e.refresh()}function u(e,t){if(!1!==n.path){var a=(n.path?n.path+"/":"")+e;i(e,r(187)("./"+a),t)}}var s={getLang:function(){return o},setLang:u,setLangData:i,_:null,polyglot:null};e.setService("locale",s),u(o,!0)},Menu:function(e,t,r){var n=t.getSubViewInfo().parent,a=t.$$(r.id||r),o=!1;a.attachEvent("onchange",(function(){o||P(n,r,this.getValue())})),a.attachEvent("onafterselect",(function(){if(!o){var e=null;a.setValue?e=this.getValue():a.getSelectedId&&(e=a.getSelectedId()),P(n,r,e)}})),t.on(e,"app:route",(function(){var e="";if(r.param)e=t.getParam(r.param,!0);else{var i=n.getUrl()[1];i&&(e=i.page)}e&&(o=!0,a.setValue&&a.getValue()!==e?a.setValue(e):a.select&&a.exists(e)&&a.getSelectedId()!==e&&a.select(e),o=!1)}))},Theme:function(e,t,r){var n=(r=r||{}).storage,a=n?n.get("theme")||"flat-default":r.theme||"flat-default",o={getTheme:function(){return a},setTheme:function(t,r){for(var o=t.split("-"),i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var s=i[u].getAttribute("title");s&&(s===t||s===o[0]?i[u].disabled=!1:i[u].disabled=!0)}e.webix.skin.set(o[0]),e.webix.html.removeCss(document.body,"theme-"+a),e.webix.html.addCss(document.body,"theme-"+t),a=t,n&&n.put("theme",t),r||e.refresh()}};e.setService("theme",o),o.setTheme(a,!0)},User:function(e,t,r){var n=(r=r||{}).login||"/login",a=r.logout||"/logout",o=r.afterLogin||e.config.start,i=r.afterLogout||"/login",u=r.ping||3e5,s=r.model,c=r.user,d={getUser:function(){return c},getStatus:function(e){return e?s.status().catch((function(){return null})).then((function(e){c=e})):null!==c},login:function(t,r){return s.login(t,r).then((function(t){if(c=t,!t)throw new Error("Access denied");e.callEvent("app:user:login",[c]),e.show(o)}))},logout:function(){return c=null,s.logout().then((function(t){return e.callEvent("app:user:logout",[]),t}))}};function l(e,t){e===a?(d.logout(),t.redirect=i):e===n||d.getStatus()||(t.redirect=n)}e.setService("user",d),e.attachEvent("app:guard",(function(e,t,n){return!(!r.public||!r.public(e))||(void 0===c&&(n.confirm=d.getStatus(!0).then((function(){return l(e,n)}))),l(e,n))})),u&&setInterval((function(){return d.getStatus(!0)}),u)},Status:function(e,t,r){var n="good",a=0,o=!1,i=r.expire;i||!1===i||(i=2e3);var u=r.texts||N,s=r.icons||I;function c(e){var a=t.$$(r.target);a&&(e||(e="<div class='status_"+n+"'><span class='webix_icon fa-"+s[n]+"'></span> "+u[n]+"</div>"),a.setHTML(e))}function d(){a--,h("good")}function l(e){a--,h("error",e)}function p(e){a++,h("saving"),e&&e.then&&e.then(d,l)}function f(){0===a&&c(" ")}function h(t,r){a<0&&(a=0),"saving"===t?(n="saving",c()):(o="error"===t,0===a&&(n=o?"error":"good",o?e.error("app:error:server",[r.responseText||r]):i&&setTimeout(f,i),c()))}function _(r){var n=e.webix.dp(r);n&&(t.on(n,"onAfterDataSend",p),t.on(n,"onAfterSaveError",(function(e,t,r){return l(r)})),t.on(n,"onAfterSave",d))}"string"==typeof r&&(r={target:r}),e.setService("status",{getStatus:function(){return n},setStatus:h,track:_}),r.remote&&t.on(e.webix,"onRemoteCall",p),r.ajax&&t.on(e.webix,"onBeforeAjax",(function(e,t,r,n,a,o,i){p(i)})),r.data&&_(r.data)},UrlParam:function(e,t,r){var n=r.route||r,a={};t.on(e,"app:urlchange",(function(e,r){t===e&&(M(a,r.suburl(),n),r.size(n.length+1))}));var o=t.setParam,i=t.getParam;t.setParam=function(e,r,i){var u=n.indexOf(e);return u>=0?(a[e]=r,this._segment.update("",r,u+1),i?t.show(null):void 0):o.call(this,e,r,i)},t.getParam=function(e,t){var r=a[e];return void 0!==r?r:i.call(this,e,t)},M(a,t.getUrl(),n)}},R=window;R.Promise||(R.Promise=R.webix.promise)},function(e,t,r){"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,"h",(function(){return u})),r.d(t,"f",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return d})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return p})),r.d(t,"g",(function(){return f})),r.d(t,"b",(function(){return h}));var i="";function u(e){i=e,webix.storage.session.put("tk",e)}function s(){return""!=i?i:webix.storage.session.get("tk")}function c(){var e=""==default_dates.d1?webix.Date.dateToStr("%Y-%m-%d")(webix.Date.add(new Date,-1,"day")):default_dates.d1,t=""==default_dates.d2?webix.Date.dateToStr("%Y-%m-%d")(webix.Date.add(new Date,-1,"day")):default_dates.d2;console.log(t),null==webix.storage.session.get("filter")&&webix.storage.session.put("filter",{d1:e,d2:t}),webix.storage.session.get("menucollapsed")?h.menucollapsed=webix.storage.session.get("menucollapsed"):(webix.storage.session.put("menucollapsed",!0),h.menucollapsed=!0)}function d(){var e=webix.storage.session.get("filter");return{d1:e.d1,d2:e.d2}}function l(){return webix.storage.session.get("filter")}function p(){var e={},t=o({},l());for(var r in t)"object"==typeof t[r]&&t[r].length?e[r]=t[r].map((function(e){return"'"+e+"'"})).join(","):e[r]=t[r];return e}function f(e,t,r,a,o,i){if(void 0===t&&(t=[]),void 0===r&&(r="name"),void 0===a&&(a=["value"]),void 0===o&&(o=0),void 0===i&&(i=0),0!=t.length){var u=[].concat(t),s=0==o?u.length:o,c=s-u.length,d=function(e,t){return e.reduce((function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e}),{})}(e,u[0]);u.shift();for(var l,p=[],h={},_=function(){var t=l.value;h[t]=d3.sum(e,(function(e){return e[t]}))},v=n(a);!(l=v()).done;)_();var b=0;for(var m in d){b++;var y=d[m],g=0==c?""+b:i+"."+b,$={id:g};$[r]=m;for(var w,x=function(){var e=w.value;$[e]=d3.sum(y,(function(t){return t[e]})),h[e]&&0!=h[e]&&($[e+"_percent"]=100*($[e]/h[e]).toFixed(2))},j=n(a);!(w=j()).done;)x();var O=f(y,u,r,a,s,g);0!=O.length&&($.data=O),p.push($)}return p}return[]}var h={app:"",dashboards:{home:"",traffic_voix:"",traffic_sms:"",traffic_data:"",parc:"",revenue:"",om:"",monitor:"",wimax:"",recharge:"",traffic:"",sales:""}}},function(e,t,r){"use strict";r.d(t,"d",(function(){return s})),r.d(t,"g",(function(){return c})),r.d(t,"h",(function(){return d})),r.d(t,"e",(function(){return l})),r.d(t,"a",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return _}));var n=r(1),a=r(87),o=r(3);function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){return urls[e]+"&token="+Object(o.f)()}function c(e,t){if(void 0===t)for(var r,a=i(n.c[e]);!(r=a()).done;){var o=r.value;void 0!==$$(o.cmp)&&($$(o.cmp).showProgress(),$$(o.cmp).disable())}else void 0!==$$(n.c[e][t])&&($$(n.c[e][t]).showProgress(),$$(n.c[e][t]).disable())}function d(e){$$(e).hideProgress(),$$(e).enable()}function l(){for(var e,t=o.b.app,r="mobile"==h()||"mobile_rotated"==h()?3:8,u=i(n.g);!(e=u()).done;){var s=e.value;"d1"!=s&&"d2"!=s&&(void 0!==$$("filterelmt:"+s)&&$$("loginbar").removeView("filterelmt:"+s),$$("loginbar")&&void 0!==Object(o.c)()[s]&&$$("loginbar").addView(new a.FilterIconView(t,"",s),r))}$$("period")&&($$("period").define("label","<span style='color:#fff;font-size:14px' class='mdi mdi-calendar-check' > Période : "+Object(o.e)().d1+" - "+Object(o.e)().d2+"</span>"),$$("period").refresh())}function p(){return Object(o.e)()}function f(){var e=document.body.offsetHeight,t=document.body.offsetWidth,r="normal";return e<=740&&t>=1e3&&(r="small"),e>=740&&t>=1e3&&(r="standard"),/Android|webOS|iPhone|iPad|Mac|Macintosh|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&window.screen.width<=600&&(r="mobile"),/Android|webOS|iPhone|iPad|Mac|Macintosh|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&window.screen.height<=600&&(r="mobile_rotated"),webix.storage.session.put("screenType",r),r}function h(){var e=document.body.offsetHeight,t=document.body.offsetWidth;return/Android|webOS|iPhone|iPad|Mac|Macintosh|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&window.screen.width<=600?"mobile":/Android|webOS|iPhone|iPad|Mac|Macintosh|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&window.screen.height<=600?"mobile_rotated":e<=740&&t>=1e3?"small":e>=740&&t>=1e3?"standard":"normal"}function _(e,t,r,n){if(void 0===t&&(t=[]),void 0===r&&(r="name"),void 0===n&&(n=["value"]),0!=t.length){var a=[].concat(t),o=function(e,t){return e.reduce((function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e}),{})}(e,a[0]);a.shift();for(var u,s=[],c={},d=function(){var t=u.value;c[t]=d3.sum(e,(function(e){return e[t]}))},l=i(n);!(u=l()).done;)d();for(var p in o){var f=o[p],h={};h[r]=p;for(var v,b=function(){var e=v.value;h[e]=d3.sum(f,(function(t){return t[e]})),c[e]&&0!=c[e]&&(h[e+"_percent"]=100*(h[e]/c[e]).toFixed(2))},m=i(n);!(v=m()).done;)b();var y=_(f,a,r,n);0!=y.length&&(h.data=y),s.push(h)}return s}return[]}},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=r(0),o=r(45);function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t,r;function n(t,r,n,a,o){var i;return(i=e.call(this,t,r)||this)._kpi=n,i._did=a,i._vid=o,i}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi,t=(this._did,this._vid,Object(a.d)(e));"mobile"==Object(a.e)()||Object(a.e)();return{view:"toolbar",id:"head:"+e,type:"clean",height:"mobile"==Object(a.e)()||"mobile_rotated"==Object(a.e)()?30:35,cols:[{template:t,borderless:!0,type:"header",css:Object(a.c)(e)},{css:Object(a.c)(e),width:50},{view:"icon",icon:"mdi mdi-export",css:Object(a.c)(e),align:"right"},{view:"icon",icon:"mdi mdi-fullscreen",css:Object(a.c)(e),align:"right"}]}},u.init=function(e){var t=this._kpi,r=this._did,n=(this._vid,this),a=webix.ui({view:"contextmenu",click:function(e){if("i"==e&&webix.toPNG($$("head:"+t).getParentView().getChildViews()[1],{filename:t+"_export"}),"p"==e&&webix.toPDF($$("head:"+t).getParentView().getChildViews()[1],{filename:t+"_export",display:"image"}),"c"==e){var a=t;n.extractData($$("head:"+t).getParentView().getChildViews()[1],a,r)}},data:o.a});webix.event($$("head:"+this._kpi).$view,"click",(function(e){var t=e.target.className;t&&-1!=t.toString().indexOf("mdi-export")&&(a.setContext(webix.$$(e.target)),a.show(e.target))}));var i={view:"toolbar",id:"head:full:"+t,type:"clean",cols:[{},{view:"icon",icon:"mdi mdi-fullscreen-exit",align:"right",click:function(){webix.fullscreen.exit()}}]};webix.event($$("head:"+this._kpi).$view,"click",(function(e){var r=e.target.className;r&&-1!=r.toString().indexOf("mdi-fullscreen")&&webix.fullscreen.set($$("head:"+t).getParentView().getChildViews()[1],{head:i})}))},u.extractData=function(e,t,r){if(this._count||(this._count=0),e.getChildViews().length>0){this._count||(this._count=1);for(var n,a=i(e.getChildViews());!(n=a()).done;){var o=n.value;this.extractData(o,t,r)}}else{var u=this._count>0?t+"_"+this._count:t;if("treemap"!=e._eType){if(e.data&&"function"==typeof e.data.getRange){if(e._echart_obj){var s=1,c=(null==$$(r)?[].concat(e.data.getRange().map((function(e){return e._type}))):[].concat($$(r).data.getRange().map((function(e){return e._type})))).filter((function(e,t,r){return r.indexOf(e)==t}));if("echarts-map"==e.config.view)return webix.toCSV(e,{filename:u}),void this._count++;if(void 0!==e._echart_obj.getModel().get("grid")&&e._echart_obj.getModel().get("grid").length<=1)return webix.toCSV(e,{filename:u,ignore:{_type:!0}}),void this._count++;if(0==c.length){var d={},l={},p=e._echart_obj.getOption().series;if(l.filename=u+"_"+s,"treemap"==p[0].type)p[0]._type==elm&&webix.toCSV($$(r),l);else{var f=p.map((function(e){return e.encode}));for(var h in f[0])d[f[0][h]]=!0;l.columns=d,webix.toCSV(e,l)}}for(var _,v=function(){var t=_.value;console.log(t);var n={},a={filter:function(e){return void 0===e._type||e._type==t},ignore:{_type:!0}},o=e._echart_obj.getOption().series.filter((function(e){return void 0===e._type||e._type==t}));if(a.filename=u+"_"+s,"treemap"==o[0].type)o[0]._type==t&&webix.toCSV($$(r),a);else{var i=o.map((function(e){return e.encode}));for(var c in i[0])n[i[0][c]]=!0;a.columns=n,webix.toCSV(e,a)}s++},b=i(c);!(_=b()).done;)v();return void this._count++}return webix.toCSV(e,{filename:u,ignore:{_type:!0}}),void this._count++}return}webix.toCSV($$(e._expDataId),{filename:u,ignore:{_type:!0}})}},n}(n.b)},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(3),a=r(17),o={home:a.h,parc:a.c,revenue:a.d,recharge:a.f,traffic:a.g,bills:a.a,monitor:a.b},i=function(){function e(){}return e.getData=function(e,t,r,a){return o[e][t](r,Object(n.d)(),a)},e.getDrillData=function(e,t,r,a,i){var u=Object(n.d)();return u.d1=a,o[e][t](r,u,i)},e}()},function(e,t,r){"use strict";r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return O}));var n=r(1),a=r(6),o=r(18);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}new(r(17).d)(n.o.api_url);var u=new webix.DataCollection({id:"rev_stat",url:function(e){return a.a.getData("revenue","getStat","stat")}}),s=new webix.DataCollection({id:"rev_split",url:function(e){return a.a.getData("revenue","getRevenue","split")}}),c=new webix.DataCollection({id:"rev_trend_split",url:function(e){return a.a.getData("revenue","getRevenue","month_trend","vue0")}}),d=new webix.DataCollection({id:"rev_net_split",url:function(e){return a.a.getData("revenue","getRevTypeByNet","vue1")}}),l=new webix.DataCollection({id:"rev_net_split_exp",url:function(e){return a.a.getData("revenue","getRevTypeByNet","vue2")}}),p=new webix.TreeCollection({id:"rev_type_prod_split",url:function(e){return a.a.getData("revenue","getRevTypeByProd","vue1")}}),f=new webix.DataCollection({id:"rev_type_prod_split_exp",url:function(e){return a.a.getData("revenue","getRevTypeByProd","vue2")}}),h=new webix.DataCollection({id:"rev_line_split",url:function(e){return a.a.getData("revenue","getRevLine","split","vue1")}}),_=new webix.DataCollection({id:"rev_line_trend",url:function(e){return a.a.getData("revenue","getRevLine","month_trend")}}),v=new webix.DataCollection({id:"rev_op_split",url:function(e){return a.a.getData("revenue","getRevByOpType","vue1")}}),b=new webix.DataCollection({id:"traff_op_split",url:function(e){return a.a.getData("revenue","getRevByOpType","vue2")}}),m=new webix.DataCollection({id:"rev_clt_split",url:function(e){return a.a.getData("revenue","getRevTypeClt","vue1")}}),y=new webix.DataCollection({id:"rev_clt_split_exp",url:function(e){return a.a.getData("revenue","getRevTypeClt","vue2")}});function g(e){switch(e){case"stat":return u;case"rev_split":return s;case"rev_type_net_exp":return l;case"rev_type_net":return d;case"rev_type_split_exp":return f;case"rev_type_split":return p;case"operators":return v;case"operators_traff":return b;case"rev_client_split":return m;case"rev_client_split_exp":return y;case"rev_split_gros":return rev_split_gros;case"rev_grp_type_split_fai":return rev_grp_split_fai;case"rev_grp_type_split_gros":return rev_grp_split_gros;case"revType_trend":return c;case"revType_trend_fai":return rev_trend_split_fai;case"revType_trend_gros":return rev_trend_split_gros;case"rev_line_split":return h;case"rev_off_trend":return _;case"rev_sales_split":return rev_sales_split;case"rev_sales_trend":return rev_sales_trend;case"pay_trend":return rev_pay_trend;case"rev_zone":return rev_zone_split;case"rev_bill":return rev_bill_split;case"rev_roam":return rev_roam_split}}for(var $,w=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}([{type:"stat",data:u,func:"getStat"},{type:"split",data:s,func:"getRevenue"},{type:"vue1",data:d,func:"getRevTypeByNet",params:"vue1"},{type:"vue2",data:l,func:"getRevTypeByNet",params:"vue2"},{type:"vue1",data:p,func:"getRevTypeByProd",params:"vue1"},{type:"vue2",data:f,func:"getRevTypeByProd",params:"vue2"},{type:"split",data:h,func:"getRevLine"},{type:"month_trend",data:_,func:"getRevLine"},{type:"vue1",data:v,func:"getRevByOpType"},{type:"vue2",data:b,func:"getRevByOpType"},{type:"vue1",data:m,func:"getRevTypeClt",params:"vue1"},{type:"vue2",data:y,func:"getRevTypeClt",params:"vue2"},{type:"month_trend",data:c,func:"getRevenue",params:"vue2"}]);!($=w()).done;){var x=$.value;x.data._menu="revenue",x.data._func=x.func,x.data._param=x.type,x.params&&(x.data._params=x.params),x.data.attachEvent("onFilterData",o.a.onFiterClicked)}var j={stat:"getStat",revenue:"getRevenue",operators:"getRevByOpType",bndle:"getRevByBundleType",rev_geo:"getRevGeo",operators_traff:"getRevByOpType",line:"getRevLine",rev_roam:"getRoaming",sale:"getSales",pay:"getRevPay"};function O(e,t,r,n){return a.a.getDrillData("revenue",j[e],t,r,n)}},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return a}));var n=r(2);r(145);var a=function(e){var t,r;function n(t,r,n,a,o){var i;return void 0===o&&(o=0),(i=e.call(this,t,r)||this)._id=n,i._slplit=a,i._nb=o,i}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.config=function(){for(var e=[],t=this._nb,r=0;r<this._slplit;r++)e.push({name:"button",id:this._id+"_"+periodSplit[r+t],view:"ui "+(0==r?"active button":"button"),html:periodSplit[r+t]});return{view:"smui-cmp",id:this._id,maxHeight:31,content:{view:"ui mini basic buttons "+this._id,style:{"margin-left":"35%"},children:e}}},a.init=function(e){var t=this;e.attachEvent("onViewShow",(function(){var e=$(".ui.buttons."+t._id+" .button"),r=$(".main .ui.toggle.button"),n=($(".ui.button").not(e).not(r),function(){$(this).addClass("active").siblings().removeClass("active")});e.on("click",n)})),e.attachEvent("onAfterRender",(function(){var e=$(".ui.buttons."+t._id+" .button"),r=$(".main .ui.toggle.button"),n=($(".ui.button").not(e).not(r),function(){$(this).addClass("active").siblings().removeClass("active")});e.on("click",n)})),webix.event(window,"resize",(function(){console.log("wind resize"),e.__render_once()}))},n}(n.b)},function(e,t,r){"use strict";r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return x}));var n=r(1),a=r(6),o=r(18);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}new(r(17).c)(n.o.api_url);var u=new webix.DataCollection({id:"parc_stat",url:function(e){return a.a.getData("parc","getStat","vue1")}}),s=new webix.DataCollection({id:"parc_billing",url:function(e){return a.a.getData("parc","getParcByBill","vue1")}}),c=new webix.DataCollection({id:"parc_off_grp",url:function(e){return a.a.getData("parc","getParcByOffer","vue3")}}),d=new webix.DataCollection({id:"parc_off_grp_exp",url:function(e){return a.a.getData("parc","getParcByOffer","vue4")}}),l=new webix.TreeCollection({id:"parc_bill_mark_prod",url:function(e){return a.a.getData("parc","getParcByOffer","vue5")}}),p=new webix.DataCollection({id:"parc_bill_mark_prod_exp",url:function(e){return a.a.getData("parc","getParcByOffer","vue6")}}),f=new webix.DataCollection({id:"parc_by_prod",url:function(e){return a.a.getData("parc","getParcByType","split")}}),h=new webix.DataCollection({id:"parc_by_prod_trend",url:function(e){return a.a.getData("parc","getParcByType","month_trend")}}),_=new webix.DataCollection({id:"parc_by_status_by_net",url:function(e){return a.a.getData("parc","getParcByStatus","split")}}),v=new webix.DataCollection({id:"parc_by_status_by_net_exp",url:function(e){return a.a.getData("parc","getParcByStatus","exp")}}),b=new webix.DataCollection({id:"parc_netadd",url:function(e){return a.a.getData("parc","getNetAdd","vue1")}});function m(e){switch(e){case"stat":return u;case"parc_bill":return s;case"parc_offer_grp":return c;case"parc_offer_grp_exp":return d;case"parc_offer_prod":return f;case"parc_offer_prod_trend":return h;case"parc_status_split":return _;case"parc_status_split_exp":return v;case"parc_bill_split":return l;case"parc_bill_split_exp":return p;case"netadd":return b}}for(var y,g=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}([{type:"stat",data:u,func:"getStat"},{type:"vue1",data:s,func:"getParcByBill"},{type:"vue3",data:c,func:"getParcByOffer"},{type:"vue4",data:d,func:"getParcByOffer"},{type:"vue5",data:l,func:"getParcByOffer"},{type:"vue6",data:p,func:"getParcByOffer"},{type:"split",data:f,func:"getParcByType"},{type:"month_trend",data:h,func:"getParcByType"},{type:"split",data:_,func:"getParcByStatus"},{type:"exp",data:v,func:"getParcByStatus"},{type:"vue1",data:b,func:"getNetAdd"}]);!(y=g()).done;){var $=y.value;$.data._menu="parc",$.data._func=$.func,$.data._param=$.type,$.params&&($.data._params=$.params),$.data.attachEvent("onFilterData",o.a.onFiterClicked)}var w={stat:"getStat",geo:"getParcGeo",type:"getParcByType",operator:"getOpSplit",markType:"getParcByType",markTypeExp:"getParcByType",in_statut:"getINSplit",line:"getParcLine"};function x(e,t,r,n){return a.a.getDrillData("parc",w[e],t,r,n)}},function(e,t){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}webix.protoUI({name:"echarts-grid-dataset",defaults:{options:{title:[],grid:[],xAxis:[],yAxis:[],series:[],test:"test"}},$init:function(){this._ready_awaits=1,this._is_init=0,webix.extend(this,webix.ProgressBar),this.data.provideApi(this,!0);var e=this;this.data.attachEvent("onAfterLoad",(function(){2==this._ready_awaits?(console.log("afterload"),webix.delay(webix.bind(this.render,this)),this.config.ready&&(this.config.ready.call(this,this.data),this._ready_awaits=3)):this._ready_awaits=1})),this.data.attachEvent("onStoreUpdated",(function(){this._isDataLoaded=1,2==e._ready_awaits&&webix.delay(webix.bind(e.render,e))})),webix.delay(webix.bind(this.launch_init,this))},launch_init:function(){1==this._ready_awaits&&webix.delay(webix.bind(this._render_once,this))},_render_once:function(){var e=r({},this.defaults);e=$.extend(!0,e,this.config),this._isDataLoaded=void 0===this._isDataLoaded?0:this._isDataLoaded;var t=echarts.init(this.$view);if(this._echart_obj=t,e.charts_event)for(var n in e.charts_event)this._echart_obj.on(n,e.charts_event[n][0],e.charts_event[n][1]);this._ready_awaits=2,this._echart_obj.showLoading(),webix.delay(webix.bind(this.render,this))},render:function(){var e=this.config.options,t=this.data.getRange(),r=[].concat(t);e.series.filter((function(e){return void 0===e._isStack})).forEach((function(t){var n;void 0!==t.datasetIndex&&(n=r.filter((function(e){return e._type==t._type})),t._kpi&&(n=n.filter((function(e){return e._kpi==t._kpi}))),e.dataset[t.datasetIndex].source=n)})),"function"==typeof this.config.beforedisplay&&this.config.beforedisplay(r,e,this._echart_obj),this._echart_obj.setOption(e,!0),(1==this._isDataLoaded&&0==r.length||r.length>0)&&this._echart_obj.hideLoading()},$getSize:function(e,t){return webix.ui.view.prototype.$getSize.call(this,e,t)},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&2==this._ready_awaits&&this._echart_obj.resize()}},webix.DataLoader,webix.EventSystem,webix.ui.view)},function(e,t,r){"use strict";r.d(t,"c",(function(){return O})),r.d(t,"b",(function(){return S})),r.d(t,"a",(function(){return z}));var n=r(1),a=r(6),o=r(17),i=r(18);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}new o.h(n.o.api_url);var s=new webix.DataCollection({id:"parc_home_stat",url:function(e){return a.a.getData("home","getStat","parc")}}),c=new webix.DataCollection({id:"rev_home_stat",url:function(e){return a.a.getData("home","getStat","revenue")}}),d=new webix.DataCollection({id:"tvoix_home_stat",url:function(e){return a.a.getData("home","getStat","tvoix")}}),l=new webix.DataCollection({id:"tdata_home_stat",url:function(e){return a.a.getData("home","getStat","tdata")}}),p=new webix.DataCollection({id:"topup_home_stat",url:function(e){return a.a.getData("home","getStat","topup")}}),f=new webix.DataCollection({id:"encaiss_home_stat",url:function(e){return a.a.getData("home","getStat","encaiss")}}),h=new webix.DataCollection({id:"parc_bill",url:function(e){return a.a.getData("home","getParc","bill")}}),_=new webix.DataCollection({id:"parc_trend",url:function(e){return a.a.getData("home","getParc","month_trend")}}),v=new webix.DataCollection({id:"rev_trend_home",url:function(e){return a.a.getData("home","getRevenue","vue1")}}),b=new webix.DataCollection({id:"data_bill_home",url:function(e){return a.a.getData("home","getData","bill")}}),m=new webix.DataCollection({id:"data_trend_home",url:function(e){return a.a.getData("home","getData","month_trend")}}),y=new webix.DataCollection({id:"recharge_split_home",url:function(e){return a.a.getData("home","getRecharge","split")}}),g=new webix.DataCollection({id:"recharge_trend_home",url:function(e){return a.a.getData("home","getRecharge","month_trend")}}),$=new webix.DataCollection({id:"home_parc_by_prod",url:function(e){return a.a.getData("home","getParc","prod")}}),w=new webix.DataCollection({id:"arpu_trend_home",url:function(e){return a.a.getData("home","getArpu","month_trend")}}),x=new webix.DataCollection({id:"traffic_trend_home",url:function(e){return a.a.getData("home","getTrafficSplitAll","vue1")}}),j=new webix.DataCollection({id:"trend_pay",url:function(e){return a.a.getData("home","getPay","month_trend")}});function O(e){switch(e){case"parc":return s;case"revenue":return c;case"tvoix":return d;case"tdata":return l;case"topup":return p;case"encaiss":return f}}function S(e){switch(e){case"parc_billing":return h;case"parc_prod":return $;case"parc_trend":return _;case"rev_trend":return v;case"bill_data":return b;case"trend_data":return m;case"split_topup":return y;case"month_trend":return g;case"trend_arpu":return w;case"traffic_split":return x;case"pay_trend":return j}}function k(){return[{type:"parc",data:s,id:"parc_home_stat",func:"getStat"},{type:"revenue",data:c,id:"rev_home_stat",func:"getStat"},{type:"tvoix",data:d,id:"tvoix_home_stat",func:"getStat"},{type:"tdata",data:l,id:"tdata_home_stat",func:"getStat"},{type:"topup",data:p,id:"topup_home_stat",func:"getStat"},{type:"encaiss",data:f,id:"encaiss_home_stat",func:"getStat"},{type:"prod",data:$,id:"home_parc_by_prod",func:"getParc"},{type:"bill",data:h,id:"parc_bill",func:"getParc"},{type:"month_trend",data:_,id:"parc_trend",func:"getParc"},{type:"vue1",data:v,id:"rev_trend_home",func:"getRevenue"},{type:"bill",data:b,id:"data_bill_home",func:"getData"},{type:"month_trend",data:m,id:"data_trend_home",func:"getData"},{type:"split",data:y,id:"recharge_split_home",func:"getRecharge"},{type:"month_trend",data:g,id:"recharge_trend_home",func:"getRecharge"},{type:"month_trend",data:w,id:"arpu_trend_home",func:"getArpu"},{type:"vue1",data:x,id:"traffic_trend_home",func:"getTrafficSplitAll"},{type:"month_trend",data:j,id:"trend_pay",func:"getPay"}]}for(var T,A=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}(k());!(T=A()).done;){var C=T.value;C.data._menu="home",C.data._func=C.func,C.data._param=C.type,C.data.attachEvent("onFilterData",i.a.onFiterClicked)}var D={stat:"getStat",parc:"getParc",revenue:"getRevenue",data:"getData",topup:"getRecharge",bndle:"getBundle",traffic:"getTrafficSplitAll",arpu:"getArpu",pay:"getPay"};function z(e,t,r){return a.a.getDrillData("home",D[e],t,r)}},function(e,t,r){"use strict";r.d(t,"c",(function(){return x})),r.d(t,"b",(function(){return j})),r.d(t,"a",(function(){return C}));var n=r(1),a=r(6),o=r(17),i=r(18);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}new o.h(n.o.api_url);var s=new webix.DataCollection({id:"parc_home_stat",url:function(e){return a.a.getData("home","getStat","parc")}}),c=new webix.DataCollection({id:"rev_fai_home_stat",url:function(e){return a.a.getData("home","getStat","revenue_fai")}}),d=new webix.DataCollection({id:"rev_gros_home_stat",url:function(e){return a.a.getData("home","getStat","revenue_gros")}}),l=new webix.DataCollection({id:"tvoix_home_stat",url:function(e){return a.a.getData("home","getStat","tvoix")}}),p=new webix.DataCollection({id:"tsales_home_stat",url:function(e){return a.a.getData("home","getStat","rsales")}}),f=new webix.DataCollection({id:"rev_fact_paid",url:function(e){return a.a.getData("home","getStat","fpaid")}}),h=new webix.DataCollection({id:"nb_demandes",url:function(e){return a.a.getData("home","getStat","ndemande")}}),_=new webix.DataCollection({id:"parc_trend",url:function(e){return a.a.getData("home","getParc","month_trend")}}),v=new webix.DataCollection({id:"rev_trend_home",url:function(e){return a.a.getData("home","getRevenue","month_trend")}}),b=new webix.DataCollection({id:"arpu_trend_home",url:function(e){return a.a.getData("home","getArpu","month_trend")}}),m=new webix.DataCollection({id:"traffic_trend_home",url:function(e){return a.a.getData("home","getTrafficSplitAll","vue1")}}),y=new webix.DataCollection({id:"trend_bndle",url:function(e){return a.a.getData("home","getBundle","month_trend")}}),g=new webix.DataCollection({id:"trend_topup",url:function(e){return a.a.getData("home","getRecharge","month_trend")}}),$=new webix.DataCollection({id:"trend_pay",url:function(e){return a.a.getData("home","getPay","month_trend")}}),w=new webix.DataCollection({id:"trend_dmd",url:function(e){return a.a.getData("home","getDemand","month_trend")}});function x(e){switch(e){case"parc":return s;case"revenue_fai":return c;case"revenue_gros":return d;case"tvoix":return l;case"rsales":return p;case"fpaid":return f;case"demands":return h}}function j(e){switch(e){case"parc_trend":return _;case"rev_trend":return v;case"trend_arpu":return b;case"traffic_split":return m;case"trend_topup":return g;case"trend_bndle":return y;case"pay_trend":return $;case"dmd_trend":return w}}function O(){return[{type:"parc",data:s,id:"parc_home_stat",func:"getStat"},{type:"revenue_fai",data:c,id:"rev_fai_home_stat",func:"getStat"},{type:"revenue_gros",data:c,id:"rev_gros_home_stat",func:"getStat"},{type:"tvoix",data:l,id:"tvoix_home_stat",func:"getStat"},{type:"rsales",data:p,id:"tsales_home_stat",func:"getStat"},{type:"fpaid",data:f,id:"rev_fact_paid",func:"getStat"},{type:"ndemande",data:h,id:"nb_demandes",func:"getStat"},{type:"month_trend",data:_,id:"parc_trend",func:"getParc"},{type:"month_trend",data:v,id:"rev_trend_home",func:"getRevenue"},{type:"month_trend",data:b,id:"arpu_trend_home",func:"getArpu"},{type:"vue1",data:m,id:"traffic_trend_home",func:"getTrafficSplitAll"},{type:"month_trend",data:y,id:"trend_bndle",func:"getBundle"},{type:"month_trend",data:g,id:"trend_topup",func:"getRecharge"},{type:"month_trend",data:$,id:"trend_pay",func:"getPay"},{type:"month_trend",data:w,id:"trend_dmd",func:"getDemand"}]}for(var S,k=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}(O());!(S=k()).done;){var T=S.value;T.data._menu="home",T.data._func=T.func,T.data._param=T.type,T.data.attachEvent("onFilterData",i.a.onFiterClicked)}var A={stat:"getStat",parc:"getParc",revenue:"getRevenue",data:"getData",topup:"getRecharge",pay:"getPay",bndle:"getBundle",traffic:"getTrafficSplitAll",arpu:"getArpu",demand:"getDemand"};function C(e,t,r){return a.a.getDrillData("home",A[e],t,r)}},function(e,t,r){"use strict";r.d(t,"b",(function(){return y})),r.d(t,"a",(function(){return j}));var n=r(1),a=r(6),o=r(18);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}new(r(17).g)(n.o.api_url);var u=new webix.DataCollection({id:"traffic_stat",url:function(e){return a.a.getData("traffic","getStat","stat")}}),s=new webix.DataCollection({id:"int_traffic_geo",url:function(e){return a.a.getData("traffic","getTrafficIntGeo","vue1","all")}}),c=new webix.DataCollection({id:"int_traffic_geo_sample",url:function(e){return a.a.getData("traffic","getTrafficIntGeo","vue2","all")}}),d=new webix.DataCollection({id:"traffic_split",url:function(e){return a.a.getData("traffic","getTrafficSplit","vue1")}}),l=new webix.DataCollection({id:"traffic_dest_split",url:function(e){return a.a.getData("traffic","getTrafficByDest","vue1")}}),p=new webix.DataCollection({id:"traffic_offer_split",url:function(e){return a.a.getData("traffic","getTrafficByOff","vue1")}}),f=new webix.DataCollection({id:"traffic_offer_split_exp",url:function(e){return a.a.getData("traffic","getTrafficByOff","vue2")}}),h=new webix.DataCollection({id:"traffic_operator_split",url:function(e){return a.a.getData("traffic","getTraffByOpType","vue1")}}),_=new webix.DataCollection({id:"traffic_data_parc",url:function(e){return a.a.getData("traffic","getTraffDataParc","vue1")}}),v=new webix.DataCollection({id:"traffic_data_type_trend",url:function(e){return a.a.getData("traffic","getTraffDataType","vue1")}}),b=new webix.DataCollection({id:"traffic_data_type_split",url:function(e){return a.a.getData("traffic","getTraffDataType","split")}}),m=new webix.DataCollection({id:"traffic_data_site_split",url:function(e){return a.a.getData("traffic","getTraffDataBySite","vue1")}});function y(e){switch(e){case"stat":return u;case"int_traffic":return s;case"int_traffic_sample":return c;case"traffic_type":return d;case"traffic_dest":return l;case"traffic_offer":return p;case"traffic_offer_exp":return f;case"traffic_operator":return h;case"traffic_data_bill":return traffic_data_bill_split;case"parc_data":return _;case"traffic_data":return v;case"data_type":return b;case"data_site":return m}}for(var g,$=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}([{type:"stat",data:u,func:"getStat"},{type:"vue1",data:s,func:"getTrafficIntGeo",params:"all"},{type:"vue2",data:c,func:"getTrafficIntGeo",params:"all"},{type:"vue1",data:d,func:"getTrafficSplit"},{type:"vue1",data:l,func:"getTrafficByDest"},{type:"vue1",data:p,func:"getTrafficByOff"},{type:"vue2",data:f,func:"getTrafficByOff"},{type:"vue1",data:h,func:"getTraffByOpType"},{type:"vue1",data:_,func:"getTraffDataParc"},{type:"vue1",data:v,func:"getTraffDataType"},{type:"split",data:b,func:"getTraffDataType"},{type:"vue1",data:m,func:"getTraffDataBySite"}]);!(g=$()).done;){var w=g.value;w.data._menu="traffic",w.data._func=w.func,w.data._param=w.type,w.params&&(w.data._params=w.params),w.data.attachEvent("onFilterData",o.a.onFiterClicked)}var x={stat:"getStat",nat_traffic:"getTrafficGeo",int_traffic:"getTrafficIntGeo",traffic_type:"getTrafficSplit",traffic_dest:"getTrafficByDest",traffic_offer:"getTrafficByOff",traffic_operator:"getTraffByOpType",traffic_data_bill:"getTraffDataBill",parc_data:"getTraffDataParc",data_type:"getTraffDataType"};function j(e,t,r,n){return a.a.getDrillData("traffic",x[e],t,r,n)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return k})),r.d(t,"b",(function(){return z}));var n=r(1),a=r(6),o=r(17),i=r(18);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}new o.a(n.o.api_url);var s=new webix.DataCollection({id:"bills_stats",url:function(e){return a.a.getData("bills","getStat","vue1")}}),c=new webix.DataCollection({id:"bills_bill_mk_split",url:function(e){return a.a.getData("bills","getBilling","fact","bill_mark")}}),d=new webix.DataCollection({id:"bills_off_split",url:function(e){return a.a.getData("bills","getBilling","fact","offer")}}),l=new webix.DataCollection({id:"bills_off_trend",url:function(e){return a.a.getData("bills","getBilling","fact","month_trend")}}),p=new webix.DataCollection({id:"pays_bill_mk_split",url:function(e){return a.a.getData("bills","getBilling","pay","bill_mark")}}),f=new webix.DataCollection({id:"pays_off_split",url:function(e){return a.a.getData("bills","getBilling","pay","offer")}}),h=new webix.DataCollection({id:"pays_off_trend",url:function(e){return a.a.getData("bills","getBilling","pay","month_trend")}}),_=new webix.DataCollection({id:"recouvr_off_split",url:function(e){return a.a.getData("bills","getRecouvr","split")}}),v=new webix.DataCollection({id:"recouvr_trend",url:function(e){return a.a.getData("bills","getRecouvr","trend")}}),b=new webix.DataCollection({id:"bills_by_type_split",url:function(e){return a.a.getData("bills","getSplit","bill","type")}}),m=new webix.DataCollection({id:"bills_by_status_split",url:function(e){return a.a.getData("bills","getSplit","bill","status")}}),y=new webix.DataCollection({id:"pay_by_type_split",url:function(e){return a.a.getData("bills","getSplit","pay","type")}}),g=new webix.DataCollection({id:"pay_by_status_split",url:function(e){return a.a.getData("bills","getSplit","pay","status")}}),$=new webix.DataCollection({id:"bill_by_zone",url:function(e){return a.a.getData("bills","getBillZone","vue1")}}),w=new webix.DataCollection({id:"bill_by_zone_exp",url:function(e){return a.a.getData("bills","getBillZone","vue2")}}),x=new webix.DataCollection({id:"bill_by_lib",url:function(e){return a.a.getData("bills","getBillLib","vue1")}}),j=new webix.DataCollection({id:"bill_by_lib_exp",url:function(e){return a.a.getData("bills","getBillLib","vue2")}}),O=new webix.DataCollection({id:"agent_pay",url:function(e){return a.a.getData("bills","getEncaiss","vue1")}}),S=new webix.DataCollection({id:"pay_by_method",url:function(e){return a.a.getData("bills","getEncaiss","meth")}});function k(e){switch(e){case"bills_stats":return s;case"b_bill_market":return c;case"b_offer":return d;case"b_offer_trend":return l;case"p_bill_market":return p;case"p_offer":return f;case"p_offer_trend":return h;case"recouvr_split":return _;case"recouv_trend":return v;case"bill_type_split":return b;case"bill_status_split":return m;case"pay_type_split":return y;case"pay_status_split":return g;case"bill_agg":return x;case"bill_agg_exp":return j;case"bill_loc":return $;case"bill_loc_exp":return w;case"agent_tab":return O;case"pay_meth":return S}}for(var T,A=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}([{type:"vue1",data:s,func:"getStat"},{type:"fact",data:c,func:"getBilling",params:"bill_mark"},{type:"fact",data:d,func:"getBilling",params:"offer"},{type:"fact",data:l,func:"getBilling",params:"month_trend"},{type:"pay",data:p,func:"getBilling",params:"bill_mark"},{type:"pay",data:f,func:"getBilling",params:"offer"},{type:"pay",data:h,func:"getBilling",params:"month_trend"},{type:"split",data:_,func:"getRecouvr"},{type:"trend",data:v,func:"getRecouvr"},{type:"bill",data:b,func:"getSplit",params:"type"},{type:"bill",data:m,func:"getSplit",params:"status"},{type:"pay",data:y,func:"getSplit",params:"type"},{type:"pay",data:g,func:"getSplit",params:"status"},{type:"vue1",data:x,func:"getBillLib"},{type:"vue2",data:j,func:"getBillLib"},{type:"vue1",data:$,func:"getBillZone"},{type:"vue2",data:w,func:"getBillZone"},{type:"vue1",data:O,func:"getEncaiss"},{type:"meth",data:S,func:"getEncaiss"}]);!(T=A()).done;){var C=T.value;C.data._menu="bills",C.data._func=C.func,C.data._param=C.type,C.params&&(C.data._params=C.params),C.data.attachEvent("onFilterData",i.a.onFiterClicked)}var D={stat:"getStat",billing:"getBilling"};function z(e,t,r,n){return a.a.getDrillData("bills",D[e],t,r,n)}},function(e,t,r){"use strict";r.d(t,"b",(function(){return v})),r.d(t,"a",(function(){return $}));var n=r(1),a=r(6),o=r(17),i=r(18);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}new o.e(n.o.api_url);var s=new webix.DataCollection({id:"sales_stats",url:function(e){return a.a.getData("sales","getStat","vue1")}}),c=new webix.DataCollection({id:"sales_cat_split",url:function(e){return a.a.getData("sales","getSales","split")}}),d=new webix.DataCollection({id:"sales_cat_trend",url:function(e){return a.a.getData("sales","getSales","month_trend")}}),l=new webix.DataCollection({id:"sales_cat_prod_split",url:function(e){return a.a.getData("sales","getSaleSplit","vue1")}}),p=new webix.DataCollection({id:"sales_pop_user_prod",url:function(e){return a.a.getData("sales","getSaleSplit","pop1")}}),f=new webix.DataCollection({id:"sales_tot_trend",url:function(e){return a.a.getData("sales","getSalesTrend","tot","month_trend")}}),h=new webix.DataCollection({id:"sales_user_split_trend",url:function(e){return a.a.getData("sales","getSalesTrend","users","month_trend")}}),_=new webix.DataCollection({id:"sales_pop_split_trend",url:function(e){return a.a.getData("sales","getSalesTrend","pops","month_trend")}});function v(e){switch(e){case"sales_stats":return s;case"sales_split":return c;case"saleType_trend":return d;case"sales_type_split":return l;case"sales_pop_split":return p;case"tot_trend":return f;case"salesUser_trend":return h;case"salespop_trend":return _}}for(var b,m=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}([{type:"vue1",data:s,func:"getStat"},{type:"split",data:c,func:"getSales"},{type:"month_trend",data:d,func:"getSales"},{type:"vue1",data:l,func:"getSaleSplit"},{type:"pop1",data:p,func:"getSaleSplit"},{type:"tot",data:f,func:"getSalesTrend",params:"month_trend"},{type:"users",data:h,func:"getSalesTrend",params:"month_trend"},{type:"pops",data:_,func:"getSalesTrend",params:"month_trend"}]);!(b=m()).done;){var y=b.value;y.data._menu="sales",y.data._func=y.func,y.data._param=y.type,y.params&&(y.data._params=y.params),y.data.attachEvent("onFilterData",i.a.onFiterClicked)}var g={stat:"getStat",product:"getProduct",client:"getSaleClientType",proditem:"getProductItem",sales:"getSalesTrend",split_trend:"getSales"};function $(e,t,r,n){return a.a.getDrillData("sales",g[e],t,r,n)}},function(e,t,r){"use strict";r.d(t,"b",(function(){return _})),r.d(t,"a",(function(){return g}));var n=r(1),a=r(6),o=r(18);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}new(r(17).f)(n.o.api_url);var u=new webix.DataCollection({id:"rec_stat_tot",url:function(e){return a.a.getData("recharge","getStat","mnt_tot")}}),s=new webix.DataCollection({id:"rec_stat_type",url:function(e){return a.a.getData("recharge","getStat","mnt_rec_type")}}),c=new webix.DataCollection({id:"rec_type_split",url:function(e){return a.a.getData("recharge","getRechargeType","vue1")}}),d=new webix.DataCollection({id:"rec_type_trend",url:function(e){return a.a.getData("recharge","getRechargeTrend","vue1")}}),l=new webix.DataCollection({id:"rec_by_channel_split",url:function(){return a.a.getData("recharge","getRechargeChannel","split")}}),p=new webix.DataCollection({id:"rec_voucher_value_split",url:function(e){return a.a.getData("recharge","getRechargeValueSplit","vue1")}}),f=new webix.DataCollection({id:"rec_by_prod_by_type",url:function(e){return a.a.getData("recharge","getRechargeSplit","vue1")}}),h=new webix.DataCollection({id:"rec_by_prod_by_type_exp",url:function(e){return a.a.getData("recharge","getRechargeSplit","vue2")}});function _(e){switch(e){case"type_split":return c;case"stat_tot":return u;case"stat_type":return s;case"type_trend":return d;case"rec_chan_split":return l;case"rec_value_split":return p;case"rec_hiera_split":return f;case"rec_hiera_split_exp":return h}}for(var v,b=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}([{type:"vue1",data:c,func:"getRechargeType"},{type:"mnt_tot",data:u,func:"getStat"},{type:"mnt_rec_type",data:s,func:"getStat"},{type:"vue1",data:d,func:"getRechargeTrend"},{type:"split",data:l,func:"getRechargeChannel"},{type:"vue1",data:p,func:"getRechargeValueSplit"},{type:"vue1",data:f,func:"getRechargeSplit"},{type:"vue2",data:h,func:"getRechargeSplit"}]);!(v=b()).done;){var m=v.value;m.data._menu="recharge",m.data._func=m.func,m.data._param=m.type,m.params&&(m.data._params=m.params),m.data.attachEvent("onFilterData",o.a.onFiterClicked)}var y={stat_tot:"getStat",stat_type:"getStat",type_split:"getRechargeType",type_trend:"getRechargeTrend",sc_value_split:"getRechargeScratchValuesSplit",geo_split:"getRechargeGeoSplit",ec_trend:"getECTrend",remb_trend:"getECRemb"};function g(e,t,r){return a.a.getDrillData("recharge",y[e],t,r)}},function(e,t,r){"use strict";r.d(t,"h",(function(){return c})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return l})),r.d(t,"g",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"b",(function(){return h})),r.d(t,"e",(function(){return _})),r.d(t,"a",(function(){return v}));var n=r(1),a=r(3);function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t,r){if(void 0===t&&(t=[]),void 0===r&&(r="value"),0!=t.length){var n=[].concat(t),a=function(e,t){return e.reduce((function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e}),{})}(e,n[0]);n.shift();var o=[];for(var i in a){var u=a[i],c={name:i,value:d3.sum(u,(function(e){return e[r]}))},d=s(u,n,r);0!=d.length&&(c.children=d),o.push(c)}return o}return[]}var c=function(){function e(t){e.api_url=t}return e.getStat=function(t,r){var n={data:[{}]},o=e.api_url;switch(t){case"parc":o+="getParc/001",n.data[0].kpi="parc";break;case"revenue":o+="getRevenue/0100",n.data[0].kpi="revenue";break;case"tvoix":o+="getTraffic/001",n.data[0].kpi="tvoix";break;case"tdata":o+="getTraffic/002",n.data[0].kpi="tdata";break;case"topup":o+="getRecharge/001",n.data[0].kpi="topup";break;case"bndle":o+="getRevenue/004",n.data[0].kpi="bndle";break;case"encaiss":o+="getBill/0011",n.data[0].kpi="encaiss"}var i=0,u=0;return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data&&0!=e.data.length&&(i=Number.parseFloat(e.data[0].kpi),u=Number.parseFloat(e.data[0].kpi_),n.data[0].value=i,n.data[0].var=u>0?(100*e.data[0].kpi_var/u).toFixed(2):100)}))).then((function(e){return n}))},e.getParc=function(t,r){var n={data:[]},o=e.api_url+"getParc/002",i=e.api_url+"getParc/041",u=e.api_url+"getParc/014",s=e.api_url+"getParc/022";switch(t){case"op":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data&&(e.data.sort((function(e,t){return e.kpi-t.kpi})),e.data.forEach((function(e){n.data.push({operator:e.op_name,op_qty:e.kpi,_type:"op_split"})})))}))).then((function(){return n}));case"prod":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.sort((function(e,t){return e.kpi-t.kpi})),e.data.forEach((function(e){n.data.push({off_group:e.offer_group,qty:e.kpi,_type:"off_split"})}))}))).then((function(){return n}));case"bill":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({bill_type:e.bill_type,bill_qty:e.kpi,_type:"bill_split"})}))}))).then((function(){return n}));case"month_trend":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({month:e.month,trend:e.kpi,_type:"month_trend"})}))}))).then((function(){return n}));case"dt_trend":var c=e.api_url+"getParc/015";return $.ajax({method:"GET",url:c,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({upd_dt:e.upd_dt,trend_dt:e.kpi,_type:"dt_trend",period:e.upd_dt.substr(0,7)})}))})).then((function(){return n}))}},e.getRevenue=function(t,r,o){var i={data:[]},u=e.api_url+"getRevenue/0145",s=e.api_url+"getRevenue/0121",c=e.api_url+"getRevenue/0122",d=e.api_url+"getRevenue/01222";switch(t){case"vue0":return $.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){for(var t in n.m)e[t]>0&&i.data.push({rev_type:t,revenue:Number.parseFloat(e[t]),_type:"rev_split"})}))})).then((function(){return i}));case"vue1":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){for(var t in n.m)e[t]>0&&i.data.push({rev_type:t,revenue:Number.parseFloat(e[t]),_type:"month_trend",month:e.month})}))}))).then((function(){return i}));case"vue2":return $.when($.ajax({method:"GET",url:c,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){for(var t in n.m)e[t]>0&&i.data.push({rev_type:t,revenue:Number.parseFloat(e[t]),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7)})}))}))).then((function(e){return i}));case"vue3":return $.when($.ajax({method:"GET",url:d,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){for(var r in n.m)t[r]>0&&i.data.push({rev_type:r,revenue:Number.parseFloat(t[r]),_type:"slot_trend",slot:t.slot,period:e.d1})}))}))).then((function(e){return i}))}},e.getData=function(t,r){var n={data:[]},o=e.api_url+"getTraffic/021",i=e.api_url+"getTraffic/0241";switch(t){case"bill":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.data_traff>0&&n.data.push({bill_tpe:e.bill_tpe,traffic:e.data_traff,category:"data"})}))}))).then((function(){return n}));case"month_trend":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.data_traff>0&&n.data.push({month:e.month,trend:e.data_traff,_type:"month_trend"})}))}))).then((function(){return n}));case"dt_trend":var u=e.api_url+"getTraffic/0242";return $.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.data_traff>0&&n.data.push({upd_dt:e.upd_dt,trend_dt:e.data_traff,_type:"dt_trend",period:e.upd_dt.substr(0,7)})}))})).then((function(){return n}))}},e.getRecharge=function(t,r){var n={data:[]},o=e.api_url+"getRecharge/003",i=e.api_url+"getRecharge/006";switch(t){case"split":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({rec_type:e.type_rec,qty:e.kpi_qty,amnt:e.kpi_amnt,_type:"rec_split"})}))})).then((function(){return n})));case"month_trend":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({month:e.month,trend:e.kpi_amnt,_type:"month_trend"})}))}))).then((function(){return n}));case"dt_trend":var u=e.api_url+"getRecharge/007";return $.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({upd_dt:e.upd_dt,trend_dt:e.kpi_amnt,_type:"dt_trend",period:e.upd_dt.substr(0,7)})}))})).then((function(){return n}))}},e.getBundle=function(t,r){var n={data:[]},o=e.api_url+"getRevenue/0081",i=e.api_url+"getRevenue/0141";switch(t){case"split":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi>0&&n.data.push({bndle_type:e.bndle_type,amnt:e.kpi,_type:"bndle_split"})}))}))).then((function(){return n}));case"month_trend":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.bndle>0&&n.data.push({month:e.month,trend:e.bndle,_type:"month_trend"})}))}))).then((function(){return n}));case"dt_trend":var u=e.api_url+"getRevenue/0142";return $.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.bndle>0&&n.data.push({upd_dt:e.upd_dt,trend_dt:e.bndle,_type:"dt_trend",period:e.upd_dt.substr(0,7)})}))})).then((function(){return n}))}},e.getTrafficSplitAll=function(t,r,n){var o={data:[]},i=e.api_url+"getTraffic/028",u=e.api_url+"getTraffic/029",s=e.api_url+"getTraffic/030";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){(e.voice_pyg>0||e.voice_free>0)&&o.data.push({_kpi:"voice",traffic:Number.parseFloat(e.voice_pyg)+Number.parseFloat(e.voice_free),_type:"month_trend",month:e.month}),(e.sms_pyg>0||e.sms_free>0)&&o.data.push({_kpi:"sms",traffic:Number.parseFloat(e.sms_pyg)+Number.parseFloat(e.sms_free),_type:"month_trend",month:e.month}),(e.data_pyg>0||e.data_free>0)&&o.data.push({_kpi:"data",traffic:Number.parseFloat(e.data_pyg)+Number.parseFloat(e.data_free),_type:"month_trend",month:e.month})}))}))).then((function(e){return o}));case"vue2":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){(e.voice_pyg>0||e.voice_free>0)&&o.data.push({_kpi:"voice",traffic:Number.parseFloat(e.voice_pyg)+Number.parseFloat(e.voice_free),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7)}),(e.sms_pyg>0||e.sms_free>0)&&o.data.push({_kpi:"sms",traffic:Number.parseFloat(e.sms_pyg)+Number.parseFloat(e.sms_free),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7)}),(e.data_pyg>0||e.data_free>0)&&o.data.push({_kpi:"data",traffic:Number.parseFloat(e.data_pyg)+Number.parseFloat(e.data_free),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7)})}))}))).then((function(e){return o}));case"vue3":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){(t.voice_pyg>0||t.voice_free>0)&&o.data.push({_kpi:"voice",traffic:Number.parseFloat(t.voice_pyg)+Number.parseFloat(t.voice_free),_type:"slot_trend",slot:t.slot,period:e.d1}),(t.sms_pyg>0||t.sms_free>0)&&o.data.push({_kpi:"sms",traffic:Number.parseFloat(t.sms_pyg)+Number.parseFloat(t.sms_free),_type:"slot_trend",slot:t.slot,period:e.d1}),(t.data_pyg>0||t.data_free>0)&&o.data.push({_kpi:"data",traffic:Number.parseFloat(t.data_pyg)+Number.parseFloat(t.data_free),_type:"slot_trend",slot:t.slot,period:e.d1})}))}))).then((function(e){return o}))}},e.getArpu=function(t,r){var n={data:[]},o=e.api_url+"getRevenue/0149";switch(t){case"month_trend":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.parc>0&&n.data.push({month:e.month,trend:Number.parseFloat(e.rev)/Number.parseInt(e.parc),_type:"month_trend"})}))}))).then((function(){return n}));case"dt_trend":var i=e.api_url+"getRevenue/0150";return $.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.parc>0&&n.data.push({upd_dt:e.upd_dt,trend_dt:Number.parseFloat(e.rev)/Number.parseInt(e.parc),_type:"dt_trend",period:e.upd_dt.substr(0,7)})}))})).then((function(){return n}))}},e.getPay=function(t,r){var n={data:[]},o=e.api_url+"getBill/0021",i=e.api_url+"getBill/0031";switch(t){case"month_trend":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({month:e.month,revenue:Number.parseInt(e.kpi),_type:"month_trend",_kpi:e.billing_type,clt_type:e.billing_type})}))}))).then((function(){return n}));case"dt_trend":return $.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({upd_dt:e.upd_dt,revenue:Number.parseInt(e.kpi),_type:"dt_trend",clt_type:e.billing_type,_kpi:e.billing_type,period:e.upd_dt.substr(0,7)})}))})).then((function(){return n}))}},e}(),d=function(){function e(t){e.api_url=t}return e.getStat=function(t,r){var n={data:[]},o=e.api_url+"getParc/0051",i=0,u=0;return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){i=e.data[0].prepaid_,u=e.data[0].prepaid,n.data.push({kpi:"prepaid",value:u,var:i>0?(100*(u-i)/i).toFixed(2):100}),i=e.data[0].postpaid_,u=e.data[0].postpaid,n.data.push({kpi:"postpaid",value:u,var:i>0?(100*(u-i)/i).toFixed(2):100}),i=e.data[0].pmobile_,u=e.data[0].pmobile,n.data.push({kpi:"pmobile",value:u,var:i>0?(100*(u-i)/i).toFixed(2):100}),i=e.data[0].pfixe_,u=e.data[0].pfixe,n.data.push({kpi:"pfixe",value:u,var:i>0?(100*(u-i)/i).toFixed(2):100}),i=e.data[0].plte_,u=e.data[0].plte,n.data.push({kpi:"plte",value:u,var:i>0?(100*(u-i)/i).toFixed(2):100})}))).then((function(e){return n}))},e.getParcByBill=function(t,r){var n={data:[]},o=e.api_url+"getParc/0041";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({bill_type:e.bill_type,bill_qty:e.kpi})}))}))).then((function(){return n}))}},e.getParcByType=function(t,r,n){var o={data:[]},i=e.api_url+"getParc/022",u=e.api_url+"getParc/024",s=e.api_url+"getParc/025";switch(t){case"split":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.sort((function(e,t){return e.kpi-t.kpi})),e.data.forEach((function(e){o.data.push({off_group:e.offer_group,qty:e.kpi,_type:"off_split"})}))}))).then((function(){return o}));case"month_trend":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){o.data.push({month:e.month,qty:Number.parseInt(e.kpi),off_group:e.grp,_type:"month_trend"})}))}))).then((function(){return o}));case"dt_trend":return $.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){o.data.push({upd_dt:e.upd_dt,qty:Number.parseInt(e.kpi),_type:"dt_trend",off_group:e.grp,period:e.upd_dt.substr(0,7)})}))})).then((function(){return o}))}},e.getParcByOffer=function(t,r){var n={data:[]},o=e.api_url+"getParc/023",i=e.api_url+"getParc/026",c=e.api_url+"getParc/028";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data=s(e.data,["net","bill","mark","seg","cat","off"],"kpi")}))).then((function(){return n}));case"vue2":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="_grpoff",n.data.push(e)}))}))).then((function(){return n}));case"vue3":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data=s(e.data,["grp","off"],"kpi")}))).then((function(){return n}));case"vue4":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="_grpoff",n.data.push(e)}))}))).then((function(){return n}));case"vue5":return $.when($.ajax({method:"GET",url:c,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data=Object(a.g)(e.data,["bill","mark","cat","seg","prod"],"parc",["qty"]).map((function(e){return u({},e,{open:!0})}))}))).then((function(){return n}));case"vue6":return $.when($.ajax({method:"GET",url:c,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data=e.data}))).then((function(){return n}))}},e.getParcByStatus=function(t,r){var n={data:[]},o=e.api_url+"getParc/027";switch(t){case"split":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data=s(e.data,["bill","network"],"kpi")}))).then((function(){return n}));case"exp":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push(e)}))}))).then((function(){return n}))}},e.getNetAdd=function(t,r){var n={data:[]};switch(t){case"vue1":var o=e.api_url+"getParc/007",i=e.api_url+"getParc/0071";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({upd_dt:e.upd_dt,netadd:e.netadd,_type:e.netadd<0?"minus":"plus"})}))})),$.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){for(var t in e)e[t]>0&&n.data.push({mvt:t,qty:e[t],_type:"mvt_split"})}))}))).then((function(){return n}))}},e}(),l=function(){function e(t){e.api_url=t}return e.getStat=function(t,r){u({},r,{b:"Prepaid"}),u({},r,{b:"Postpaid"});var n={data:[]},o=e.api_url+"getRevenue/0143";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data.push({kpi:"rpyg",value:e.data[0].pyg,var:0!=e.data[0].pyg_12&&null!=e.data[0].pyg&&null!=e.data[0].pyg_12?(100*(e.data[0].pyg-e.data[0].pyg_12)/e.data[0].pyg_12).toFixed(2):100}),n.data.push({kpi:"rmob",value:e.data[0].mob,var:0!=e.data[0].mob_12&&null!=e.data[0].mob&&null!=e.data[0].mob_12?(100*(e.data[0].mob-e.data[0].mob_12)/e.data[0].mob_12).toFixed(2):100}),n.data.push({kpi:"rlte",value:e.data[0].lte,var:0!=e.data[0].lte_12&&null!=e.data[0].lte&&null!=e.data[0].lte_12?(100*(e.data[0].lte-e.data[0].lte_12)/e.data[0].lte_12).toFixed(2):100}),n.data.push({kpi:"rprepaid",value:e.data[0].prep,var:0!=e.data[0].prep_12&&null!=e.data[0].prep&&null!=e.data[0].prep_12?(100*(e.data[0].prep-e.data[0].prep_12)/e.data[0].prep_12).toFixed(2):100}),n.data.push({kpi:"rpostpaid",value:e.data[0].post,var:0!=e.data[0].post_12&&null!=e.data[0].post&&null!=e.data[0].post_12?(100*(e.data[0].post-e.data[0].post_12)/e.data[0].post_12).toFixed(2):100}),n.data.push({kpi:"rtot",value:e.data[0].tot,var:0!=e.data[0].tot_12&&null!=e.data[0].tot&&null!=e.data[0].tot_12?(100*(e.data[0].tot-e.data[0].tot_12)/e.data[0].tot_12).toFixed(2):100})}))).then((function(e){return n}))},e.getRevenue=function(t,r,o){var i={data:[]},u=e.api_url+"getRevenue/0145",s=e.api_url+"getRevenue/0121",c=e.api_url+"getRevenue/0122",d=e.api_url+"getRevenue/01222";switch(t){case"split":return $.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){for(var t in n.m)e[t]>0&&i.data.push({rev_type:t,revenue:Number.parseFloat(e[t]),_type:"rev_split"})}))})).then((function(){return i}));case"month_trend":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){for(var t in n.m)e[t]>0&&i.data.push({rev_type:t,revenue:Number.parseFloat(e[t]),_type:"month_trend",month:e.month})}))}))).then((function(){return i}));case"dt_trend":return $.when($.ajax({method:"GET",url:c,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){for(var t in n.m)e[t]>0&&i.data.push({rev_type:t,revenue:Number.parseFloat(e[t]),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7)})}))}))).then((function(e){return i}));case"slot_trend":return $.when($.ajax({method:"GET",url:d,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){for(var r in n.m)t[r]>0&&i.data.push({rev_type:r,revenue:Number.parseFloat(t[r]),_type:"slot_trend",slot:t.slot,period:e.d1})}))}))).then((function(e){return i}))}},e.getRevTypeByNet=function(t,r){var n={data:[]},o=e.api_url+"getRevenue/0180";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data=s(e.data,["type","grp"],"kpi")}))).then((function(){return n}));case"vue2":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="_grpoff",n.data.push(e)}))}))).then((function(){return n}))}},e.getRevTypeByProd=function(t,r){var n={data:[]},o=e.api_url+"getRevenue/0180";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data=Object(a.g)(e.data,["type","grp"],"type",["kpi"])}))).then((function(){return n}));case"vue2":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data=e.data}))).then((function(){return n}))}},e.getRevLine=function(t,r){var n={data:[]},o=e.api_url+"getRevenue/0190",i=e.api_url+"getRevenue/0200",u=e.api_url+"getRevenue/0210";switch(t){case"split":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.sort((function(e,t){return e.kpi-t.kpi})),e.data.forEach((function(e){Number.parseInt(e.kpi)>0&&n.data.push({off_group:e.grp,revenue:e.kpi,_type:e.cat})}))}))).then((function(){return n}));case"month_trend":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){Number.parseInt(e.kpi)>0&&n.data.push({month:e.month,revenue:Number.parseInt(e.kpi),off_group:e.grp,_type:"month_trend",_kpi:e.cat})}))}))).then((function(){return n}));case"dt_trend":return $.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){Number.parseInt(e.kpi)>0&&n.data.push({upd_dt:e.upd_dt,revenue:Number.parseInt(e.kpi),_type:"dt_trend",off_group:e.grp,period:e.upd_dt.substr(0,7),_kpi:e.cat})}))})).then((function(){return n}))}},e.getRevByOpType=function(t,r){var n={data:[]};switch(t){case"vue1":var o=e.api_url+"getRevenue/0070";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.sort((function(e,t){return e.kpi-t.kpi}));var t=d3.sum(e.data,(function(e){return e.kpi}));e.data.forEach((function(e){n.data.push({operator:e.op_name,revenue:e.kpi,_type:"op_split",tot:t})}))}))).then((function(){return n}));case"vue2":var i=e.api_url+"getRevenue/0071";return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.sort((function(e,t){return e.kpi-t.kpi}));var t=d3.sum(e.data,(function(e){return e.kpi}));e.data.forEach((function(e){n.data.push({operator:e.op_name,traffic:e.kpi,_type:"op_split",tot:t})}))}))).then((function(){return n}))}},e.getRevTypeClt=function(t,r){var n={data:[]},o=e.api_url+"getRevenue/01800";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data=s(e.data,["mark","cat","bill"],"kpi")}))).then((function(){return n}));case"vue2":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push(e)}))}))).then((function(){return n}))}},e.getRevByBundleType=function(t,r){var n={data:[]},i=e.api_url+"getRevenue/008";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){var t=d3.sum(e.data,(function(e){return e.kpi})),r=[];for(var a in e.data.forEach((function(e){e.kpi>0&&(r[e.bndle_type]=void 0===r[e.bndle_type]?[{name:e.bndle_group,value:e.kpi}]:[].concat(r[e.bndle_type],[{name:e.bndle_group,value:e.kpi}]))})),r){for(var i,u={name:a,children:[],_type:"bndle_split"},s=d3.sum(r[a],(function(e){return e.value})),c=o(r[a]);!(i=c()).done;){var d=i.value;u.children.push({name:d.name,value:d.value,tot:s})}u.value=s,u.tot=t,1==u.children.length&&"Inconnu"==u.children[0].name&&delete u.children,n.data.push(u)}}))).then((function(){return n}));case"vue2":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="bndle",0!=e.kpi&&n.data.push(e)}))}))).then((function(){return n}))}},e.getRevGeo=function(t,r){var n={data:[]};switch(t){case"vue1":var o=e.api_url+"getRevenue/009";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.sms>0&&n.data.push({region:e.region,zoneorange:e.region,value:e.sms,_type:"sms_split"}),e.voice>0&&n.data.push({region:e.region,zoneorange:e.region,value:e.voice,_type:"voice_split"}),e.bndle>0&&n.data.push({region:e.region,zoneorange:e.region,value:e.bndle,_type:"bndle_split"}),e.fees>0&&n.data.push({region:e.region,zoneorange:e.region,value:e.fees,_type:"fees_split"})}))}))).then((function(){return n}));case"vue2":var i=e.api_url+"getRevenue/0090";return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n=e}))).then((function(){return n}))}},e.getRoaming=function(t,r){var n={data:[]};switch(t){case"vue1":var o=e.api_url+"getRevenue/0147";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){var t=d3.sum(e.data,(function(e){return e.revenue}));e.data.sort((function(e,t){return t.revenue-e.revenue}));var r=1;e.data.forEach((function(e){r<=10&&e.revenue>0&&n.data.push({country:e.count,revenue:e.revenue,_type:"count_split",tot:t}),r++})),n.data.sort((function(e,t){return e.revenue-t.revenue}))}))).then((function(){return n}));case"vue2":var i=e.api_url+"getRevenue/0148";return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.sort((function(e,t){return t.traffic-e.traffic}));var t=d3.sum(e.data,(function(e){return e.traffic})),r=1;e.data.forEach((function(e){r<=10&&e.traffic>0&&n.data.push({country:e.count,traffic:e.traffic,_type:"count_split",tot:t}),r++})),n.data.sort((function(e,t){return e.traffic-t.traffic}))}))).then((function(){return n}))}},e}(),p=function(){function e(t){e.api_url=t}return e.getStat=function(t,r){var n={data:[]},o=e.api_url,i=o+"getTraffic/027",u=o+"getRevenue/0143",s=0,c=0;return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){s=Number.parseFloat(e.data[0].voice_),c=Number.parseFloat(e.data[0].voice),n.data.push({kpi:"voice",value:c,var:0!=s&&null!=s?(100*(c-s)/s).toFixed(2):100}),s=Number.parseFloat(e.data[0].sms_),c=Number.parseFloat(e.data[0].sms),n.data.push({kpi:"sms",value:c,var:0!=s&&null!=s?(100*(c-s)/s).toFixed(2):100}),s=Number.parseFloat(e.data[0].data_),c=Number.parseFloat(e.data[0].data),n.data.push({kpi:"data",value:c,var:0!=s&&null!=s?(100*(c-s)/s).toFixed(2):100})})),$.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data.push({kpi:"rpyg",value:e.data[0].pyg,var:0!=e.data[0].pyg&&null!=e.data[0].pyg_12&&null!=e.data[0].pyg?(100*(e.data[0].pyg-e.data[0].pyg_12)/e.data[0].pyg_12).toFixed(2):100})}))).then((function(e){return n}))},e.getTrafficGeo=function(t,r,n){var o={data:[]};switch(t){case"vue1":var i=e.api_url+"getTraffic/006",u=e.api_url+"getTraffic/007",s=(e.api_url,e.api_url+"getTraffic/009"),c=e.api_url+"getTraffic/0090";switch(n){case"voice":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){o=e}))).then((function(){return o}));case"sms":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){o=e}))).then((function(){return o}));case"data":var d=e.api_url+"getTraffic/035";e.api_url;return $.when($.ajax({method:"GET",url:d,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){o=e}))).then((function(){return o}));case"all":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.voice>0&&o.data.push({zoneorange:e.region,value:e.voice,_type:"voice_split"}),e.data>0&&o.data.push({zoneorange:e.region,value:e.data,_type:"data_split"}),e.sms>0&&o.data.push({zoneorange:e.region,value:e.sms,_type:"sms_split"})}))}))).then((function(){return o}));case"all0":return $.when($.ajax({method:"GET",url:c,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){o=e}))).then((function(){return o}))}}},e.getTrafficIntGeo=function(t,r,n){var o={data:[]},i=e.api_url+"getTraffic/014",u=e.api_url+"getTraffic/020",s=e.api_url+"getTraffic/0140";switch(t){case"vue1":switch(n){case"voice":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.voice_traff>0&&o.data.push({code:e.code,country:e.country,value:Number.parseFloat(e.voice_traff),_type:"voice_geo_split"})}))}))).then((function(){return o}));case"sms":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.sms_traff>0&&o.data.push({code:e.code,country:e.country,value:Number.parseFloat(e.sms_traff),_type:"sms_geo_split"})}))}))).then((function(){return o}));case"all":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.sms_traff>0&&o.data.push({code:e.code,country:e.country,value:Number.parseFloat(e.sms_traff),_type:"sms_geo_split"}),e.voice_traff>0&&o.data.push({code:e.code,country:e.country,value:Number.parseFloat(e.voice_traff),_type:"voice_geo_split"})}))}))).then((function(){return o}))}break;case"vue2":switch(n){case"all":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){var t=e.data.map((function(e){return{country:e.country,value:e.sms_traff}})),r=e.data.map((function(e){return{country:e.country,value:e.voice_traff}})),n=d3.sum(t,(function(e){return e.value}));t.sort((function(e,t){return t.value-e.value}));var a=d3.sum(r,(function(e){return e.value}));r.sort((function(e,t){return t.value-e.value}));var i=1;t.forEach((function(e){""!=e.country&&"Inconnu"!=e.country&&(i<=10&&e.value>0&&o.data.push({country:e.country,value:e.value,_type:"sms_geo_split",tot:n}),i++)})),i=1,r.forEach((function(e){""!=e.country&&"Inconnu"!=e.country&&(i<=10&&e.value>0&&o.data.push({country:e.country,value:e.value,_type:"voice_geo_split",tot:a}),i++)}))}))).then((function(){return o}))}}},e.getTrafficSplit=function(t,r,n){var o={data:[]},i=e.api_url+"getTraffic/028",u=e.api_url+"getTraffic/029",s=e.api_url+"getTraffic/030";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.voice_pyg>0&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(e.voice_pyg),_type:"month_trend",month:e.month,free:"pyg"}),e.sms_pyg>0&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(e.sms_pyg),_type:"month_trend",month:e.month,free:"pyg"}),e.data_pyg>0&&o.data.push({traff_type:"data",traffic:Number.parseFloat(e.data_pyg),_type:"month_trend",month:e.month,free:"pyg"}),e.voice_free>0&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(e.voice_free),_type:"month_trend",month:e.month,free:"bundle"}),e.sms_free>0&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(e.sms_free),_type:"month_trend",month:e.month,free:"bundle"}),e.data_free>0&&o.data.push({traff_type:"data",traffic:Number.parseFloat(e.data_free),_type:"month_trend",month:e.month,free:"bundle"})}))}))).then((function(e){return o}));case"vue2":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.voice_pyg>0&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(e.voice_pyg),_type:"dt_trend",upd_dt:e.upd_dt,free:"pyg",period:e.upd_dt.substr(0,7)}),e.sms_pyg>0&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(e.sms_pyg),_type:"dt_trend",upd_dt:e.upd_dt,free:"pyg",period:e.upd_dt.substr(0,7)}),e.data_pyg>0&&o.data.push({traff_type:"data",traffic:Number.parseFloat(e.data_pyg),_type:"dt_trend",upd_dt:e.upd_dt,free:"pyg",period:e.upd_dt.substr(0,7)}),e.voice_free>0&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(e.voice_free),_type:"dt_trend",upd_dt:e.upd_dt,free:"bundle",period:e.upd_dt.substr(0,7)}),e.sms_free>0&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(e.sms_free),_type:"dt_trend",upd_dt:e.upd_dt,free:"bundle",period:e.upd_dt.substr(0,7)}),e.data_free>0&&o.data.push({traff_type:"data",traffic:Number.parseFloat(e.data_free),_type:"dt_trend",upd_dt:e.upd_dt,free:"bundle",period:e.upd_dt.substr(0,7)})}))}))).then((function(e){return o}));case"vue3":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){t.voice_pyg>0&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(t.voice_pyg),_type:"slot_trend",slot:t.slot,free:"pyg",period:e.d1}),t.sms_pyg>0&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(t.sms_pyg),_type:"slot_trend",slot:t.slot,free:"pyg",period:e.d1}),t.data_pyg>0&&o.data.push({traff_type:"data",traffic:Number.parseFloat(t.data_pyg),_type:"slot_trend",slot:t.slot,free:"pyg",period:e.d1}),t.voice_free>0&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(t.voice_free),_type:"slot_trend",slot:t.slot,free:"bundle",period:e.d1}),t.sms_free>0&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(t.sms_free),_type:"slot_trend",slot:t.slot,free:"bundle",period:e.d1}),t.data_free>0&&o.data.push({traff_type:"data",traffic:Number.parseFloat(t.data_free),_type:"slot_trend",slot:t.slot,free:"bundle",period:e.d1})}))}))).then((function(e){return o}))}},e.getTrafficSplitAll=function(t,r,n){var o={data:[]},i=e.api_url+"getTraffic/028",u=e.api_url+"getTraffic/029",s=e.api_url+"getTraffic/030";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){(e.voice_pyg>0||e.voice_free>0)&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(e.voice_pyg)+Number.parseFloat(e.voice_free),_type:"month_trend",month:e.month}),(e.sms_pyg>0||e.sms_free>0)&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(e.sms_pyg)+Number.parseFloat(e.sms_free),_type:"month_trend",month:e.month}),(e.data_pyg>0||e.data_free)&&o.data.push({traff_type:"data",traffic:Number.parseFloat(e.data_pyg)+Number.parseFloat(e.data_free),_type:"month_trend",month:e.month})}))}))).then((function(e){return o}));case"vue2":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){(e.voice_pyg>0||e.voice_free>0)&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(e.voice_pyg)+Number.parseFloat(e.voice_free),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7)}),(e.sms_pyg>0||e.sms_free>0)&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(e.sms_pyg)+Number.parseFloat(e.sms_free),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7)}),(e.data_pyg>0||e.data_free)&&o.data.push({traff_type:"data",traffic:Number.parseFloat(e.data_pyg)+Number.parseFloat(e.data_free),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7)})}))}))).then((function(e){return o}));case"vue3":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){(t.voice_pyg>0||t.voice_free>0)&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(t.voice_pyg)+Number.parseFloat(t.voice_free),_type:"slot_trend",slot:t.slot,period:e.d1}),(t.sms_pyg>0||t.sms_free>0)&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(t.sms_pyg)+Number.parseFloat(t.sms_free),_type:"slot_trend",slot:t.slot,period:e.d1}),(t.data_pyg>0||t.data_free)&&o.data.push({traff_type:"data",traffic:Number.parseFloat(t.data_pyg)+Number.parseFloat(t.data_free),_type:"slot_trend",slot:t.slot,period:e.d1})}))}))).then((function(e){return o}))}},e.getTrafficByDest=function(t,r,n){var o={data:[]},i=e.api_url+"getTraffic/031";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.voice_in>0&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(e.voice_in),_type:"dt_trend",upd_dt:e.upd_dt,traff_dir:"in",traff_cat:e.type}),e.voice_out>0&&o.data.push({traff_type:"voice",traffic:Number.parseFloat(e.voice_out),_type:"dt_trend",upd_dt:e.upd_dt,traff_dir:"out",traff_cat:e.type}),e.sms_in>0&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(e.sms_in),_type:"dt_trend",upd_dt:e.upd_dt,traff_dir:"in",traff_cat:e.type}),e.sms_out>0&&o.data.push({traff_type:"sms",traffic:Number.parseFloat(e.sms_out),_type:"dt_trend",upd_dt:e.upd_dt,traff_dir:"out",traff_cat:e.type})}))}))).then((function(e){return o}))}},e.getTrafficByOff=function(t,r,n){var o={data:[]},i=e.api_url+"getTraffic/032";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){o.data=s(e.data,["billing_type","offer_group","offer"],"voice_traff").map((function(e){return u({},e,{traff_type:"voice"})})),console.log(o.data),o.data=[].concat(o.data,s(e.data,["billing_type","offer_group","offer"],"sms_traff").map((function(e){return u({},e,{traff_type:"sms"})}))),o.data=[].concat(o.data,s(e.data,["billing_type","offer_group","offer"],"data_traff").map((function(e){return u({},e,{traff_type:"data"})})))}))).then((function(e){return console.log(o.data),o}));case"vue2":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.voice_traff>0&&o.data.push({_type:"voice",offer:e.offer,produit:e.offer_group,bill_tpe:e.billing_type,value:e.voice_traff}),e.sms_traff>0&&o.data.push({_type:"sms",offer:e.offer,produit:e.offer_group,bill_tpe:e.billing_type,value:e.sms_traff}),e.data_traff>0&&o.data.push({_type:"data",offer:e.offer,produit:e.offer_group,bill_tpe:e.billing_type,value:e.data_traff})}))}))).then((function(){return o}))}},e.getTraffByOpType=function(t,r){var n={data:[]};switch(t){case"vue1":var o=e.api_url+"getTraffic/033";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){d3.sum(e.data,(function(e){return e.kpi}));e.data.forEach((function(e){e.voice_in>0&&n.data.push({traff_type:"voice",traffic:Number.parseFloat(e.voice_in),_type:"in",operator:e.operator,traff_dir:"in",tot:Number.parseFloat(e.voice_in)+Number.parseFloat(e.voice_out)}),e.voice_out>0&&n.data.push({traff_type:"voice",traffic:Number.parseFloat(e.voice_out),_type:"out",operator:e.operator,traff_dir:"out",tot:Number.parseFloat(e.voice_in)+Number.parseFloat(e.voice_out)}),e.sms_in>0&&n.data.push({traff_type:"sms",traffic:Number.parseFloat(e.sms_in),_type:"in",operator:e.operator,traff_dir:"in",tot:Number.parseFloat(e.sms_in)+Number.parseFloat(e.sms_out)}),e.sms_out>0&&n.data.push({traff_type:"sms",traffic:Number.parseFloat(e.sms_out),_type:"out",operator:e.operator,traff_dir:"out",tot:Number.parseFloat(e.sms_in)+Number.parseFloat(e.sms_out)})}))}))).then((function(){return n}))}},e.getTraffDataBill=function(t,r){var n={data:[]};switch(t){case"vue1":var o=e.api_url+"getTraffic/021";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({bill_type:e.bill_tpe,traffic:e.data_traff,_type:"bill_split"})}))}))).then((function(){return n}))}},e.getTraffDataParc=function(t,r){var n={data:[]};switch(t){case"vue1":var o=e.api_url+"getParc/017";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({traffic:e.kpi,_type:"parc_data",upd_dt:e.upd_dt})}))}))).then((function(){return n}))}},e.getTraffDataType=function(t,r){var n={data:[]},o=e.api_url+"getTraffic/034",i=e.api_url+"getTraffic/035",u=e.api_url+"getTraffic/036";switch(t){case"split":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({traffic:e.data_traff,_type:"data_type",data_type:e.type})}))}))).then((function(){return n}));case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.data_in>0&&n.data.push({traff_type:"data",traffic:Number.parseFloat(e.data_in),_type:"dt_trend",upd_dt:e.upd_dt,traff_dir:"in",traff_cat:e.type}),e.data_out>0&&n.data.push({traff_type:"data",traffic:Number.parseFloat(e.data_out),_type:"dt_trend",upd_dt:e.upd_dt,traff_dir:"out",traff_cat:e.type})}))}))).then((function(e){return n}));case"vue2":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){t.data_in>0&&n.data.push({traff_type:"data",traffic:Number.parseFloat(t.data_in),_type:"slot_trend",slot:t.slot,traff_dir:"in",traff_cat:t.type,period:e.d1}),t.data_out>0&&n.data.push({traff_type:"data",traffic:Number.parseFloat(t.data_out),_type:"slot_trend",slot:t.slot,traff_dir:"out",traff_cat:t.type,period:e.d1})}))}))).then((function(e){return n}))}},e.getTraffDataBySite=function(t,r){var n={data:[]},o=e.api_url+"getTraffic/037";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){var t=d3.sum(e.data,(function(e){return e.traffic}));e.data.sort((function(e,t){return t.traffic-e.traffic}));var r=1;e.data.forEach((function(e){""!=e.site&&"Inconnu"!=e.site&&(r<=10&&e.traffic>0&&n.data.push({site:e.site,value:e.traffic,_type:"traff_data_site_split",tot:t}),r++)}))}))).then((function(){return n}))}},e}(),f=function(){function e(t){e.api_url=t}return e.getStat=function(t,r,n){var o={data:[]},i=e.api_url,u=i+"getRecharge/009",s=i+"getRecharge/010";switch(t){case"mnt_tot":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){var r=Number.parseFloat(e.data[0].kpi_),n=Number.parseFloat(e.data[0].kpi);o.data.push({kpi:"mnt_rec",value:n,var:0!=r&&null!=r?(100*(n-r)/r).toFixed(2):100})}))}))).then((function(){return o}));case"mnt_rec_type":var c=0,d=0;return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){c=Number.parseFloat(e.data[0].cash_),d=Number.parseFloat(e.data[0].cash),o.data.push({kpi:"cash",value:d,var:0!=c&&null!=c?(100*(d-c)/c).toFixed(2):100,_type:"cash"}),c=Number.parseFloat(e.data[0].voucher_),d=Number.parseFloat(e.data[0].voucher),o.data.push({kpi:"voucher",value:d,var:0!=c&&null!=c?(100*(d-c)/c).toFixed(2):100,_type:"voucher"}),c=Number.parseFloat(e.data[0].prepaid_),d=Number.parseFloat(e.data[0].prepaid),o.data.push({kpi:"prepaid",value:d,var:0!=c&&null!=c?(100*(d-c)/c).toFixed(2):100,_type:"prepaid"}),c=Number.parseFloat(e.data[0].postpaid_),d=Number.parseFloat(e.data[0].postpaid),o.data.push({kpi:"postpaid",value:d,var:0!=c&&null!=c?(100*(d-c)/c).toFixed(2):100,_type:"postpaid"})}))}))).then((function(){return o}))}},e.getRechargeType=function(t,r){var n={data:[]};switch(t){case"vue1":var o=e.api_url+"getRecharge/003";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_amnt>0&&n.data.push({rec_type:e.type_rec,qty:e.kpi_qty,amnt:e.kpi_amnt,_type:"rec_split"})}))}))).then((function(){return n}))}},e.getRechargeChannel=function(t,r){var n={data:[]},o=e.api_url+"getRecharge/0110";switch(t){case"split":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.sort((function(e,t){return e.kpi-t.kpi})),e.data.forEach((function(e){n.data.push({channel:e.channel,amount:e.kpi,_type:"chan_split"})}))}))).then((function(){return n}))}},e.getRechargeTrend=function(t,r,n){var o={data:[]},i=e.api_url+"getRecharge/0100",u=e.api_url+"getRecharge/0101",s=e.api_url+"getRecharge/0102";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_amnt>0&&o.data.push({amnt:Number.parseFloat(e.kpi_amnt),_type:"month_trend",month:e.month,rec_type:e.rec_type})}))}))).then((function(e){return o}));case"vue2":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_amnt>0&&o.data.push({amnt:Number.parseFloat(e.kpi_amnt),_type:"dt_trend",upd_dt:e.upd_dt,rec_type:e.rec_type,period:e.upd_dt.substr(0,7)})}))}))).then((function(e){return o}));case"vue3":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){t.kpi_amnt>0&&o.data.push({amnt:Number.parseFloat(t.kpi_amnt),_type:"slot_trend",slot:t.slot,rec_type:t.rec_type,period:e.d1})}))}))).then((function(e){return o}))}},e.getRechargeGeoSplit=function(t,r){var n={data:[]};switch(t){case"vue1":var o=e.api_url+"getRecharge/0103";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({value:e.amnt,region:e.region,zoneorange:e.region,_type:e.rec_type})}))}))).then((function(){return n}));case"vue2":var i=e.api_url+"getRecharge/01030";return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){var t=u({},e);t[e.rec_type]=e.amnt,t.Tous=Number.parseFloat(e.amnt),delete t.amnt,delete t.rec_type,n.data.push(t)}))}))).then((function(){return n}))}},e.getRechargeValueSplit=function(t,r){var n={data:[]};switch(t){case"vue1":var o=e.api_url+"getRecharge/0104";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){n.data.push({amnt:e.amount,qty:Number.parseInt(e.qty),_type:"rec_value"})}))}))).then((function(){return n}))}},e.getECTrend=function(t,r,n){var o={data:[]},i=e.api_url+"getRecharge/0105",u=e.api_url+"getRecharge/0106",s=e.api_url+"getRecharge/0107";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_qty>0&&o.data.push({value:Number.parseFloat(e.kpi_qty),_type:"month_trend",month:e.month,ec_type:e.ec_type,_kpi:"qty"}),e.kpi_loan>0&&o.data.push({value:Number.parseFloat(e.kpi_loan),_type:"month_trend",month:e.month,ec_type:e.ec_type,_kpi:"loan"}),e.kpi_fees>0&&o.data.push({value:Number.parseFloat(e.kpi_fees),_type:"month_trend",month:e.month,ec_type:e.ec_type,_kpi:"fees"})}))}))).then((function(e){return o}));case"vue2":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_qty>0&&o.data.push({value:Number.parseFloat(e.kpi_qty),_type:"dt_trend",upd_dt:e.upd_dt,ec_type:e.ec_type,_kpi:"qty",period:e.upd_dt.substr(0,7)}),e.kpi_loan>0&&o.data.push({value:Number.parseFloat(e.kpi_loan),_type:"dt_trend",upd_dt:e.upd_dt,ec_type:e.ec_type,_kpi:"loan",period:e.upd_dt.substr(0,7)}),e.kpi_fees>0&&o.data.push({value:Number.parseFloat(e.kpi_fees),_type:"dt_trend",upd_dt:e.upd_dt,ec_type:e.ec_type,_kpi:"fees",period:e.upd_dt.substr(0,7)})}))}))).then((function(e){return o}));case"vue3":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){t.kpi_qty>0&&o.data.push({value:Number.parseFloat(t.kpi_qty),_type:"slot_trend",slot:t.slot,ec_type:t.ec_type,_kpi:"qty",period:e.d1}),t.kpi_loan>0&&o.data.push({value:Number.parseFloat(t.kpi_loan),_type:"slot_trend",slot:t.slot,ec_type:t.ec_type,_kpi:"loan",period:e.d1}),t.kpi_fees>0&&o.data.push({value:Number.parseFloat(t.kpi_fees),_type:"slot_trend",slot:t.slot,ec_type:t.ec_type,_kpi:"fees",period:e.d1})}))}))).then((function(e){return o}))}},e.getECRemb=function(t,r,n){var o={data:[]},i=e.api_url+"getRecharge/0108",u=e.api_url+"getRecharge/0109";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.borrow>0&&o.data.push({value:Number.parseFloat(e.borrow),_type:"month_trend",month:e.month,_kpi:"borrow_trend"}),e.reimb>0&&o.data.push({value:Number.parseFloat(e.reimb),_type:"month_trend",month:e.month,_kpi:"reimburse_trend"}),e.fs>0&&o.data.push({value:Number.parseFloat(e.fs),_type:"month_trend",month:e.month,_kpi:"fees_trend"}),e.borrow>0&&o.data.push({value:Math.abs(100*((Number.parseFloat(e.reimb)-Number.parseFloat(e.fs))/Number.parseFloat(e.borrow)).toFixed(2)),_type:"month_trend",month:e.month,_kpi:"portion"})}))}))).then((function(e){return o}));case"vue2":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.borrow>0&&o.data.push({value:Number.parseFloat(e.borrow),_type:"dt_trend",upd_dt:e.upd_dt,_kpi:"borrow_trend",period:e.upd_dt.substr(0,7)}),e.reimb>0&&o.data.push({value:Number.parseFloat(e.reimb),_type:"dt_trend",upd_dt:e.upd_dt,_kpi:"reimburse_trend",period:e.upd_dt.substr(0,7)}),e.fs>0&&o.data.push({value:Number.parseFloat(e.fs),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7),_kpi:"fees_trend"}),e.borrow>0&&o.data.push({value:Math.abs(100*((Number.parseFloat(e.reimb)-Number.parseFloat(e.fs))/Number.parseFloat(e.borrow)).toFixed(2)),_type:"dt_trend",upd_dt:e.upd_dt,_kpi:"portion",period:e.upd_dt.substr(0,7)})}))}))).then((function(e){return o}))}},e.getRechargeSplit=function(t,r){var n={data:[]},o=e.api_url+"getRecharge/0111";switch(t){case"vue1":case"vue2":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data=e.data}))).then((function(){return n}))}},e}(),h=function(){function e(t){e.api_url=t}return e.getStat=function(t,r,n){var o={data:[]},i=e.api_url+"getMon/001",u=0,s=0;return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){u=Number.parseFloat(e.data[0].tot_),s=Number.parseFloat(e.data[0].tot),o.data.push({kpi:"tot",value:s,var:0!=u&&null!=u?(100*(s-u)/u).toFixed(2):100,_type:"tot"}),u=Number.parseFloat(e.data[0].tot_files),s=Number.parseFloat(e.data[0].tot_files_),o.data.push({kpi:"tot_files",value:s,var:0!=u&&null!=u?(100*(s-u)/u).toFixed(2):100,_type:"tot_files"}),u=Number.parseFloat(e.data[0].ocs_),s=Number.parseFloat(e.data[0].ocs),o.data.push({kpi:"ocs",value:s,var:0!=u&&null!=u?(100*(s-u)/u).toFixed(2):100,_type:"ocs"}),u=Number.parseFloat(e.data[0].msc_),s=Number.parseFloat(e.data[0].msc),o.data.push({kpi:"msc",value:s,var:0!=u&&null!=u?(100*(s-u)/u).toFixed(2):100,_type:"msc"}),u=Number.parseFloat(e.data[0].ims_),s=Number.parseFloat(e.data[0].ims),o.data.push({kpi:"ims",value:s,var:0!=u&&null!=u?(100*(s-u)/u).toFixed(2):100,_type:"ims"}),u=e.data[0].ocb_?Number.parseFloat(e.data[0].ocb_):0,s=e.data[0].ocb?Number.parseFloat(e.data[0].ocb):0,o.data.push({kpi:"ocb",value:s,var:0!=u&&null!=u?(100*(s-u)/u).toFixed(2):100,_type:"ocb"}),u=Number.parseFloat(e.data[0].pgw_),s=Number.parseFloat(e.data[0].pgw),o.data.push({kpi:"pgw",value:s,var:0!=u&&null!=u?(100*(s-u)/u).toFixed(2):100,_type:"pgw"}),u=Number.parseFloat(e.data[0].sico_),s=Number.parseFloat(e.data[0].sico),o.data.push({kpi:"sico",value:s,var:0!=u&&null!=u?(100*(s-u)/u).toFixed(2):100,_type:"sico"})}))}))).then((function(){return o}))},e.getMonTab=function(t,r,n){var o={data:[]},i=e.api_url,u=i+"getMon/002",s=i+"getMon/0021",c=0,d=0,l=0,p=0;switch(t){case"vue1":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){var t="-";c=Number.parseFloat(e.count_),d=Number.parseFloat(e.count),e.var=0!=c&&null!=c&&c?(100*(d-c)/c).toFixed(2):100,c=Number.parseFloat(e.fcount_),d=Number.parseFloat(e.fcount),e.fvar=0!=c&&null!=c&&c?(100*(d-c)/c).toFixed(2):100,l=e.count_b5,p=e.count_IN,l>=0&&p>=0&&(t=l-p),e.fdiff=t,o.data.push(e)}))}))).then((function(){return o}));case"vue2":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){c=Number.parseFloat(e.kpi_),d=Number.parseFloat(e.kpi),e.var=0!=c&&null!=c&&c?(100*(d-c)/c).toFixed(2):100,o.data.push(e)}))}))).then((function(){return o}))}},e.getMonLine=function(t,r,n){var o={data:[]},i=e.api_url,u=i+"getMon/003",s=i+"getMon/0031",c=i+"getMon/0032";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="monitor_trend",o.data.push(e)}))}))).then((function(){return o}));case"vue2":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="monitor_trend",o.data.push(e)}))}))).then((function(){return o}));case"vue3":return $.when($.ajax({method:"GET",url:c,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="monitor_trend",o.data.push(e)}))}))).then((function(){return o}))}},e}(),_=function(){function e(t){e.api_url=t}return e.getStat=function(t,r,n){var o={data:[]},i=e.api_url+"getSale/001",u=0;return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(t){u=Number.parseFloat(e.data[0].tqty),o.data.push({kpi:"qtot",value:u,var:0!=u&&null!=u&&e.data[0].var_tqty?(100*e.data[0].var_tqty/u).toFixed(2):100,_type:"tqty"}),u=Number.parseFloat(e.data[0].tamnt),o.data.push({kpi:"atot",value:u,var:0!=u&&null!=u&&e.data[0].var_tamnt?(100*e.data[0].var_tamnt/u).toFixed(2):100,_type:"tamnt"}),u=Number.parseFloat(e.data[0].div_qty),o.data.push({kpi:"qdiv",value:u,var:0!=u&&null!=u&&e.data[0].var_div_qty?(100*e.data[0].var_div_qty/u).toFixed(2):100,_type:"div_qty"}),u=Number.parseFloat(e.data[0].div_amnt),o.data.push({kpi:"adiv",value:u,var:0!=u&&null!=u&&null!=e.data[0].var_div_amnt?(100*e.data[0].var_div_amnt/u).toFixed(2):100,_type:"div_amnt"}),u=Number.parseFloat(e.data[0].gsm_qty),o.data.push({kpi:"qgsm",value:u,var:0!=u&&null!=u&&null!=e.data[0].var_gsm_qty?(100*e.data[0].var_gsm_qty/u).toFixed(2):100,_type:"gsm_qty"}),u=Number.parseFloat(e.data[0].gsm_amnt),o.data.push({kpi:"agsm",value:u,var:0!=u&&null!=u&&null!=e.data[0].var_gsm_amnt?(100*e.data[0].var_gsm_amnt/u).toFixed(2):100,_type:"gsm_amnt"})}))}))).then((function(){return o}))},e.getProduct=function(t,r,n){var o={data:[]};switch(t){case"split":var i=e.api_url+"getSale/002";return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.qty>0&&o.data.push({qty:e.qty,product:e.product,_type:"qty_split"}),e.amnt>0&&o.data.push({amnt:e.amnt,product:e.product,_type:"amnt_split"})}))}))).then((function(){return o}));case"trend":var u=e.api_url+"getSale/003",s=e.api_url+"getSale/004";switch(n){case"vue1":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_amnt>0&&o.data.push({trend:Number.parseFloat(e.kpi_amnt),_type:"month_trend",month:e.month,product:e.product})}))}))).then((function(e){return o}));case"vue2":return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_amnt>0&&o.data.push({trend:Number.parseFloat(e.kpi_amnt),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7),product:e.product})}))}))).then((function(e){return o}))}}},e.getSaleClientType=function(t,r,n){var o={data:[]},i=e.api_url+"getSale/006",u=e.api_url+"getSale/007";switch(t){case"split":var s=e.api_url+"getSale/005";return $.when($.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="clt_split",o.data.push(e)}))}))).then((function(){return o}));case"trend":switch(n){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_amnt>0&&o.data.push({trend:Number.parseFloat(e.kpi_amnt),_type:"month_trend",month:e.month,client:e.client})}))}))).then((function(e){return o}));case"vue2":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_amnt>0&&o.data.push({trend:Number.parseFloat(e.kpi_amnt),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7),client:e.client})}))}))).then((function(e){return o}))}}},e.getProductItem=function(t,r){var n={data:[]},o=e.api_url+"getSale/008";switch(t){case"vue1":var i={},u=0;return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){u=d3.sum(e.data,(function(e){return e.amnt})),e.data.forEach((function(e){i[e.product]=void 0===i[e.product]?[e]:[].concat(i[e.product],[e])}))}))).then((function(){var e=function(e){var t=i[e],r=d3.sum(t,(function(e){return e.amnt})),a=t.map((function(e){return{name:e.item,value:e.amnt,tot:r}}));n.data.push({name:e,value:r,children:a,tot:u})};for(var t in i)e(t);return n}));case"vue2":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="sales_split",0!=e.kpi&&n.data.push(e)}))}))).then((function(){return n}))}},e.getSalesTrend=function(t,r,n){var o={data:[]},i=e.api_url+"getSale/009",u=e.api_url+"getSale/010";switch(t){case"vue1":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_amnt>0&&o.data.push({trend:Number.parseFloat(e.kpi_amnt),_type:"month_trend",month:e.month})}))}))).then((function(e){return o}));case"vue2":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.kpi_amnt>0&&o.data.push({trend_dt:Number.parseFloat(e.kpi_amnt),_type:"dt_trend",upd_dt:e.upd_dt,period:e.upd_dt.substr(0,7)})}))}))).then((function(e){return o}))}},e}(),v=function(){function e(t){e.api_url=t}return e.getStat=function(t,r){var n={data:[]},o=e.api_url+"getBill/0042";return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){n.data.push({kpi:"rv",value:e.data[0].rv,var:0!=e.data[0].rv_&&null!=e.data[0].rsales&&null!=e.data[0].rv_?(100*(e.data[0].rsales-e.data[0].rv_)/e.data[0].rv_).toFixed(2):100}),n.data.push({kpi:"rv_post",value:e.data[0].rv_post,var:0!=e.data[0].rv_post_&&null!=e.data[0].rv_post&&null!=e.data[0].rv_post_?(100*(e.data[0].rv_post-e.data[0].rv_post_)/e.data[0].rv_post_).toFixed(2):100}),n.data.push({kpi:"rv_pre",value:e.data[0].rv_pre,var:0!=e.data[0].rv_pre_&&null!=e.data[0].rv_pre&&null!=e.data[0].rv_pre_?(100*(e.data[0].rv_pre-e.data[0].rv_pre_)/e.data[0].rv_pre_).toFixed(2):100}),n.data.push({kpi:"qte",value:e.data[0].qte,var:0!=e.data[0].qte_&&null!=e.data[0].qte&&null!=e.data[0].qte_?(100*(e.data[0].qte-e.data[0].qte_)/e.data[0].qte_).toFixed(2):100}),n.data.push({kpi:"fpaid",value:e.data[0].fpaid,var:0!=e.data[0].fpaid_&&null!=e.data[0].fpaid&&null!=e.data[0].fpaid_?(100*(e.data[0].fpaid-e.data[0].fpaid_)/e.data[0].fpaid_).toFixed(2):100}),n.data.push({kpi:"qpaid",value:e.data[0].qpaid,var:0!=e.data[0].qpaid_&&null!=e.data[0].qpaid&&null!=e.data[0].qpaid_?(100*(e.data[0].qpaid-e.data[0].qpaid_)/e.data[0].qpaid_).toFixed(2):100})}))).then((function(e){return n}))},e.getBilling=function(t,r,n){var o={data:[]},i=e.api_url+"getBill/0061",u=e.api_url+"getBill/0071",c=e.api_url+"getBill/0081",d=e.api_url+"getBill/0091",l=e.api_url+"getBill/0101",p=e.api_url+"getBill/0111",f=e.api_url+"getBill/0121",h=e.api_url+"getBill/0131";switch(t){case"fact":switch(n){case"bill_mark":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){o.data=s(e.data,["billing_type","market","offer_group"],"revenue")}))).then((function(){return o}));case"bill_mark_":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="_grpoff",o.data.push(e)}))}))).then((function(){return o}));case"offer":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.sort((function(e,t){return e.revenue-t.revenue})),e.data.forEach((function(e){o.data.push({off_group:e.offer_group,revenue:e.revenue,_type:"off_split"})}))}))).then((function(){return o}));case"month_trend":return $.when($.ajax({method:"GET",url:c,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){o.data.push({month:e.month,revenue:Number.parseInt(e.kpi),off_group:e.offer_group,_type:"month_trend"})}))}))).then((function(){return o}));case"dt_trend":return $.ajax({method:"GET",url:d,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){o.data.push({upd_dt:e.upd_dt,revenue:Number.parseInt(e.kpi),_type:"dt_trend",off_group:e.offer_group,period:e.month})}))})).then((function(){return o}))}break;case"pay":switch(n){case"bill_mark":return $.when($.ajax({method:"GET",url:l,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){o.data=s(e.data,["billing_type","market","offer_group"],"revenue")}))).then((function(){return o}));case"bill_mark_":return $.when($.ajax({method:"GET",url:l,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e._type="_grpoff",o.data.push(e)}))}))).then((function(){return o}));case"offer":return $.when($.ajax({method:"GET",url:p,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.sort((function(e,t){return e.revenue-t.revenue})),e.data.forEach((function(e){o.data.push({off_group:e.offer_group,revenue:e.revenue,_type:"off_split"})}))}))).then((function(){return o}));case"month_trend":return $.when($.ajax({method:"GET",url:f,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){o.data.push({month:e.month,revenue:Number.parseInt(e.kpi),off_group:e.offer_group,_type:"month_trend"})}))}))).then((function(){return o}));case"dt_trend":return $.ajax({method:"GET",url:h,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){o.data.push({upd_dt:e.upd_dt,revenue:Number.parseInt(e.kpi),_type:"dt_trend",off_group:e.offer_group,period:e.month})}))})).then((function(){return o}))}}},e.getRecouvr=function(t,r){var n={data:[]},o=e.api_url,i=o+"getBill/0152",u=o+"getBill/0162";switch(t){case"split":return $.when($.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){var t;e.data.forEach((function(e){t=100,e.rev_fact&&0!=Number.parseInt(e.rev_fact)&&(t=100*(Number.parseInt(e.rev_paid)/Number.parseInt(e.rev_fact)).toFixed(2)),n.data.push({off_group:e.off_group,recouvr:t})}))}))).then((function(e){return n}));case"trend":return $.when($.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){var t;e.data.forEach((function(e){t=100,e.rev_fact&&0!=Number.parseInt(e.rev_fact)&&(t=100*(Number.parseInt(e.rev_paid)/Number.parseInt(e.rev_fact)).toFixed(2)),n.data.push({name:e.month,value:Number.parseInt(e.rev_fact),_kpi:"bill_trend",_type:"month_trend"}),n.data.push({name:e.month,value:Number.parseInt(e.rev_paid),_kpi:"paid_trend",_type:"month_trend"}),n.data.push({name:e.month,value:t,_kpi:"recouvr_trend",_type:"month_trend"})}))}))).then((function(e){return n}))}},e.getSplit=function(t,r,n){var o={data:[]},i=e.api_url+"getBill/018",u=e.api_url+"getBill/019",s=e.api_url+"getBill/020",c=e.api_url+"getBill/0201";switch(t){case"bill":switch(n){case"type":return $.ajax({method:"GET",url:i,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.amount>0&&o.data.push({name:e.type,kpi:e.amount,_type:"bill_type"})}))})).then((function(){return o}));case"status":return $.ajax({method:"GET",url:u,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.amount>0&&o.data.push({name:e.etat,kpi:e.amount,_type:"bill_status"})}))})).then((function(){return o}))}break;case"pay":switch(n){case"type":return $.ajax({method:"GET",url:s,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.amount>0&&o.data.push({name:e.type,kpi:e.amount,_type:"pay_type"})}))})).then((function(){return o}));case"status":return $.ajax({method:"GET",url:c,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.amount>0&&o.data.push({name:e.etat,kpi:e.amount,_type:"pay_status"})}))})).then((function(){return o}))}}},e.getBillZone=function(t,r){var n=e.api_url+"getBill/022",o={data:[]};switch(t){case"vue1":return $.when($.ajax({method:"GET",url:n,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){o.data=s(e.data,["region","commune","quartier"],"amount")}))).then((function(){return o}));case"vue2":return $.when($.ajax({method:"GET",url:n,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){o.data.push(e)}))}))).then((function(){return o}))}},e.getBillLib=function(t,r){var n=e.api_url+"getBill/023",o={data:[]};switch(t){case"vue1":return $.when($.ajax({method:"GET",url:n,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){o.data=s(e.data,["aggregat","libele"],"amount")}))).then((function(){return o}));case"vue2":return $.when($.ajax({method:"GET",url:n,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){o.data.push(e)}))}))).then((function(){return o}))}},e.getEncaiss=function(t,r){var n=e.api_url+"getBill/024",o=e.api_url+"getBill/025",i={data:[]};switch(t){case"vue1":return $.when($.ajax({method:"GET",url:n,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.qty>0&&i.data.push(e)}))}))).then((function(){return i}));case"meth":return $.when($.ajax({method:"GET",url:o,data:r,dataType:"json",headers:{Authorization:"Bearer "+Object(a.f)()}}).done((function(e){e.data.forEach((function(e){e.amount>0&&i.data.push(e)}))}))).then((function(){return i}))}},e}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(4),a=r(1),o=r(6),i=function(){function e(){}return e.callEvent=function(t,r,a,o){switch(t){case"filter":var i=webix.storage.session.get("filter");void 0!==o&&""!=o?"datef"==a?(i.d1=webix.Date.dateToStr("%Y-%m-%d")(o.start),i.d2=null!=o.end?webix.Date.dateToStr("%Y-%m-%d")(o.end):webix.Date.dateToStr("%Y-%m-%d")(o.start)):i[a]=o:delete i[a],webix.storage.session.put("filter",i);break;case"filterButton":"click"==r&&(Object(n.e)(),e.loadData())}},e.loadData=function(){var e=$$("top:menu").getSelectedItem().id,t=[],r=[];a.c[e].forEach((function(n){t.some((function(e){return e==n.data}))||(void 0!==$$(n.data)&&$$(n.data).callEvent("onFilterData",[e,$$(n.data)._func,$$(n.data)._param,$$(n.data)._params?$$(n.data)._params:""]),r.push($$(n.data).waitData),t.push(n.data))})),Object(n.g)(e),webix.promise.all(r).then((function(){for(var r in a.c){if(r!=e)a.c[r].forEach((function(e){void 0!==$$(e.data)&&(t.some((function(t){return t==e.data}))||($$(e.data).callEvent("onFilterData",[$$(e.data)._menu,$$(e.data)._func,$$(e.data)._param,$$(e.data)._params?$$(e.data)._params:""]),t.push(e.data)))}))}}))},e.onFiterClicked=function(e,t,r,n){var a=this.$eventSource||this;a.clearAll(),a.parse(o.a.getData(e,t,r,n))},e}()},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(14),i=r(0);var u=function(e){var t,r;function n(t,r,n,a){var o;return(o=e.call(this,t,r)||this)._kpi=a,o._type=n,o}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi,t=this._type;return a.a.then((function(r){var n=[{type:"pie",radius:"type"==e?["40%","50%"]:[0,"50%"],datasetIndex:0,gridIndex:0,encode:{value:"kpi",itemName:"name"},_type:t+"_"+e,label:{show:!1},tooltip:{trigger:"item",show:!0,formatter:function(e){if(e.value)return e.name+" : "+Object(i.b)(e.value.kpi)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!0,minAngle:10,itemStyle:{color:function(n){return r[t][e][n.name]}}}];return"type"==e&&(n[0].emphasis={itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},label:{show:!0,fontSize:"15",fontWeight:"bold"}},n[0].label={show:!1,position:"center"},n[0].labelLine={show:!1}),{view:"echarts-grid-dataset",id:"bill:vue1:"+e+":"+t,options:{tooltip:{trigger:"item",show:!0,position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{top:10,textStyle:{fontSize:10},type:"scroll"},title:[{top:"30",text:a.d.bill[t+"_"+e+"_split"]?a.d.bill[t+"_"+e+"_split"]:"",left:"50%",textAlign:"center",textStyle:{fontSize:12}}],dataset:[{dimensions:["name","kpi"]}],series:n}}}))},u.init=function(e){var t=this._kpi,r=this._type;e.showProgress(),e.disable(),a.c.bills.push({cmp:"bill:vue1:"+t+":"+r,data:Object(o.a)(r+"_"+t+"_split").config.id}),Object(o.a)(r+"_"+t+"_split").waitData.then((function(n){e._isDataLoaded=1,e.parse(Object(o.a)(r+"_"+t+"_split")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("bill:vue1:"+t+":"+r)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t);var n=r(0);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}webix.protoUI({name:"stats-card",defaults:{content:{header:"",shortheader:"",wseuil:210,meta:"",description:"",kpi_class:"ui blue huge header",kpi_val:"",kpi_variation:"small caret up icon",kpi_variation_val:""}},$init:function(){this._ready_awaits=1,this._is_init=0,webix.extend(this,webix.ProgressBar),this.data.provideApi(this,!0);var e=this;webix.event(window,"resize",(function(){2==e._ready_awaits&&null!=e.data&&webix.delay(webix.bind(e.render,e))})),this.attachEvent("onAfterLoad",(function(){2==this._ready_awaits?(webix.delay(webix.bind(this.render,this)),this.config.ready&&(this.config.ready.call(this,this.data),this._ready_awaits=3)):this._ready_awaits=1})),this.data.attachEvent("onStoreUpdated",(function(){2==e._ready_awaits&&webix.delay(webix.bind(e.render,e))})),webix.delay(webix.bind(this.launch_init,this))},launch_init:function(){1==this._ready_awaits&&webix.delay(webix.bind(this._render_once,this))},_render_once:function(){var e=a({},this.defaults);e=$.extend(!0,e,this.config);var t=d3.select(this.$view).append("div"),r=this.$width;t.attr("class","ui link fluid card"),t.style("height","100%"),this.rootelmt=t;var n=t.append("div");n.classed("content",!0);var o=n.append("div");o.classed("right floated",!0),o.append("i").classed(e.content.kpi_variation,!0),o.append("span").attr("class","ui description").html("..."),n.append("div").attr("class","header lab").html(r<e.content.seuil?e.content.shortheader:e.content.header),n.append("div").attr("class","ui tiny meta desc").html(r<e.content.wdseuil?e.content.shortdesc:e.content.meta),n.append("p").attr("class","ui blue header").html("..."),this._ready_awaits=2,webix.delay(webix.bind(this.render,this))},render:function(){var e=this.rootelmt,t=this.config,r=(r=[].concat(this.data.getRange())).filter((function(e){return e.kpi==t._type})),a=this.$width;t=this.config;e.select("div div").select(".lab").html(a<this.config.content.seuil?this.config.content.shortheader:this.config.content.header),e.select("div div").select(".desc").html(a<t.content.wdseuil?t.content.shortdesc:t.content.meta),e.selectAll("div div i").data(r).attr("class",(function(e){return e.var<0?"red small caret down icon":"green small caret up icon"})),e.selectAll("div div span").data(r).attr("class",(function(e){return e.var<0?"ui red small header":"ui green small header"})).html((function(e,t){return Math.abs(e.var)+"%"})),e.selectAll("div p").data(r).html((function(e,t){return e.kpi.indexOf("data")<0?Object(n.h)(e.value):Object(n.a)(e.value)}))},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)},$getSize:function(e,t){return webix.ui.view.prototype.$getSize.call(this,e,t)}},webix.DataLoader,webix.EventSystem,webix.ui.view)},function(e,t,r){"use strict";r.r(t);var n=r(0);webix.protoUI({name:"mob-stats-card",defaults:{content:{header:"",shortheader:"",wseuil:210,meta:"",description:"",kpi_class:"ui blue huge header",kpi_val:"",kpi_variation:"ui tiny caret up icon",kpi_variation_val:""}},$init:function(){this._ready_awaits=1,this._is_init=0,webix.extend(this,webix.ProgressBar),this.data.provideApi(this,!0);var e=this;webix.event(window,"resize",(function(){2==e._ready_awaits&&null!=e.data&&webix.delay(webix.bind(e.render,e))})),this.attachEvent("onAfterLoad",(function(){2==this._ready_awaits?(webix.delay(webix.bind(this.render,this)),this.config.ready&&(this.config.ready.call(this,this.data),this._ready_awaits=3)):this._ready_awaits=1})),this.data.attachEvent("onStoreUpdated",(function(){2==e._ready_awaits&&webix.delay(webix.bind(e.render,e))})),webix.delay(webix.bind(this.launch_init,this))},launch_init:function(){1==this._ready_awaits&&webix.delay(webix.bind(this._render_once,this))},_render_once:function(){var e=$.extend(!0,this.defaults,this.config),t=d3.select(this.$view).append("div"),r=this.$width;t.attr("class","ui link fluid card"),t.style("height","100%"),this.rootelmt=t;var n=t.append("div");n.classed("content",!0);var a=n.append("div");a.classed("right floated",!0),a.append("i").classed(e.content.kpi_variation,!0),a.append("span").attr("class","ui description").html("...");var o=r<e.content.seuil?e.content.shortheader:e.content.header,i=r<e.content.wdseuil?e.content.shortdesc:e.content.meta;e.content.moblab?n.append("div").attr("class","tiny header lab").html(e.content.moblab):n.append("div").attr("class","tiny header lab").html(o),e.content.mobdesc?n.append("div").attr("class","ui tiny meta desc").html(e.content.mobdesc):n.append("div").attr("class","ui tiny meta desc").html(i),n.append("p").attr("class","ui blue tiny header").html("..."),this._ready_awaits=2,webix.delay(webix.bind(this.render,this))},render:function(){var e=this.rootelmt,t=this.config,r=(r=[].concat(this.data.getRange())).filter((function(e){return e.kpi==t._type})),a=this.$width;t=this.config;this.config.content.moblab?e.select("div div").select(".lab").html(this.config.content.moblab):e.select("div div").select(".lab").html(a<this.config.content.seuil?this.config.content.shortheader:this.config.content.header),this.config.content.mobdesc?e.select("div div").select(".desc").html(this.config.content.mobdesc):e.select("div div").select(".desc").html(a<t.content.wdseuil?t.content.shortdesc:t.content.meta),e.selectAll("div div i").data(r).attr("class",(function(e){return e.var<0?"ui red tiny caret down icon":"ui green tiny caret up icon"})),e.selectAll("div div span").data(r).attr("class",(function(e){return e.var<0?"ui red tiny header":"ui green tiny header"})).html((function(e,t){return(Math.abs(e.var)>100?Math.abs(e.var).toFixed(0):Math.abs(e.var).toFixed(1))+"%"})),e.selectAll("div p").data(r).html((function(e,t){return e.kpi.indexOf("data")<0?Object(n.h)(e.value):Object(n.a)(e.value)}))},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)},$getSize:function(e,t){return webix.ui.view.prototype.$getSize.call(this,e,t)}},webix.DataLoader,webix.EventSystem,webix.ui.view)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"parc:vue1:offers:prod",options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:e[1]+5};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},animation:!0,title:[{text:a.d.parc.by_prod?a.d.parc.by_prod:"",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],grid:[{left:5,bottom:10,top:20,right:"20%",containLabel:!0}],xAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"category",axisLabel:{interval:0,textStyle:{fontSize:10}},splitLine:{show:!1},axisTick:{show:!0}}],dataset:[{dimensions:["off_group","qty"]}],series:[{type:"bar",_type:"off_split",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:30,barMinHeight:10,encode:{x:"qty",y:"off_group"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.qty)}},itemStyle:{color:function(t){return e.parcOff[t.value.off_group]}},label:{normal:{position:"right",show:!0},formatter:function(e){return Object(i.h)(e.value)}}}]}}}))},u.init=function(e){var t="prod";$$("parc:vue1:offers:"+t).showProgress(),$$("parc:vue1:offers:"+t).disable(),a.c.parc.push({cmp:"parc:vue1:offers:"+t,data:Object(o.b)("parc_offer_prod").config.id}),Object(o.b)("parc_offer_prod").waitData.then((function(e){$$("parc:vue1:offers:"+t)._isDataLoaded=1,$$("parc:vue1:offers:"+t).parse(Object(o.b)("parc_offer_prod")),$$("parc:vue1:offers:"+t).enable(),$$("parc:vue1:offers:"+t).hideProgress()})),$$("parc:vue1:offers:"+t).data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:offers:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){var e="prod";return webix.promise.all([a.a,a.e]).then((function(t){var r=t[0],a=t[1];return{view:"echarts-grid-dataset",id:"parc:vue1:off:trend:"+e,animation:!0,beforedisplay:function(t,a,o){var u=this,s=[],c=[],d=[];if(t.sort(),0!=t.length){var l=t.map((function(e){return e.off_group})).filter((function(e,t,r){return r.indexOf(e)==t})),p="month_trend"==t[0]._type?t.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):t.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));p.sort(),o.off("click"),l.forEach((function(a){t.some((function(e){return"month_trend"==e._type}))&&(c.push({dimensions:["month","qty"],source:t.filter((function(e){return e.off_group==a&&"month_trend"==e._type})),isAdded:!0}),s.push({type:"bar",itemStyle:{color:r.parcOff[a]},stack:"split",id:e+":parc_off_split_trend:"+a,datasetIndex:c.length,barMinHeight:10,barMaxWidth:40,_isStack:!0,name:a,encode:{x:"month",y:"qty"},gridIndex:1})),t.some((function(e){return"dt_trend"==e._type}))&&(c.push({dimensions:["upd_dt","qty"],source:t.filter((function(e){return e.off_group==a&&"dt_trend"==e._type})),isAdded:!0}),s.push({type:"line",smooth:!0,lineStyle:{color:r.parcOff[a]},itemStyle:{color:r.parcOff[a]},_isStack:!0,name:a,encode:{x:"upd_dt",y:"qty"},datasetIndex:c.length,gridIndex:1})),o.on("click",{seriesId:e+":parc_off_split_trend:"+a,seriesType:"bar"},(function(t){var r="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!r){var a=u;u.executeDoubleClick=setTimeout((function(){a._clicked=!1}),500),u._clicked&&(r=!0,a._clicked=!1,clearTimeout(u.executeDoubleClick))}r?n.filterHandler(t,e):u._clicked=!0})),d.push(r.parcOff[a])})),a.series=a.series.filter((function(e){return void 0===e._isStack})),a.dataset=a.dataset.filter((function(e){return void 0===e.isAdded})),0!=c.length&&(a.dataset=[].concat(a.dataset,c)),0!=d.length&&(a.color=[].concat(d)),0!=s.length&&(a.series=[].concat(s,a.series)),a.legend.selectedMode="multiple",a.xAxis[0].data=[].concat(p)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=s(e);!(t=n()).done;){var o=t.value;r+=o.marker+(a.revenue[o.seriesName]?a.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.qty)+"<br/>"}return r},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return a.revenue[e]?a.revenue[e]:e}},dataset:[{dimensions:["off_group","qty"]}],grid:[{left:5,right:5,bottom:35,containLabel:!0}],title:{text:"Evolution",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}},xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){var t="prod";$$("parc:vue1:off:trend:"+t).showProgress(),$$("parc:vue1:off:trend:"+t).disable(),$$("parc:vue1:off:trend:"+t)._filter_level="a",$$("parc:vue1:off:trend:"+t)._months=[],$$("parc:vue1:off:trend:"+t)._days=[],$$("parc:vue1:off:trend:"+t)._current_month=Object(u.a)().d1.substr(0,7),$$("parc:vue1:off:trend:"+t)._current_upd_dt=Object(u.a)().d1,a.c.parc.push({cmp:"parc:vue1:off:trend:"+t,data:Object(o.b)("parc_offer_prod_trend").config.id}),Object(o.b)("parc_offer_prod_trend").waitData.then((function(e){$$("parc:vue1:off:trend:"+t)._isDataLoaded=1,$$("parc:vue1:off:trend:"+t).parse(Object(o.b)("parc_offer_prod_trend")),$$("parc:vue1:off:trend:"+t).enable(),$$("parc:vue1:off:trend:"+t).hideProgress()})),$$("parc:vue1:off:trend:"+t).data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:off:trend:"+t)})),Object(o.b)("parc_offer_prod_trend").attachEvent("onBeforeLoad",(function(){"parc"==$$("top:menu").getSelectedId()&&($$("parc:vue1:off:trend:"+t)._filter_level="a",$$("parc:vue1:off:trend:"+t)._months=[],$$("parc:vue1:off:trend:"+t)._current_month=Object(u.a)().d1.substr(0,7),$$("parc:vue1:off:trend:"+t)._current_upd_dt=Object(u.a)().d1)})),$("button.ui.button.parcByType_prod_"+periodSplit[1]).on("click",(function(){"m"!=$$("parc:vue1:off:trend:"+t)._filter_level&&n.filterHandler({data:{month:$$("parc:vue1:off:trend:"+t)._current_month}},t)})),$("button.ui.button.parcByType_prod_"+periodSplit[0]).on("click",(function(){"m"==$$("parc:vue1:off:trend:"+t)._filter_level&&($$("parc:vue1:off:trend:"+t)._filter_level="a",$$("parc:vue1:off:trend:"+t).data.filter((function(e){return"month_trend"==e._type})))})),$$("parcByType_"+t).disable()},c.ready=function(e){$$("parcByType_prod").enable(),e.attachEvent("onAfterRender",(function(){"parc"==$$("top:menu").getSelectedId()&&(console.log("READY"),$$("parcByType_prod").enable(),e.adjust(),$$("home:dash").adjust())}))},n.filterHandler=function(e,t){if(e.data){var r="fai"==t?"vue1":"vue2";if($("button.ui.button.parcByType_"+t+"_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("parc:vue1:off:trend:"+t)._months||($$("parc:vue1:off:trend:"+t)._months=[]),$$("parc:vue1:off:trend:"+t)._months.some((function(t){return t==e.data.month})))$$("parc:vue1:off:trend:"+t)._filter_level="m",$$("parc:vue1:off:trend:"+t)._current_month=e.data.month,$$("parc:vue1:off:trend:"+t).data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var n=Object(o.a)("type","dt_trend",e.data.month+"-01",r);$$("parc:vue1:off:trend:"+t).showProgress(),$$("parc:vue1:off:trend:"+t).disable(),n.then((function(r){$$("parc:vue1:off:trend:"+t)._months.push(e.data.month),$$("parc:vue1:off:trend:"+t)._filter_level="m",$$("parc:vue1:off:trend:"+t).parse(n).then((function(){$$("parc:vue1:off:trend:"+t).data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("parc:vue1:off:trend:"+t)._current_month=e.data.month,$$("parc:vue1:off:trend:"+t).enable(),$$("parc:vue1:off:trend:"+t).hideProgress()}))}}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0];e[1];return{view:"echarts-grid-dataset",id:"rev:vue1:line:split:prod",maxHeight:145,animation:!0,beforedisplay:function(e,r){var n=[],a=[];e.filter((function(e){return!0})).forEach((function(e){e.off_group&&n.push({type:"bar",stack:"split",data:[e.revenue],barMinHeight:10,barMaxWidth:40,name:e.off_group,_isStack:!0,itemStyle:{color:t.parcOff[e.off_group]}}),a.push(t.parcOff[e.off_group])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),0!=n.length&&(r.series=[].concat(n,r.series)),0!=a.length&&(r.color=[].concat(a))},options:{legend:{show:!0,bottom:5,type:"scroll",textStyle:{fontSize:10}},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.seriesName+"<br/>"+e.marker+Object(i.b)(e.value)},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},grid:[{height:"80%",top:10,right:"5",left:"5",containLabel:!0}],xAxis:[{type:"value",_type:"bill",isDim:!1,splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"category",_type:"bill",isDim:!1,axisLabel:{interval:0,show:!1},axisLine:{show:!1},splitLine:{show:!1}}],series:[]}}}))},u.init=function(e){var t="prod";$$("rev:vue1:line:split:"+t).showProgress(),$$("rev:vue1:line:split:"+t).disable(),a.c.revenue.push({cmp:"rev:vue1:line:split:"+t,data:Object(o.b)("rev_line_split").config.id}),Object(o.b)("rev_line_split").waitData.then((function(e){$$("rev:vue1:line:split:"+t)._isDataLoaded=1,$$("rev:vue1:line:split:"+t).parse(Object(o.b)("rev_line_split")),$$("rev:vue1:line:split:"+t).enable(),$$("rev:vue1:line:split:"+t).hideProgress()})),$$("rev:vue1:line:split:"+t).data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:line:split:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){var e="prod";return webix.promise.all([a.a,a.e]).then((function(t){var r=t[0],o=t[1];return{view:"echarts-grid-dataset",id:"rev:vue1:off:trend:"+e,animation:!0,beforedisplay:function(t,a,o){var u=this,s=[],c=[],d=[];if(t.sort(),0!=t.length){var l=t.filter((function(e){return!0})).map((function(e){return e.off_group})).filter((function(e,t,r){return r.indexOf(e)==t})),p="month_trend"==t[0]._type?t.filter((function(e){return!0})).map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):t.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));p.sort(),o.off("click"),l.forEach((function(a){t.some((function(e){return"month_trend"==e._type}))&&(c.push({dimensions:["month","revenue"],source:t.filter((function(e){return e.off_group==a&&"month_trend"==e._type})),isAdded:!0}),s.push({type:"bar",itemStyle:{color:r.parcOff[a]},stack:"split",id:e+":rev_off_split_trend:"+a,datasetIndex:c.length,barMinHeight:10,barMaxWidth:40,_isStack:!0,name:a,encode:{x:"month",y:"revenue"},gridIndex:1})),t.some((function(e){return"dt_trend"==e._type}))&&(c.push({dimensions:["upd_dt","revenue"],source:t.filter((function(e){return e.off_group==a&&"dt_trend"==e._type})),isAdded:!0}),s.push({type:"line",smooth:!0,lineStyle:{color:r.parcOff[a]},itemStyle:{color:r.parcOff[a]},_isStack:!0,name:a,encode:{x:"upd_dt",y:"revenue"},datasetIndex:c.length,gridIndex:1})),o.on("click",{seriesId:e+":rev_off_split_trend:"+a,seriesType:"bar"},(function(t){var r="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!r){var a=u;u.executeDoubleClick=setTimeout((function(){a._clicked=!1}),500),u._clicked&&(r=!0,a._clicked=!1,clearTimeout(u.executeDoubleClick))}r?n.filterHandler(t,e):u._clicked=!0})),d.push(r.parcOff[a])})),a.series=a.series.filter((function(e){return void 0===e._isStack})),a.dataset=a.dataset.filter((function(e){return void 0===e.isAdded})),0!=c.length&&(a.dataset=[].concat(a.dataset,c)),0!=d.length&&(a.color=[].concat(d)),0!=s.length&&(a.series=[].concat(s,a.series)),a.legend.selectedMode="multiple",a.xAxis[0].data=[].concat(p)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=s(e);!(t=n()).done;){var a=t.value;r+=a.marker+(o.revenue[a.seriesName]?o.revenue[a.seriesName]:a.seriesName)+" : "+Object(i.b)(a.value.revenue)+"<br/>"}return r},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return o.revenue[e]?o.revenue[e]:e}},dataset:[{dimensions:["off_group","revenue"]}],grid:[{left:5,top:20,right:5,bottom:40,containLabel:!0}],title:{text:a.d.revenue.by_prod_trend?a.d.revenue.by_prod_trend:"",right:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}},xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){var t="prod";$$("rev:vue1:off:trend:"+t).showProgress(),$$("rev:vue1:off:trend:"+t).disable(),$$("rev:vue1:off:trend:"+t)._filter_level="a",$$("rev:vue1:off:trend:"+t)._months=[],$$("rev:vue1:off:trend:"+t)._days=[],$$("rev:vue1:off:trend:"+t)._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:off:trend:"+t)._current_upd_dt=Object(u.a)().d1,a.c.revenue.push({cmp:"rev:vue1:off:trend:"+t,data:Object(o.b)("rev_off_trend").config.id}),Object(o.b)("rev_off_trend").waitData.then((function(e){$$("rev:vue1:off:trend:"+t)._isDataLoaded=1,$$("rev:vue1:off:trend:"+t).parse(Object(o.b)("rev_off_trend")),$$("rev:vue1:off:trend:"+t).enable(),$$("rev:vue1:off:trend:"+t).hideProgress()})),$$("rev:vue1:off:trend:"+t).data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:off:trend:"+t)})),Object(o.b)("rev_off_trend").attachEvent("onBeforeLoad",(function(){"revenue"==$$("top:menu").getSelectedId()&&($$("rev:vue1:off:trend:"+t)._filter_level="a",$$("rev:vue1:off:trend:"+t)._months=[],$$("rev:vue1:off:trend:"+t)._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:off:trend:"+t)._current_upd_dt=Object(u.a)().d1)})),$("button.ui.button.revByLine_"+periodSplit[1]).on("click",(function(){"m"!=$$("rev:vue1:off:trend:"+t)._filter_level&&n.filterHandler({data:{month:$$("rev:vue1:off:trend:"+t)._current_month}},t)})),$("button.ui.button.revByLine_"+periodSplit[0]).on("click",(function(){"m"==$$("rev:vue1:off:trend:"+t)._filter_level&&($$("rev:vue1:off:trend:"+t)._filter_level="a",$$("rev:vue1:off:trend:"+t).data.filter((function(e){return"month_trend"==e._type})))})),$$("revByLine").disable()},c.ready=function(e){$$("revByLine").enable(),e.attachEvent("onAfterRender",(function(){"revenue"==$$("top:menu").getSelectedId()&&($$("revByLine").enable(),e.adjust(),$$("home:dash").adjust())}))},n.filterHandler=function(e,t){if(e.data)if($("button.ui.button.revByLine_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:off:trend:"+t)._months||($$("rev:vue1:off:trend:"+t)._months=[]),$$("rev:vue1:off:trend:"+t)._months.some((function(t){return t==e.data.month})))$$("rev:vue1:off:trend:"+t)._filter_level="m",$$("rev:vue1:off:trend:"+t)._current_month=e.data.month,$$("rev:vue1:off:trend:"+t).data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var r=Object(o.a)("line","dt_trend",e.data.month+"-01","vue2");$$("rev:vue1:off:trend:"+t).showProgress(),$$("rev:vue1:off:trend:"+t).disable(),r.then((function(n){$$("rev:vue1:off:trend:"+t)._months.push(e.data.month),$$("rev:vue1:off:trend:"+t)._filter_level="m",$$("rev:vue1:off:trend:"+t).parse(r).then((function(){$$("rev:vue1:off:trend:"+t).data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("rev:vue1:off:trend:"+t)._current_month=e.data.month,$$("rev:vue1:off:trend:"+t).enable(),$$("rev:vue1:off:trend:"+t).hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(27),r(1)),o=r(7),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"rev:vue1:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[],d=e.map((function(e){return e.rev_type})).filter((function(e,t,r){return r.indexOf(e)==t}));if(0!=e.length){var l=[];"month_trend"==e[0]._type&&(e.sort((function(e,t){return t.month<e.month?1:-1})),l=e.map((function(e){return e.month})).filter((function(e){return void 0!==e}))),"dt_trend"==e[0]._type&&(e.sort((function(e,t){return t.upd_dt<e.upd_dt?1:-1})),l=e.map((function(e){return e.upd_dt})).filter((function(e){return void 0!==e}))),"slot_trend"==e[0]._type&&(e.sort((function(e,t){return t.slot<e.slot?1:-1})),l=e.map((function(e){return e.slot})).filter((function(e){return void 0!==e}))),l=l.filter((function(e,t,r){return r.indexOf(e)==t})),a.off("click"),d.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","revenue"],source:e.filter((function(e){return e.rev_type==r&&"month_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.revenue[r]},stack:"split",id:"rev_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,_isStack:!0,name:r,encode:{x:"month",y:"revenue"},gridIndex:1})),e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","revenue"],source:e.filter((function(e){return e.rev_type==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.revenue[r]},itemStyle:{color:t.revenue[r]},_isStack:!0,name:r,enable:{x:"upd_dt",y:"revenue"},datasetIndex:s.length,gridIndex:1})),e.some((function(e){return"slot_trend"==e._type}))&&(s.push({dimensions:["slot","revenue"],source:e.filter((function(e){return e.rev_type==r&&"slot_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.revenue[r]},_isStack:!0,name:r,enable:{x:"slot",y:"revenue"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"rev_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.rechargeEC[r])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=l.length&&(r.xAxis[0].data=l),0!=c.length&&(r.color=[].concat(c)),0!=u.length&&(r.series=[].concat(u,r.series)),e.some((function(e){return"slot_trend"==e._type}))?r.legend.selectedMode="single":r.legend.selectedMode="multiple",e.some((function(e){return"dt_trend"==e._type}))&&a.on("click",{seriesType:"line"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeSDoubleClick=setTimeout((function(){r._sclicked=!1}),500),o._sclicked&&(t=!0,r._sclicked=!1,clearTimeout(o.executeSDoubleClick))}t?n.filterSlotHandler(e):o._sclicked=!0}))}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+r.revenue[o.seriesName]+" : "+Object(i.b)(o.value.revenue)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},dataset:[{dimensions:["rev_type","revenue"]}],grid:[{left:5,top:10,right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),$$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend")._months=[],$$("rev:vue1:trend")._days=[],$$("rev:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.revenue.push({cmp:"rev:vue1:trend",data:Object(o.b)("revType_trend").config.id}),Object(o.b)("revType_trend").waitData.then((function(e){$$("rev:vue1:trend")._isDataLoaded=1,$$("rev:vue1:trend").parse(Object(o.b)("revType_trend")),$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()})),$$("rev:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:trend")})),Object(o.b)("revType_trend").data.attachEvent("onClearAll",(function(){"revenue"==$$("top:menu").getSelectedId()&&($$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend")._months=[],$$("rev:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend")._current_upd_dt=Object(u.a)().d1)})),$("button.ui.button.revByType_"+periodSplit[1]).on("click",(function(){"m"!=$$("rev:vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("rev:vue1:trend")._current_month}})})),$("button.ui.button.revByType_"+periodSplit[2]).on("click",(function(){"s"!=$$("rev:vue1:trend")._filter_level&&n.filterSlotHandler({data:{upd_dt:$$("rev:vue1:trend")._current_upd_dt,seriesName:$$("rev:vue1:trend")._current_serie_selected}})})),$("button.ui.button.revByType_"+periodSplit[0]).on("click",(function(){"m"!=$$("rev:vue1:trend")._filter_level&&"s"!=$$("rev:vue1:trend")._filter_level||($$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend").data.filter((function(e){return"month_trend"==e._type||"rev_split"==e._type})))}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.revByType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:trend")._months||($$("rev:vue1:trend")._months=[]),$$("rev:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("rev:vue1:trend")._filter_level="m",$$("rev:vue1:trend")._current_month=e.data.month,$$("rev:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}));else{var t=Object(o.a)("revenue","dt_trend",e.data.month+"-01");$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),t.then((function(r){$$("rev:vue1:trend")._months.push(e.data.month),$$("rev:vue1:trend")._filter_level="m",$$("rev:vue1:trend").parse(t).then((function(){$$("rev:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}))})),$$("rev:vue1:trend")._current_month=e.data.month,$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()}))}},n.filterSlotHandler=function(e){if(e.data)if($("button.ui.button.revByType_"+periodSplit[2]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:trend")._days||($$("rev:vue1:trend")._days=[]),$$("rev:vue1:trend")._days.some((function(t){return t==e.data.upd_dt})))$$("rev:vue1:trend")._filter_level="s",$$("rev:vue1:trend")._current_upd_dt=e.data.upd_dt,$$("rev:vue1:trend").config.options.legend.selected={},$$("rev:vue1:trend").config.options.legend.selected[e.seriesName]=!0,$$("rev:vue1:trend").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt||"rev_split"==t._type}));else{var t=Object(o.a)("revenue","slot_trend",e.data.upd_dt,"vue3");$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),t.then((function(r){$$("rev:vue1:trend")._days.push(e.data.upd_dt),$$("rev:vue1:trend")._filter_level="s",$$("rev:vue1:trend").config.options.legend.selected={},$$("rev:vue1:trend").config.options.legend.selected[e.seriesName]=!0,$$("rev:vue1:trend").parse(t).then((function(){$$("rev:vue1:trend").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt||"rev_split"==t._type}))})),$$("rev:vue1:trend")._current_upd_dt=e.data.upd_dt,$$("rev:vue1:trend")._current_serie_selected=e.seriesName,$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}webix.protoUI({name:"echarts-grid-dataset",defaults:{options:{title:[],grid:[],xAxis:[],yAxis:[],series:[],test:"test"}},$init:function(){this._ready_awaits=1,this._is_init=0,webix.extend(this,webix.ProgressBar),this.data.provideApi(this,!0);var e=this;this.data.attachEvent("onAfterLoad",(function(){2==this._ready_awaits?(console.log("afterload"),webix.delay(webix.bind(this.render,this)),this.config.ready&&(this.config.ready.call(this,this.data),this._ready_awaits=3)):this._ready_awaits=1})),this.data.attachEvent("onStoreUpdated",(function(){this._isDataLoaded=1,2==e._ready_awaits&&webix.delay(webix.bind(e.render,e))})),webix.delay(webix.bind(this.launch_init,this))},launch_init:function(){1==this._ready_awaits&&webix.delay(webix.bind(this._render_once,this))},_render_once:function(){var e=r({},this.defaults);e=$.extend(!0,e,this.config),this._isDataLoaded=void 0===this._isDataLoaded?0:this._isDataLoaded;var t=echarts.init(this.$view);if(this._echart_obj=t,e.charts_event)for(var n in e.charts_event)this._echart_obj.on(n,e.charts_event[n][0],e.charts_event[n][1]);this._ready_awaits=2,this._echart_obj.showLoading(),webix.delay(webix.bind(this.render,this))},render:function(){var e=this.config.options,t=this.data.getRange(),r=[].concat(t);e.series.filter((function(e){return void 0===e._isStack})).forEach((function(t){var n;void 0!==t.datasetIndex&&(n=r.filter((function(e){return e._type==t._type})),t._kpi&&(n=n.filter((function(e){return e._kpi==t._kpi}))),e.dataset[t.datasetIndex].source=n)})),"function"==typeof this.config.beforedisplay&&this.config.beforedisplay(r,e,this._echart_obj),this._echart_obj.setOption(e,!0),(1==this._isDataLoaded&&0==r.length||r.length>0)&&this._echart_obj.hideLoading()},$getSize:function(e,t){return webix.ui.view.prototype.$getSize.call(this,e,t)},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&2==this._ready_awaits&&this._echart_obj.resize()}},webix.DataLoader,webix.EventSystem,webix.ui.view)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(13),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){var e=this._kpi;return webix.promise.all([a.a,a.e]).then((function(t){var r=t[0],o=t[1];return{view:"echarts-grid-dataset",id:"traff:"+e+":vue1:trend",animation:!0,beforedisplay:function(t,a,u){var s=this,c=[],d=[],l=[];if(0!=t.length&&0!=(t=t.filter((function(t){return t.traff_type==e}))).length){var p=[];"month_trend"==t[0]._type&&(t.sort((function(e,t){return t.month<e.month?1:-1})),p=t.map((function(e){return e.month})).filter((function(e){return void 0!==e}))),"dt_trend"==t[0]._type&&(t.sort((function(e,t){return t.upd_dt<e.upd_dt?1:-1})),p=t.map((function(e){return e.upd_dt})).filter((function(e){return void 0!==e}))),"slot_trend"==t[0]._type&&(t.sort((function(e,t){return t.slot<e.slot?1:-1})),p=t.map((function(e){return e.slot})).filter((function(e){return void 0!==e})));var f=t.map((function(e){return e.free})).filter((function(e,t,r){return r.indexOf(e)==t}));p=p.filter((function(e,t,r){return r.indexOf(e)==t})),0!=t.length&&(u.off("click"),f.forEach((function(a){"month_trend"==t[0]._type&&(d.push({dimensions:["month","traffic"],source:t.filter((function(t){return t.traff_type==e&&"month_trend"==t._type&&t.free==a})),isAdded:!0}),c.push({type:"bar",itemStyle:{color:r.traffic[a]},stack:"split",id:"traff_split_trend:"+a+":"+e,datasetIndex:d.length-1,barMinHeight:10,_isStack:!0,name:o.traffic[a],encode:{x:"month",y:"traffic"}})),"dt_trend"==t[0]._type&&(d.push({dimensions:["upd_dt","traffic"],source:t.filter((function(t){return t.traff_type==e&&"dt_trend"==t._type&&t.free==a})),isAdded:!0}),c.push({type:"line",smooth:!0,lineStyle:{color:r.traffic[a]},itemStyle:{color:r.traffic[a]},_isStack:!0,name:o.traffic[a],ecode:{x:"upd_dt",y:"traffic"},datasetIndex:d.length-1})),"slot_trend"==t[0]._type&&(d.push({dimensions:["slot","traffic"],source:t.filter((function(t){return t.traff_type==e&&"slot_trend"==t._type&&t.free==a})),isAdded:!0}),c.push({type:"bar",itemStyle:{color:r.traffic[a]},_isStack:!0,name:o.traffic[a],ecode:{x:"slot",y:"traffic"},datasetIndex:d.length-1})),l.push(r.traffic[a]),u.on("click",{seriesId:"traff_split_trend:"+a+":"+e,seriesType:"bar"},(function(t){var r="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!r){var a=s;s.executeDoubleClick=setTimeout((function(){a._clicked=!1}),500),s._clicked&&(r=!0,a._clicked=!1,clearTimeout(s.executeDoubleClick))}r?n.filterHandler(t,e):s._clicked=!0}))})),a.series=a.series.filter((function(e){return void 0===e._isStack})),a.dataset=a.dataset.filter((function(e){return void 0===e.isAdded})),0!=p.length&&(a.xAxis[0].data=p),0!=d.length&&(a.dataset=[].concat(a.dataset,d)),0!=c.length&&(a.series=c),0!=l.length&&(a.color=[].concat(l)),"slot_trend"==t[0]._type?a.legend.selectedMode="single":a.legend.selectedMode="multiple","dt_trend"==t[0]._type&&u.on("click",{seriesType:"line"},(function(t){var r="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!r){var a=s;s.executeSDoubleClick=setTimeout((function(){a._sclicked=!1}),500),s._sclicked&&(r=!0,a._sclicked=!1,clearTimeout(s.executeSDoubleClick))}r?n.filterSlotHandler(t,e):s._sclicked=!0})))}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=s(e);!(t=n()).done;){var a=t.value;r+=a.marker+a.seriesName+" : "+Object(i.b)(a.value.traffic)+"<br/>"}return r},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,top:"20",type:"scroll",textStyle:{fontSize:10}},title:[{text:a.d.traffic.by_type?a.d.traffic.by_type:"",left:"50%",textAlign:"center",textStyle:{fontSize:12}}],dataset:[],grid:{left:10,containLabel:!0,bottom:5},xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(t,r){return"data"==e?Object(i.a)(t):Object(i.h)(t)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){var t=this._kpi;$$("traffByType_"+t)._event_set=!1,$$("traff:"+t+":vue1:trend").showProgress(),$$("traff:"+t+":vue1:trend").disable(),$$("traff:"+t+":vue1:trend")._filter_level="a",$$("traff:"+t+":vue1:trend")._months=[],$$("traff:"+t+":vue1:trend")._days=[],$$("traff:"+t+":vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("traff:"+t+":vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.traffic.push({cmp:"traff:"+t+":vue1:trend",data:Object(o.b)("traffic_type").config.id}),Object(o.b)("traffic_type").waitData.then((function(e){$$("traff:"+t+":vue1:trend")._isDataLoaded=1,$$("traff:"+t+":vue1:trend").parse(Object(o.b)("traffic_type")),$$("traff:"+t+":vue1:trend").enable(),$$("traff:"+t+":vue1:trend").hideProgress()})),$$("traff:"+t+":vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("traff:"+t+":vue1:trend")})),Object(o.b)("traffic_type").attachEvent("onBeforeLoad",(function(){"traffic"==$$("top:menu").getSelectedId()&&($$("traff:"+t+":vue1:trend")._filter_level="a",$$("traff:"+t+":vue1:trend")._months=[],$$("traff:"+t+":vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("traff:"+t+":vue1:trend")._current_upd_dt=Object(u.a)().d1)})),$$("traffByType_"+t)._event_set||0==$("button.ui.button.traffByType_"+t+"_"+periodSplit[1]).length||($("button.ui.button.traffByType_"+t+"_"+periodSplit[1]).on("click",(function(){"m"!=$$("traff:"+t+":vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("traff:"+t+":vue1:trend")._current_month}},t)})),$("button.ui.button.traffByType_"+t+"_"+periodSplit[2]).on("click",(function(){"s"!=$$("traff:"+t+":vue1:trend")._filter_level&&n.filterSlotHandler({data:{upd_dt:$$("traff:"+t+":vue1:trend")._current_upd_dt,seriesName:$$("traff:"+t+":vue1:trend")._current_serie_selected}},t)})),$("button.ui.button.traffByType_"+t+"_"+periodSplit[0]).on("click",(function(){"m"!=$$("traff:"+t+":vue1:trend")._filter_level&&"s"!=$$("traff:"+t+":vue1:trend")._filter_level||($$("traff:"+t+":vue1:trend")._filter_level="a",$$("traff:"+t+":vue1:trend").data.filter((function(e){return"month_trend"==e._type})))})),$$("traffByType_"+t)._event_set=!0),$$("traffByType_"+t).attachEvent("onViewShow",(function(){$$("traffByType_"+t)._event_set||($("button.ui.button.traffByType_"+t+"_"+periodSplit[1]).on("click",(function(){"m"!=$$("traff:"+t+":vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("traff:"+t+":vue1:trend")._current_month}},t)})),$("button.ui.button.traffByType_"+t+"_"+periodSplit[2]).on("click",(function(){"s"!=$$("traff:"+t+":vue1:trend")._filter_level&&n.filterSlotHandler({data:{upd_dt:$$("traff:"+t+":vue1:trend")._current_upd_dt,seriesName:$$("traff:"+t+":vue1:trend")._current_serie_selected}},t)})),$("button.ui.button.traffByType_"+t+"_"+periodSplit[0]).on("click",(function(){"m"!=$$("traff:"+t+":vue1:trend")._filter_level&&"s"!=$$("traff:"+t+":vue1:trend")._filter_level||($$("traff:"+t+":vue1:trend")._filter_level="a",$$("traff:"+t+":vue1:trend").data.filter((function(e){return"month_trend"==e._type})))})),$$("traffByType_"+t)._event_set=!0)}))},n.filterHandler=function(e,t){if(e.data)if($("button.ui.button.traffByType_"+t+"_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("traff:"+t+":vue1:trend")._months||($$("traff:"+t+":vue1:trend")._months=[]),$$("traff:"+t+":vue1:trend")._months.some((function(t){return t==e.data.month})))$$("traff:"+t+":vue1:trend")._filter_level="m",$$("traff:"+t+":vue1:trend")._current_month=e.data.month,$$("traff:"+t+":vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var r=Object(o.a)("traffic_type","vue2",e.data.month+"-01");$$("traff:"+t+":vue1:trend").showProgress(),$$("traff:"+t+":vue1:trend").disable(),r.then((function(n){$$("traff:"+t+":vue1:trend")._months.push(e.data.month),$$("traff:"+t+":vue1:trend")._filter_level="m",$$("traff:"+t+":vue1:trend").parse(r).then((function(){$$("traff:"+t+":vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("traff:"+t+":vue1:trend")._current_month=e.data.month,$$("traff:"+t+":vue1:trend").enable(),$$("traff:"+t+":vue1:trend").hideProgress()}))}},n.filterSlotHandler=function(e,t){if(e.data)if($("button.ui.button.traffByType_"+t+"_"+periodSplit[2]).addClass("active").siblings().removeClass("active"),$$("traff:"+t+":vue1:trend")._days||($$("traff:"+t+":vue1:trend")._days=[]),$$("traff:"+t+":vue1:trend")._days.some((function(t){return t==e.data.upd_dt})))$$("traff:"+t+":vue1:trend")._filter_level="s",$$("traff:"+t+":vue1:trend")._current_upd_dt=e.data.upd_dt,$$("traff:"+t+":vue1:trend").config.options.legend.selected={},$$("traff:"+t+":vue1:trend").config.options.legend.selected[e.seriesName]=!0,$$("traff:"+t+":vue1:trend").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}));else{var r=Object(o.a)("traffic_type","vue3",e.data.upd_dt,"vue3");$$("traff:"+t+":vue1:trend").showProgress(),$$("traff:"+t+":vue1:trend").disable(),r.then((function(n){$$("traff:"+t+":vue1:trend")._days.push(e.data.upd_dt),$$("traff:"+t+":vue1:trend")._filter_level="s",$$("traff:"+t+":vue1:trend").config.options.legend.selected={},$$("traff:"+t+":vue1:trend").config.options.legend.selected[e.seriesName]=!0,$$("traff:"+t+":vue1:trend").parse(r).then((function(){$$("traff:"+t+":vue1:trend").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}))})),$$("traff:"+t+":vue1:trend")._current_upd_dt=e.data.upd_dt,$$("traff:"+t+":vue1:trend")._current_serie_selected=e.seriesName,$$("traff:"+t+":vue1:trend").enable(),$$("traff:"+t+":vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(13),i=r(0);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,console.log(n),a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return this._eType="treemap",{view:"echarts-grid-dataset",id:"traff:vue1:"+e+":offer",animation:!0,_eType:"treemap",beforedisplay:function(t,r){0!=t.length&&(r.series[0].data=t.filter((function(t){return t.traff_type==e})))},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},title:[{text:a.d.traffic.by_bill_by_prod_by_offer?a.d.traffic.by_bill_by_prod_by_offer:"",left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(t){return t.name+" : "+("data"==e?Object(i.a)(t.value):Object(i.h)(t.value))}},grid:[{left:5,top:8,containLabel:!0}],series:[{name:"Offre",type:"treemap",leafDepth:1,_type:e,levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}]}]}}},u.init=function(e){e._expDataId=Object(o.b)("traffic_offer_exp").config.id,e._eType="treemap";var t=this._kpi;$$("traff:vue1:"+t+":offer").showProgress(),$$("traff:vue1:"+t+":offer").disable(),a.c.traffic.push({cmp:"traff:vue1:"+t+":offer",data:Object(o.b)("traffic_offer").config.id}),a.c.traffic.push({cmp:"traff:vue1:export:offer",data:Object(o.b)("traffic_offer_exp").config.id}),Object(o.b)("traffic_offer").waitData.then((function(e){$$("traff:vue1:"+t+":offer")._isDataLoaded=1,$$("traff:vue1:"+t+":offer").parse(Object(o.b)("traffic_offer")),$$("traff:vue1:"+t+":offer").enable(),$$("traff:vue1:"+t+":offer").hideProgress()})),$$("traff:vue1:"+t+":offer").data.attachEvent("onStoreLoad",(function(){Object(i.j)("traff:vue1:"+t+":offer")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(31)),o=r(4),i=r(1);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",id:"mon:stat:"+e,_type:e,content:{header:i.i["mon_"+e].label,meta:i.i["mon_"+e].desc},tooltip:{template:(i.i["mon_"+e].title?i.i["mon_"+e].title:"")+"<br>Def.:"+(i.i["mon_"+e].definition?i.i["mon_"+e].definition:"")}}},u.init=function(e){var t=this._kpi;$$("mon:stat:"+t).showProgress(),$$("mon:stat:"+t).disable(),i.i["mon_"+t].title&&e.config.tooltip&&webix.TooltipControl.addTooltip(e.$view,e.config.tooltip.template),i.c.monitor.push({cmp:"mon:stat:"+t,data:Object(a.a)("mon_stats").config.id}),Object(a.a)("mon_stats").waitData.then((function(e){$$("mon:stat:"+t).parse(Object(a.a)("mon_stats")),$$("mon:stat:"+t).enable(),$$("mon:stat:"+t).hideProgress()})),e.attachEvent("onDestruct",(function(){webix.TooltipControl.removeTooltip(e.$view)})),$$("mon:stat:"+t).data.attachEvent("onStoreLoad",(function(){Object(o.h)("mon:stat:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(1),a=r(6),o=r(17),i=r(18);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}new o.b(n.o.api_url);var s=new webix.DataCollection({id:"monitor_stats",url:function(e){return a.a.getData("monitor","getStat","vue1")}}),c=new webix.DataCollection({id:"monitor_tab",url:function(e){return a.a.getData("monitor","getMonTab","vue1")}}),d=new webix.DataCollection({id:"monitor_line",url:function(e){return a.a.getData("monitor","getMonLine","vue1")}});function l(e){switch(e){case"mon_stats":return s;case"mon_tab":return c;case"line_trend":return d}}for(var p,f=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}([{type:"vue1",data:s,func:"getStat"},{type:"vue1",data:c,func:"getMonTab"},{type:"vue1",data:d,func:"getMonLine"}]);!(p=f()).done;){var h=p.value;h.data._menu="monitor",h.data._func=h.func,h.data._param=h.type,h.data.attachEvent("onFilterData",i.a.onFiterClicked)}},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=r(113),o=r(114),i=r(115),u=r(116);var s=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._type=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){var e=this._type;return{type:"clean",margin:0,rows:"FAI"==e?[new a.default(this.app,"",e),new o.default(this.app,"",e)]:[i.default,u.default]}},s.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._type=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._type;return webix.promise.all([a.a,a.e]).then((function(t){var r=t[0],n=t[1];return{view:"echarts-grid-dataset",id:"rev:vue1:split:"+e,maxHeight:145,animation:!0,options:{legend:{show:!0,itemGap:20,top:15,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return n.revenue[e]?n.revenue[e]:e}},tooltip:{trigger:"item",show:!0,formatter:function(e){return(n.revenue[e.name]?n.revenue[e.name]:e.name)+": "+Object(i.h)(e.data.revenue)+" ("+e.percent+"%)"},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},dataset:[{dimensions:["rev_type","revenue"]}],grid:[{left:5,top:20,containLabel:!0}],series:[{type:"pie",radius:[0,"60%"],_type:"rev_split",minAngle:"10",center:["50%","60%"],datasetIndex:0,gridIndex:0,label:{show:!1,formatter:function(e){return n.revenue[e.name]}},selectedMode:"single",avoidLabelOverlap:!0,encode:{itemName:"rev_type",value:"revenue",tooltip:"revenue"},itemStyle:{color:function(e){return r.revenue[e.name]}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}}))},u.init=function(e){var t=this._type;$$("rev:vue1:split:"+t).showProgress(),$$("rev:vue1:split:"+t).disable(),a.c.revenue.push({cmp:"rev:vue1:split:"+t,data:Object(o.b)("rev_split_"+t).config.id}),Object(o.b)("rev_split_"+t).waitData.then((function(e){$$("rev:vue1:split:"+t)._isDataLoaded=1,$$("rev:vue1:split:"+t).parse(Object(o.b)("rev_split_"+t)),$$("rev:vue1:split:"+t).enable(),$$("rev:vue1:split:"+t).hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:split:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._type=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"rev:vue1:grptypeoff:"+this._type,animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)}},title:[{text:"Par type par offre",top:0,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(e){return e.name+" : "+Object(i.h)(e.value)}},series:[{type:"treemap",leafDepth:1,name:"revenu",_type:"_rgrp",levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}],bottom:30,height:"80%"}]}}},u.init=function(e){var t=this._type;$$("rev:vue1:grptypeoff:"+t).showProgress(),$$("rev:vue1:grptypeoff:"+t).disable(),a.c.revenue.push({cmp:"rev:vue1:grptypeoff:"+t,data:Object(o.b)("rev_grp_type_split_"+t).config.id}),Object(o.b)("rev_grp_type_split_"+t).waitData.then((function(e){$$("rev:vue1:grptypeoff:"+t)._isDataLoaded=1,$$("rev:vue1:grptypeoff:"+t).parse(Object(o.b)("rev_grp_type_split_"+t)),$$("rev:vue1:grptypeoff:"+t).enable(),$$("rev:vue1:grptypeoff:"+t).hideProgress()})),$$("rev:vue1:grptypeoff:"+t).data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:grptypeoff:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(14)),o=r(4),i=r(1);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",id:"bl:stat:"+e,_type:e,tooltip:{template:(i.i["bill_"+e].title?i.i["bill_"+e].title:"")+"<br>Def. : "+(i.i["bill_"+e].definition?i.i["bill_"+e].definition+"<br>Variation par rapport au mois dernier":"")},content:{header:i.i["bill_"+e].label,meta:i.i["bill_"+e].desc,shortheader:i.i["bill_"+e].shortlab?i.i["bill_"+e].shortlab:i.i["bill_"+e].label.substr(0,4),seuil:i.i["bill_"+e].wseuil?i.i["bill_"+e].wseuil:150,shortdesc:i.i["bill_"+e].shortdesc?i.i["bill_"+e].shortdesc:i.i["bill_"+e].desc,wdseuil:i.i["bill_"+e].wdseuil?i.i["bill_"+e].wdseuil:150,moblab:i.i["bill_"+e].moblab?i.i["bill_"+e].moblab:i.i["bill_"+e].label.substr(0,2)}}},u.init=function(e){var t=this._kpi;$$("bl:stat:"+t).showProgress(),$$("bl:stat:"+t).disable(),i.i["bill_"+t].title&&e.config.tooltip&&webix.TooltipControl.addTooltip(e.$view,e.config.tooltip.template),i.c.bills.push({cmp:"bl:stat:"+t,data:Object(a.a)("bills_stats").config.id}),Object(a.a)("bills_stats").waitData.then((function(e){$$("bl:stat:"+t).parse(Object(a.a)("bills_stats")),$$("bl:stat:"+t).enable(),$$("bl:stat:"+t).hideProgress()})),e.attachEvent("onDestruct",(function(){webix.TooltipControl.removeTooltip(e.$view)})),$$("bl:stat:"+t).data.attachEvent("onStoreLoad",(function(){Object(o.h)("bl:stat:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(14),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){var e=this._kpi;return webix.promise.all([a.a,a.e]).then((function(t){var r=t[0],o=t[1];return{view:"echarts-grid-dataset",id:"bill:vue1:off:trend:"+e,animation:!0,beforedisplay:function(t,a,o){var u=this,s=[],c=[],d=[];if(t.sort(),0!=t.length){var l=t.map((function(e){return e.off_group})).filter((function(e,t,r){return r.indexOf(e)==t})),p="month_trend"==t[0]._type?t.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):t.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));p.sort(),o.off("click"),l.forEach((function(a){t.some((function(e){return"month_trend"==e._type}))&&(c.push({dimensions:["month","revenue"],source:t.filter((function(e){return e.off_group==a&&"month_trend"==e._type})),isAdded:!0}),s.push({type:"bar",itemStyle:{color:r.parcOff[a]},stack:"split",id:"parc_off_split_trend:"+e+a,datasetIndex:c.length,barMinHeight:10,barMaxWidth:40,_isStack:!0,name:a,encode:{x:"month",y:"revenue"},gridIndex:1})),t.some((function(e){return"dt_trend"==e._type}))&&(c.push({dimensions:["upd_dt","revenue"],source:t.filter((function(e){return e.off_group==a&&"dt_trend"==e._type})),isAdded:!0}),s.push({type:"line",smooth:!0,lineStyle:{color:r.parcOff[a]},itemStyle:{color:r.parcOff[a]},_isStack:!0,name:a,encode:{x:"upd_dt",y:"revenue"},datasetIndex:c.length,gridIndex:1})),o.on("click",{seriesId:"parc_off_split_trend:"+e+a,seriesType:"bar"},(function(t){var r="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!r){var a=u;u.executeDoubleClick=setTimeout((function(){a._clicked=!1}),500),u._clicked&&(r=!0,a._clicked=!1,clearTimeout(u.executeDoubleClick))}r?n.filterHandler(t,e):u._clicked=!0})),d.push(r.parcOff[a])})),a.series=a.series.filter((function(e){return void 0===e._isStack})),a.dataset=a.dataset.filter((function(e){return void 0===e.isAdded})),0!=c.length&&(a.dataset=[].concat(a.dataset,c)),0!=d.length&&(a.color=[].concat(d)),0!=s.length&&(a.series=[].concat(s,a.series)),a.legend.selectedMode="multiple",a.xAxis[0].data=[].concat(p)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=s(e);!(t=n()).done;){var a=t.value;r+=a.marker+(o.revenue[a.seriesName]?o.revenue[a.seriesName]:a.seriesName)+" : "+Object(i.b)(a.value.revenue)+"<br/>"}return r},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return o.revenue[e]?o.revenue[e]:e}},dataset:[{dimensions:["off_group","revenue"]}],grid:[{left:5,top:20,right:5,bottom:35,containLabel:!0}],title:{text:a.d.bill.by_prod_trend?a.d.bill.by_prod_trend:"",right:"15%",top:2,textAlign:"center",textStyle:{fontSize:12}},xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){var t=this._kpi;$$("bill:vue1:off:trend:"+t).showProgress(),$$("bill:vue1:off:trend:"+t).disable(),$$("bill:vue1:off:trend:"+t)._filter_level="a",$$("bill:vue1:off:trend:"+t)._months=[],$$("bill:vue1:off:trend:"+t)._days=[],$$("bill:vue1:off:trend:"+t)._current_month=Object(u.a)().d1.substr(0,7),$$("bill:vue1:off:trend:"+t)._current_upd_dt=Object(u.a)().d1,a.c.bills.push({cmp:"bill:vue1:off:trend:"+t,data:Object(o.a)(t+"_offer_trend").config.id}),Object(o.a)(t+"_offer_trend").waitData.then((function(e){$$("bill:vue1:off:trend:"+t)._isDataLoaded=1,$$("bill:vue1:off:trend:"+t).parse(Object(o.a)(t+"_offer_trend")),$$("bill:vue1:off:trend:"+t).enable(),$$("bill:vue1:off:trend:"+t).hideProgress()})),$$("bill:vue1:off:trend:"+t).data.attachEvent("onStoreLoad",(function(){Object(i.j)("bill:vue1:off:trend:"+t)})),Object(o.a)(t+"_offer_trend").attachEvent("onBeforeLoad",(function(){"bills"==$$("top:menu").getSelectedId()&&($$("bill:vue1:off:trend:"+t)._filter_level="a",$$("bill:vue1:off:trend:"+t)._months=[],$$("bill:vue1:off:trend:"+t)._current_month=Object(u.a)().d1.substr(0,7),$$("bill:vue1:off:trend:"+t)._current_upd_dt=Object(u.a)().d1)})),$("button.ui.button."+t+"ParOff_"+periodSplit[1]).on("click",(function(){"m"!=$$("bill:vue1:off:trend:"+t)._filter_level&&n.filterHandler({data:{month:$$("bill:vue1:off:trend:"+t)._current_month}},t)})),$("button.ui.button."+t+"ParOff_"+periodSplit[0]).on("click",(function(){"m"==$$("bill:vue1:off:trend:"+t)._filter_level&&($$("bill:vue1:off:trend:"+t)._filter_level="a",$$("bill:vue1:off:trend:"+t).data.filter((function(e){return"month_trend"==e._type})))})),$$(t+"ParOff").disable()},c.ready=function(e){var t=this._kpi;$$(t+"ParOff").enable(),e.attachEvent("onAfterRender",(function(){"parc"==$$("top:menu").getSelectedId()&&($$(t+"ParOff").enable(),e.adjust(),$$("bills:dash").adjust())}))},n.filterHandler=function(e,t){if(e.data)if($("button.ui.button."+t+"ParOff_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("bill:vue1:off:trend:"+t)._months||($$("bill:vue1:off:trend:"+t)._months=[]),$$("bill:vue1:off:trend:"+t)._months.some((function(t){return t==e.data.month})))$$("bill:vue1:off:trend:"+t)._filter_level="m",$$("bill:vue1:off:trend:"+t)._current_month=e.data.month,$$("bill:vue1:off:trend:"+t).data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var r="b"==t?"fact":"pay",n=Object(o.b)("billing",r,e.data.month+"-01","dt_trend");$$("bill:vue1:off:trend:"+t).showProgress(),$$("bill:vue1:off:trend:"+t).disable(),n.then((function(r){$$("bill:vue1:off:trend:"+t)._months.push(e.data.month),$$("bill:vue1:off:trend:"+t)._filter_level="m",$$("bill:vue1:off:trend:"+t).parse(n).then((function(){$$("bill:vue1:off:trend:"+t).data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("bill:vue1:off:trend:"+t)._current_month=e.data.month,$$("bill:vue1:off:trend:"+t).enable(),$$("bill:vue1:off:trend:"+t).hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(14),i=r(0);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._type=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._type;return a.a.then((function(t){return{view:"echarts-grid-dataset",id:"bill:vue1:offers:"+e,options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:e[1]+5};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},animation:!0,title:[{text:a.d.bill.by_prod?a.d.bill.by_prod:"",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],grid:[{left:5,bottom:10,top:20,right:"20%",containLabel:!0}],xAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"category",axisLabel:{interval:0,textStyle:{fontSize:10}},splitLine:{show:!1},axisTick:{show:!0}}],dataset:[{dimensions:["off_group","revenue"]}],series:[{type:"bar",_type:"off_split",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:30,barMinHeight:10,encode:{x:"revenue",y:"off_group"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.revenue)}},itemStyle:{color:function(e){return t.parcOff[e.value.off_group]}},label:{normal:{position:"right",show:!0,formatter:function(e){return Object(i.b)(e.data.revenue)}}}}]}}}))},u.init=function(e){var t=this._type;$$("bill:vue1:offers:"+t).showProgress(),$$("bill:vue1:offers:"+t).disable(),a.c.bills.push({cmp:"bill:vue1:offers:"+t,data:Object(o.a)(t+"_offer").config.id}),Object(o.a)(t+"_offer").waitData.then((function(e){$$("bill:vue1:offers:"+t)._isDataLoaded=1,$$("bill:vue1:offers:"+t).parse(Object(o.a)(t+"_offer")),$$("bill:vue1:offers:"+t).enable(),$$("bill:vue1:offers:"+t).hideProgress()})),$$("bill:vue1:offers:"+t).data.attachEvent("onStoreLoad",(function(){Object(i.j)("bill:vue1:offers:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(14),i=r(0);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._type=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._type;return{view:"echarts-grid-dataset",id:"bill:vue1:billmkLG:"+e,animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},title:[{text:a.d.bill.by_bill_by_market_by_prod?a.d.bill.by_bill_by_market_by_prod:"",top:1,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(e){return e.name+" : "+Object(i.h)(e.value)}},series:[{name:billings_rf[e].name,type:"treemap",leafDepth:1,_type:e+"_mkbt",levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}]}]}}},u.init=function(e){var t=this._type;e.showProgress(),e.disable(),a.c.bills.push({cmp:"bill:vue1:billmkLG:"+t,data:Object(o.a)(t+"_bill_market").config.id}),Object(o.a)(t+"_bill_market").waitData.then((function(r){e._isDataLoaded=1,e.parse(Object(o.a)(t+"_bill_market")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("bill:vue1:billmkLG:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(11)),o=r(4),i=r(1);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",tooltip:{template:"<span style='background-color:#1212120d;'>"+(i.i[e].title?i.i[e].title:"")+"<br>Def. : "+(i.i[e].definition?i.i[e].definition+"<br>Variation par rapport au mois dernier":"")+"</span>"},id:"home:stat:"+e,_type:e,content:{header:i.i[e].label,meta:i.i[e].desc,shortheader:i.i[e].shortlab?i.i[e].shortlab:i.i[e].label.substr(0,4),seuil:i.i[e].wseuil?i.i[e].wseuil:200,shortdesc:i.i[e].shortdesc?i.i[e].shortdesc:i.i[e].desc,wdseuil:i.i[e].wdseuil?i.i[e].wdseuil:200,moblab:i.i[e].moblab?i.i[e].moblab:i.i[e].label.substr(0,2)}}},u.init=function(e){var t=this._kpi;$$("home:stat:"+t).showProgress(),i.i[t].title&&e.config.tooltip&&webix.TooltipControl.addTooltip(e.$view,e.config.tooltip.template),$$("home:stat:"+t).disable(),i.c.home.push({cmp:"home:stat:"+t,data:Object(a.c)(t).config.id}),Object(a.c)(t).waitData.then((function(e){$$("home:stat:"+t).parse(Object(a.c)(t)),$$("home:stat:"+t).enable(),$$("home:stat:"+t).hideProgress()})),e.attachEvent("onDestruct",(function(){webix.TooltipControl.removeTooltip(e.$view)})),$$("home:stat:"+t).data.attachEvent("onStoreLoad",(function(){Object(o.h)("home:stat:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(12)),o=r(4),i=r(1);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",id:"home:stat:"+e,_type:e,content:{header:i.i[e].label,meta:i.i[e].desc,shortheader:i.i[e].shortlab?i.i[e].shortlab:i.i[e].label.substr(0,4),seuil:i.i[e].wseuil?i.i[e].wseuil:200,shortdesc:i.i[e].shortdesc?i.i[e].shortdesc:i.i[e].desc,wdseuil:i.i[e].wdseuil?i.i[e].wdseuil:200,moblab:i.i[e].moblab?i.i[e].moblab:i.i[e].label.substr(0,2)}}},u.init=function(e){var t=this._kpi;$$("home:stat:"+t).showProgress(),$$("home:stat:"+t).disable(),i.c.home.push({cmp:"home:stat:"+t,data:Object(a.c)(t).config.id}),Object(a.c)(t).waitData.then((function(e){$$("home:stat:"+t).parse(Object(a.c)(t)),$$("home:stat:"+t).enable(),$$("home:stat:"+t).hideProgress()})),$$("home:stat:"+t).data.attachEvent("onStoreLoad",(function(){Object(o.h)("home:stat:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(7)),o=r(4),i=r(1);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",id:"rev:stat:"+e,_type:e,tooltip:{template:(i.i["rev_"+e].title?i.i["rev_"+e].title:"")+"<br>Def. : "+(i.i["rev_"+e].definition?i.i["rev_"+e].definition+"<br>Variation par rapport au mois dernier":"")},content:{header:i.i["rev_"+e].label,meta:i.i["rev_"+e].desc,shortheader:i.i["rev_"+e].shortlab?i.i["rev_"+e].shortlab:i.i["rev_"+e].label.substr(0,4),seuil:i.i["rev_"+e].wseuil?i.i["rev_"+e].wseuil:150,shortdesc:i.i["rev_"+e].shortdesc?i.i["rev_"+e].shortdesc:i.i["rev_"+e].desc,wdseuil:i.i["rev_"+e].wdseuil?i.i["rev_"+e].wdseuil:150,mobseuil:i.i["rev_"+e].mobseuil?i.i["rev_"+e].mobseuil:140,moblab:i.i["rev_"+e].moblab?i.i["rev_"+e].moblab:i.i["rev_"+e].label.substr(0,2)}}},u.init=function(e){var t=this._kpi;$$("rev:stat:"+t).showProgress(),$$("rev:stat:"+t).disable(),i.i["rev_"+t].title&&e.config.tooltip&&webix.TooltipControl.addTooltip(e.$view,e.config.tooltip.template),i.c.revenue.push({cmp:"rev:stat:"+t,data:Object(a.b)("stat").config.id}),Object(a.b)("stat").waitData.then((function(e){$$("rev:stat:"+t).parse(Object(a.b)("stat")),$$("rev:stat:"+t).enable(),$$("rev:stat:"+t).hideProgress()})),e.attachEvent("onDestruct",(function(){webix.TooltipControl.removeTooltip(e.$view)})),$$("rev:stat:"+t).data.attachEvent("onStoreLoad",(function(){Object(o.h)("rev:stat:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(15)),o=r(4),i=r(1);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",id:"sl:stat:"+e,_type:e,content:{header:i.i[e].label,meta:i.i[e].desc,shortheader:i.i[e].shortlab?i.i[e].shortlab:i.i[e].label.substr(0,4),seuil:i.i[e].wseuil?i.i[e].wseuil:150,shortdesc:i.i[e].shortdesc?i.i[e].shortdesc:i.i[e].desc,wdseuil:i.i[e].wdseuil?i.i[e].wdseuil:150,moblab:i.i[e].moblab?i.i[e].moblab:i.i[e].label.substr(0,2)}}},u.init=function(e){var t=this._kpi;$$("sl:stat:"+t).showProgress(),$$("sl:stat:"+t).disable(),i.c.sales.push({cmp:"sl:stat:"+t,data:Object(a.b)("sales_stats").config.id}),Object(a.b)("sales_stats").waitData.then((function(e){$$("sl:stat:"+t).parse(Object(a.b)("sales_stats")),$$("sl:stat:"+t).enable(),$$("sl:stat:"+t).hideProgress()})),$$("sl:stat:"+t).data.attachEvent("onStoreLoad",(function(){Object(o.h)("sl:stat:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"BarUserView",(function(){return s})),r.d(t,"BarLogoView",(function(){return c}));var n=r(2),a=r(54),o=r(1),i=r(3);function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var s=function(e){function t(t,r,n){var a;return(a=e.call(this,t,r)||this)._src=n,a}u(t,e);var r=t.prototype;return r.config=function(){var e=a.c.info.name,t={view:"button"};return t.type=o.l[this._src].type,"iconTop"==t.type?t.icon=o.l[this._src].ress:t[t.type]=o.l[this._src].ress,void 0===o.l[this._src].label?t.label=e:t.label=o.l[this._src].label,t.css=o.l[this._src].css,t.autowidth=!0,"logout"==this._src&&(t.click=function(){webix.confirm({title:"Confirmation",ok:"Oui",cancel:"Non",text:"Voulez-vous vous déconnecter ?"}).then((function(){i.b.app.show("/logout")}))}),t},r.init=function(e){e._app=this.app},t}(n.b),c=function(e){function t(t,r,n){var a;return(a=e.call(this,t,r)||this)._src=n,a}return u(t,e),t.prototype.config=function(){var e=this._src,t="style='float:"+o.l[e].position+";margin:0px;width:"+o.l[e].width+"px;height:"+o.l[e].height+"px'",r={template:"<img src='"+o.l[this._src].ress+"'"+t+">",borderless:!0,css:{"background-color":"#000"},width:54};return r},t}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(9)),o=r(4),i=r(1);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",id:"parc:stat:"+e,_type:e,tooltip:{template:(i.i["parc_"+e].title?i.i["parc_"+e].title:"")+"<br>Def. : "+(i.i["parc_"+e].definition?i.i["parc_"+e].definition+"<br>Variation par rapport au mois dernier":"")},content:{header:i.i["parc_"+e].label,meta:i.i["parc_"+e].desc,shortheader:i.i["parc_"+e].shortlab?i.i["parc_"+e].shortlab:i.i["parc_"+e].label.substr(0,4),seuil:i.i["parc_"+e].wseuil?i.i["parc_"+e].wseuil:200,shortdesc:i.i["parc_"+e].shortdesc?i.i["parc_"+e].shortdesc:i.i["parc_"+e].desc,wdseuil:i.i["parc_"+e].wdseuil?i.i["parc_"+e].wdseuil:200,moblab:i.i["parc_"+e].moblab?i.i["parc_"+e].moblab:i.i["parc_"+e].label.substr(0,3)}}},u.init=function(e){var t=this._kpi;$$("parc:stat:"+t).showProgress(),$$("parc:stat:"+t).disable(),i.i["parc_"+t].title&&e.config.tooltip&&webix.TooltipControl.addTooltip(e.$view,e.config.tooltip.template),i.c.parc.push({cmp:"parc:stat:"+t,data:Object(a.b)("stat").config.id}),Object(a.b)("stat").waitData.then((function(e){$$("parc:stat:"+t).parse(Object(a.b)("stat")),$$("parc:stat:"+t).enable(),$$("parc:stat:"+t).hideProgress()})),$$("parc:stat:"+t).data.attachEvent("onStoreLoad",(function(){Object(o.h)("parc:stat:"+t)})),e.attachEvent("onDestruct",(function(){webix.TooltipControl.removeTooltip(e.$view)}))},n}(n.b)},function(e,t,r){"use strict";r.d(t,"b",(function(){return u})),r.d(t,"a",(function(){return s}));var n=r(1),a=r(4);function o(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=new webix.DataCollection({url:Object(a.d)("menudata"),id:"menudata"}),s=[{id:"i",value:'<span class ="mdi mdi-image"></span>Image'},{id:"p",value:'<span class ="mdi mdi-file-pdf"></span>PDF'},{id:"c",value:'<span class ="mdi mdi-file-delimited"></span>CSV'}];u.waitData.then((function(){for(var e,t=o(u.getRange().map((function(e){return e.id})));!(e=t()).done;){var r=e.value;n.c[r]=[]}console.log(n.c)}))},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(16)),o=r(4),i=r(1);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",id:"rec:stat:"+e,_type:e,tooltip:{template:"<span style='background-color:#1212120d;'>"+(i.i["rec_"+e].title?i.i["rec_"+e].title:"")+"<br>Def. : "+(i.i["rec_"+e].definition?i.i["rec_"+e].definition+"<br>Variation par rapport au mois dernier":"")+"</span>"},content:{header:i.i["rec_"+e].label,meta:i.i["rec_"+e].desc,shortheader:i.i["rec_"+e].shortlab?i.i["rec_"+e].shortlab:i.i["rec_"+e].label.substr(0,4),seuil:i.i["rec_"+e].wseuil?i.i["rec_"+e].wseuil:200,shortdesc:i.i["rec_"+e].shortdesc?i.i["rec_"+e].shortdesc:i.i["rec_"+e].desc,wdseuil:i.i["rec_"+e].wdseuil?i.i["rec_"+e].wdseuil:200,moblab:i.i["rec_"+e].moblab}}},u.init=function(e){var t=this._kpi;e.showProgress(),e.disable(),i.i["rec_"+t].title&&e.config.tooltip&&webix.TooltipControl.addTooltip(e.$view,e.config.tooltip.template),i.c.recharge.push({cmp:"rec:stat:"+t,data:Object(a.b)("stat_type").config.id}),Object(a.b)("stat_type").waitData.then((function(t){e.parse(Object(a.b)("stat_type")),e.enable(),e.hideProgress()})),e.attachEvent("onDestruct",(function(){webix.TooltipControl.removeTooltip(e.$view)})),e.data.attachEvent("onStoreLoad",(function(){Object(o.h)("rec:stat:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(13)),o=r(4),i=r(1);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",id:"traff:stat:"+e,_type:e,tooltip:{template:(i.i["traffic_"+e].title?i.i["traffic_"+e].title:"")+"<br>Def. : "+(i.i["traffic_"+e].definition?i.i["traffic_"+e].definition+"<br>Variation par rapport au mois dernier":"")},content:{header:i.i["traffic_"+e].label,meta:i.i["traffic_"+e].desc,moblab:i.i["traffic_"+e].moblab}}},u.init=function(e){var t=this._kpi;$$("traff:stat:"+t).showProgress(),$$("traff:stat:"+t).disable(),i.i["traffic_"+t].title&&e.config.tooltip&&webix.TooltipControl.addTooltip(e.$view,e.config.tooltip.template),i.c.traffic.push({cmp:"traff:stat:"+t,data:Object(a.b)("stat").config.id}),Object(a.b)("stat").waitData.then((function(e){$$("traff:stat:"+t).parse(Object(a.b)("stat")),$$("traff:stat:"+t).enable(),$$("traff:stat:"+t).hideProgress()})),e.attachEvent("onDestruct",(function(){webix.TooltipControl.removeTooltip(e.$view)})),$$("traff:stat:"+t).data.attachEvent("onStoreLoad",(function(){Object(o.h)("traff:stat:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(14),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return{view:"echarts-grid-dataset",id:"bill:recouvr:vue1:trend",animation:!0,options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=s(e);!(t=n()).done;){var a=t.value;r+=a.marker+a.seriesName+" : "+("recouvr"!=a.seriesId?Object(i.b)(a.value.value):a.value.value.toFixed(2)+"%")+"<br/>"}return r},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,type:"scroll",top:"20",textStyle:{fontSize:12}},title:[{text:a.d.bill.fact_encaissement_trend?a.d.bill.fact_encaissement_trend:"",left:"50%",textAlign:"center",textStyle:{fontSize:12}}],dataset:[{dimensions:["value","name"]},{dimensions:["value","name"]},{dimensions:["value","name"]}],grid:{top:75,left:10,containLabel:!0,bottom:10},xAxis:[{axisLabel:{show:!0},axisTick:{show:!0,alignWithLabel:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}},{type:"value",axisLabel:{formatter:function(e,t){return e.toFixed(2)+"%"}}}],series:[{type:"bar",id:"bill",name:"Facturations",datasetIndex:0,barMinHeight:10,encode:{x:"name",y:"value"},_type:"month_trend",_kpi:"bill_trend"},{type:"bar",id:"paid",name:"Encaissements",datasetIndex:1,barMinHeight:10,encode:{x:"name",y:"value"},_type:"month_trend",_kpi:"paid_trend"},{type:"line",id:"recouvr",name:"Recouvrement",datasetIndex:2,smooth:!0,encode:{x:"name",y:"value"},_type:"month_trend",_kpi:"recouvr_trend",yAxisIndex:1}]}}},c.init=function(e){e.showProgress(),e.disable(),e._filter_level="a",e._months=[],e._days=[],e._current_month=Object(u.a)().d1.substr(0,7),e._current_upd_dt=Object(u.a)().d1,e._kpi="qty",a.c.bills.push({cmp:"bill:recouvr:vue1:trend",data:Object(o.a)("recouv_trend").config.id}),Object(o.a)("recouv_trend").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.a)("recouv_trend")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("bill:recouvr:vue1:trend")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(14),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){this._type;return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"bill:vue1:recouvr:split",options:{tooltip:{trigger:"axis",show:!0,position:function(e,t,r,n,a){var o={top:e[1]+5};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},animation:!0,title:[{text:a.d.bill.recouv_by_prod?a.d.bill.recouv_by_prod:"",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],grid:[{left:5,bottom:10,top:25,containLabel:!0}],yAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],xAxis:[{type:"category",axisLabel:{show:!0,align:"left",rotate:-15},splitLine:{show:!1},axisTick:{show:!0},axisLine:{show:!0}}],legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10}},dataset:[{dimensions:["off_group","recouvr"]}],series:[{type:"bar",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:30,barMinHeight:10,encode:{y:"recouvr",x:"off_group"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.recouvr)}},itemStyle:{color:function(t){return e.parcOff[t.value.off_group]}},label:{normal:{position:"right",show:!0,formatter:function(e){return Object(i.b)(e.data.recouvr)}}}}]}}}))},u.init=function(e){$$("bill:vue1:recouvr:split").showProgress(),$$("bill:vue1:recouvr:split").disable(),a.c.bills.push({cmp:"bill:vue1:recouvr:split",data:Object(o.a)("recouvr_split").config.id}),Object(o.a)("recouvr_split").waitData.then((function(e){$$("bill:vue1:recouvr:split")._isDataLoaded=1,$$("bill:vue1:recouvr:split").parse(Object(o.a)("recouvr_split")),$$("bill:vue1:recouvr:split").enable(),$$("bill:vue1:recouvr:split").hideProgress()})),$$("bill:vue1:recouvr:split").data.attachEvent("onStoreLoad",(function(){Object(i.j)("bill:vue1:recouvr:split")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(14),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e={view:"echarts-grid-dataset",id:"pay:vue1:meth",maxHeight:"small"==Object(i.e)()||"mobile"==Object(i.e)()?150:225,options:{tooltip:{trigger:"axis",show:!0,textStyle:{fontSize:10},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,bottom:"5",type:"scroll"},animation:!0,title:[{text:a.d.bill.enc_mode?a.d.bill.enc_mode:"",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],grid:[{height:"90%",left:5,bottom:5,top:20,containLabel:!0}],dataset:[{dimensions:["method","amount"]}],series:[{type:"pie",radius:["40%","50%"],minAngle:10,datasetIndex:0,tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.amount)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!1,encode:{itemName:"method",value:"amount",tooltip:"amount"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},label:{show:!0,fontSize:"15",fontWeight:"bold"}},label:{show:!1,position:"center"},labelLine:{show:!1}}]}};return"mobile_rotated"==Object(i.e)()&&(e.maxWidth=190),e},u.init=function(e){e.showProgress(),e.disable(),a.c.bills.push({cmp:"pay:vue1:meth",data:Object(o.a)("pay_meth").config.id}),Object(o.a)("pay_meth").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.a)("pay_meth")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("pay:vue1:meth")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(14),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){this._type;return{view:"echarts-grid-dataset",id:"bill:vue1:loc",animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},title:[{text:a.d.bill.fact_by_zone?a.d.bill.fact_by_zone:"",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(e){return e.name+" : "+Object(i.h)(e.value)}},series:[{name:"Localisation",type:"treemap",leafDepth:1,levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}]}]}}},u.init=function(e){e.showProgress(),e.disable(),e._expDataId=Object(o.a)("bill_loc_exp").config.id,e._eType="treemap",a.c.bills.push({cmp:"bill:vue1:loc",data:Object(o.a)("bill_loc").config.id}),a.c.bills.push({cmp:"bill:vue1:loc",data:Object(o.a)("bill_loc_exp").config.id}),Object(o.a)("bill_loc").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.a)("bill_loc")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("bill:vue1:loc")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=r(14),o=r(0),i=r(1);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"datatable",id:"agent:tab:vue1",css:"webix_header_border",scrollX:!0,resizeColumn:!0,columns:[{id:"agent",header:{text:"Agent",css:{"text-align":"left"}},sort:"string",fillspace:2,adjust:!0,css:{"text-align":"left"}},{id:"qty",fillspace:1,header:{text:"Nombre",css:{"text-align":"center"}},adjust:!0,css:{"text-align":"center"},sort:"int"},{id:"amount",fillspace:2,header:{text:"Montant",css:{"text-align":"center"}},adjust:!0,css:{"text-align":"right"},sort:"int",format:function(e){return e<0?"-":Object(o.b)(e)}}],select:!0}},u.init=function(e){webix.extend(e,webix.ProgressBar),e.showProgress(),e.disable(),i.c.bills.push({cmp:"agent:tab:vue1",data:Object(a.a)("agent_tab").config.id}),Object(a.a)("agent_tab").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(a.a)("agent_tab")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(o.j)("agent:tab:vue1")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(14),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){this._type;return{view:"echarts-grid-dataset",id:"bill:vue1:billag",animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},title:[{text:a.d.bill.fact_by_agg?a.d.bill.fact_by_agg:"",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(e){return e.name+" : "+Object(i.h)(e.value)}},series:[{name:"Agrégat",type:"treemap",leafDepth:1,levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}]}]}}},u.init=function(e){e.showProgress(),e.disable(),e._expDataId=Object(o.a)("bill_agg_exp").config.id,e._eType="treemap",a.c.bills.push({cmp:"bill:vue1:billag",data:Object(o.a)("bill_agg").config.id}),a.c.bills.push({cmp:"bill:vue1:export:billag",data:Object(o.a)("bill_agg_exp").config.id}),Object(o.a)("bill_agg").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.a)("bill_agg")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("bill:vue1:billag")}))},n}(n.b)},function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return i}));var n=r(1),a=r(3),o={};function i(e){var t=e.getService("user");o.info=t.getUser()}t.a={status:function(){return n.k.waitData.then((function(e){var t=n.o.login_url;return webix.ajax().post(t+"?token="+Object(a.f)()+"&status").then((function(e){return e.json()}))}))},login:function(e,t){return n.k.waitData.then((function(r){var o=n.o.login_url;return webix.ajax().post(o,{user:e,pass:t}).then((function(e){return Object(a.h)(e.json().api_token),e.json()}))}))},logout:function(){return n.k.waitData.then((function(e){var t=n.o.login_url;return webix.ajax().post(t+"?token="+Object(a.f)()+"&logout").then((function(e){return Object(a.h)(""),webix.storage.session.remove("tk"),e.json()}))}))}}},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(27),r(1)),o=r(11),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"home:parc:offers:prod",options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:e[1]+5};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},animation:!0,title:[{text:a.d.home.parc_by_prod?a.d.home.parc_by_prod:"Parc par produit",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],grid:[{left:5,bottom:10,top:20,right:"20%",containLabel:!0}],xAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"category",axisLabel:{interval:0,textStyle:{fontSize:10}},splitLine:{show:!1},axisTick:{show:!0}}],dataset:[{dimensions:["off_group","qty"]}],series:[{type:"bar",_type:"off_split",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:30,barMinHeight:10,encode:{x:"qty",y:"off_group"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.qty)}},itemStyle:{color:function(t){return e.parcOff[t.value.off_group]}},label:{normal:{position:"right",show:!0},formatter:function(e){return Object(i.h)(e.value)}}}]}}}))},u.init=function(e){var t="prod";$$("home:parc:offers:"+t).showProgress(),$$("home:parc:offers:"+t).disable(),a.c.home.push({cmp:"home:parc:offers:"+t,data:Object(o.b)("parc_prod").config.id}),Object(o.b)("parc_prod").waitData.then((function(e){$$("home:parc:offers:"+t)._isDataLoaded=1,$$("home:parc:offers:"+t).parse(Object(o.b)("parc_prod")),$$("home:parc:offers:"+t).enable(),$$("home:parc:offers:"+t).hideProgress()})),$$("home:parc:offers:"+t).data.attachEvent("onStoreLoad",(function(){Object(i.j)("home:parc:offers:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=(r(27),r(1)),o=r(11),i=r(0),u=r(4);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"echarts-grid-dataset",id:"home:vue1:trend:parc",minHeight:80,charts_event:{click:[{seriesId:"home:parc_split",seriesType:"bar"},function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=this;this.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),this._clicked&&(t=!0,r._clicked=!1,clearTimeout(this.executeDoubleClick))}if(t)if($("button.ui.button.parcHome_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("home:vue1:trend:parc")._months||($$("home:vue1:trend:parc")._months=[]),$$("home:vue1:trend:parc")._months.some((function(t){return t==e.data.month})))$$("home:vue1:trend:parc")._filter_level="m",$$("home:vue1:trend:parc")._current_month=e.data.month,$$("home:vue1:trend:parc").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||"op_split"==t._type||"bill_split"==t._type)}));else{var n=Object(o.a)("parc","dt_trend",e.data.month+"-01");$$("home:vue1:trend:parc").showProgress(),$$("home:vue1:trend:parc").disable(),n.then((function(t){$$("home:vue1:trend:parc")._months.push(e.data.month),$$("home:vue1:trend:parc")._filter_level="m",$$("home:vue1:trend:parc").parse(n).then((function(){$$("home:vue1:trend:parc").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||"op_split"==t._type||"bill_split"==t._type)}))})),$$("home:vue1:trend:parc")._current_month=e.data.month,$$("home:vue1:trend:parc").enable(),$$("home:vue1:trend:parc").hideProgress()}))}else this._clicked=!0}]},options:{tooltip:{trigger:"axis",show:!0,axisPointer:{show:!0},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){var t=e[0].name+"<br/>",r=e[0].dimensionNames[1];return t+=e[0].marker+Object(i.b)(e[0].data[r])}},grid:[{left:5,bottom:5,top:6,containLabel:!0}],xAxis:[{type:"category",splitLine:{show:!1},axisPointer:{show:!0},axisTick:{show:!0,alignWithLabel:!0}}],yAxis:[{type:"value",isDim:!0,_type:"trend",_dim:"value",splitNumber:4,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],title:[{text:a.d.parc.parc_trend,top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],dataset:[{dimensions:["month","trend"]},{dimensions:["upd_dt","trend_dt"]}],series:[{type:"line",encode:{x:"month",y:"trend"},datasetIndex:0,_type:"month_trend",id:"home:parc_split",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"blue"},{offset:1,color:"white"}],global:!1}},smooth:!0,lineStyle:{color:"blue",width:2.5},itemStyle:{color:"blue"},z:3},{type:"line",encode:{x:"upd_dt",y:"trend_dt"},_type:"dt_trend",datasetIndex:1,barMaxWidth:20,barMinHeight:10,itemStyle:{color:"blue"}}]}}},s.init=function(e){$$("home:vue1:trend:parc").showProgress(),$$("home:vue1:trend:parc").disable(),a.c.home.push({cmp:"home:vue1:trend:parc",data:Object(o.b)("parc_trend").config.id}),$$("home:vue1:trend:parc")._months=[],$$("home:vue1:trend:parc")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:parc")._filter_level="a",Object(o.b)("parc_trend").waitData.then((function(e){$$("home:vue1:trend:parc")._isDataLoaded=1,$$("home:vue1:trend:parc").parse(Object(o.b)("parc_trend")),$$("home:vue1:trend:parc").enable(),$$("home:vue1:trend:parc").hideProgress()})),$$("home:vue1:trend:parc").data.attachEvent("onStoreLoad",(function(){Object(i.j)("home:vue1:trend:parc")})),Object(o.b)("parc_trend").data.attachEvent("onClearAll",(function(){"home"==$$("top:menu").getSelectedId()&&($$("home:vue1:trend:parc")._months=[],$$("home:vue1:trend:parc")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:parc")._filter_level="a")}))},s.ready=function(e){$$("parcHome").attachEvent("onAfterRender",(function(){$("button.ui.button.parcHome_"+periodSplit[1]).on("click",(function(){if("a"==e._filter_level)if(e._filter_level="m",e._months.some((function(t){return t==e._current_month})))e.data.filter((function(t){return"month_trend"!=t._type&&(t.period==e._current_month||"op_split"==t._type||"bill_split"==t._type)}));else{var t=Object(o.a)("parc","dt_trend",e._current_month+"-01");e.showProgress(),e.disable(),t.then((function(r){e._months.push(e._current_month),e.parse(t).then((function(){e.data.filter((function(t){return"month_trend"!=t._type&&(t.period==e._current_month||"op_split"==t._type||"bill_split"==t._type)}))})),e._current_month=e._current_month,e.enable(),e.hideProgress()}))}})),$("button.ui.button.parcHome_"+periodSplit[0]).on("click",(function(){e&&"m"==e._filter_level&&(e._filter_level="a",e.data.filter((function(e){return"dt_trend"!=e._type})))}))}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(27),r(1)),o=r(11),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){this._kpi;return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"pay:vue1:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[];if(e.sort(),0!=e.length){var d=e.map((function(e){return e.clt_type})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==e[0]._type?e.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","revenue"],source:e.filter((function(e){return e.clt_type==r&&"month_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.payments[r]},stack:"split",id:"pay_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,barMaxWidth:40,_isStack:!0,name:r,encode:{x:"month",y:"revenue"},gridIndex:1})),e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","revenue"],source:e.filter((function(e){return e.clt_type==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.payments[r]},itemStyle:{color:t.payments[r]},_isStack:!0,name:r,encode:{x:"upd_dt",y:"revenue"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"pay_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.payments[r])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=c.length&&(r.color=[].concat(c)),0!=u.length&&(r.series=[].concat(u,r.series)),r.legend.selectedMode="multiple",r.xAxis[0].data=[].concat(l)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+(r.revenue[o.seriesName]?r.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.revenue)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},dataset:[{dimensions:["rev_type","revenue"]}],grid:[{left:5,top:10,right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("pay:vue1:trend").showProgress(),$$("pay:vue1:trend").disable(),$$("pay:vue1:trend")._filter_level="a",$$("pay:vue1:trend")._months=[],$$("pay:vue1:trend")._days=[],$$("pay:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("pay:vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.home.push({cmp:"pay:vue1:trend",data:Object(o.b)("pay_trend").config.id}),Object(o.b)("pay_trend").waitData.then((function(e){$$("pay:vue1:trend")._isDataLoaded=1,$$("pay:vue1:trend").parse(Object(o.b)("pay_trend")),$$("pay:vue1:trend").enable(),$$("pay:vue1:trend").hideProgress(),$$("pay:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("pay:vue1:trend")})),Object(o.b)("pay_trend").data.attachEvent("onClearAll",(function(){"home"==$$("top:menu").getSelectedId()&&($$("pay:vue1:trend")._filter_level="a",$$("pay:vue1:trend")._months=[],$$("pay:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("pay:vue1:trend")._current_upd_dt=Object(u.a)().d1)}))})),$("button.ui.button.payByType_"+periodSplit[1]).on("click",(function(){"m"!=$$("pay:vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("pay:vue1:trend")._current_month}})})),$("button.ui.button.payByType_"+periodSplit[0]).on("click",(function(){"m"==$$("pay:vue1:trend")._filter_level&&($$("pay:vue1:trend")._filter_level="a",$$("pay:vue1:trend").data.filter((function(e){return"month_trend"==e._type})))}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.payByType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("pay:vue1:trend")._months||($$("pay:vue1:trend")._months=[]),$$("pay:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("pay:vue1:trend")._filter_level="m",$$("pay:vue1:trend")._current_month=e.data.month,$$("pay:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("pay","dt_trend",e.data.month+"-01","vue2");$$("pay:vue1:trend").showProgress(),$$("pay:vue1:trend").disable(),t.then((function(r){$$("pay:vue1:trend")._months.push(e.data.month),$$("pay:vue1:trend")._filter_level="m",$$("pay:vue1:trend").parse(t).then((function(){$$("pay:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("pay:vue1:trend")._current_month=e.data.month,$$("pay:vue1:trend").enable(),$$("pay:vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(27),r(1)),o=r(11),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"rev:vue1:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[],d=e.map((function(e){return e.rev_type})).filter((function(e,t,r){return r.indexOf(e)==t}));if(0!=e.length){var l=[];"month_trend"==e[0]._type&&(e.sort((function(e,t){return t.month<e.month?1:-1})),l=e.map((function(e){return e.month})).filter((function(e){return void 0!==e}))),"dt_trend"==e[0]._type&&(e.sort((function(e,t){return t.upd_dt<e.upd_dt?1:-1})),l=e.map((function(e){return e.upd_dt})).filter((function(e){return void 0!==e}))),"slot_trend"==e[0]._type&&(e.sort((function(e,t){return t.slot<e.slot?1:-1})),l=e.map((function(e){return e.slot})).filter((function(e){return void 0!==e}))),l=l.filter((function(e,t,r){return r.indexOf(e)==t})),a.off("click"),d.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","revenue"],source:e.filter((function(e){return e.rev_type==r&&"month_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.revenue[r]},stack:"split",id:"rev_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,_isStack:!0,name:r,encode:{x:"month",y:"revenue"},gridIndex:1})),e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","revenue"],source:e.filter((function(e){return e.rev_type==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.revenue[r]},itemStyle:{color:t.revenue[r]},_isStack:!0,name:r,enable:{x:"upd_dt",y:"revenue"},datasetIndex:s.length,gridIndex:1})),e.some((function(e){return"slot_trend"==e._type}))&&(s.push({dimensions:["slot","revenue"],source:e.filter((function(e){return e.rev_type==r&&"slot_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.revenue[r]},_isStack:!0,name:r,enable:{x:"slot",y:"revenue"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"rev_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.rechargeEC[r])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=l.length&&(r.xAxis[0].data=l),0!=c.length&&(r.color=[].concat(c)),0!=u.length&&(r.series=[].concat(u,r.series)),e.some((function(e){return"slot_trend"==e._type}))?r.legend.selectedMode="single":r.legend.selectedMode="multiple",e.some((function(e){return"dt_trend"==e._type}))&&a.on("click",{seriesType:"line"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeSDoubleClick=setTimeout((function(){r._sclicked=!1}),500),o._sclicked&&(t=!0,r._sclicked=!1,clearTimeout(o.executeSDoubleClick))}t?n.filterSlotHandler(e):o._sclicked=!0}))}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+r.revenue[o.seriesName]+" : "+Object(i.b)(o.value.revenue)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},dataset:[{dimensions:["rev_type","revenue"]}],grid:[{left:5,top:10,right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),$$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend")._months=[],$$("rev:vue1:trend")._days=[],$$("rev:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.home.push({cmp:"rev:vue1:trend",data:Object(o.b)("rev_trend").config.id}),Object(o.b)("rev_trend").waitData.then((function(e){$$("rev:vue1:trend")._isDataLoaded=1,$$("rev:vue1:trend").parse(Object(o.b)("rev_trend")),$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()})),$$("rev:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:trend")})),Object(o.b)("rev_trend").data.attachEvent("onClearAll",(function(){"home"==$$("top:menu").getSelectedId()&&($$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend")._months=[],$$("rev:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend")._current_upd_dt=Object(u.a)().d1)})),$("button.ui.button.revByType_"+periodSplit[1]).on("click",(function(){"m"!=$$("rev:vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("rev:vue1:trend")._current_month}})})),$("button.ui.button.revByType_"+periodSplit[2]).on("click",(function(){"s"!=$$("rev:vue1:trend")._filter_level&&n.filterSlotHandler({data:{upd_dt:$$("rev:vue1:trend")._current_upd_dt,seriesName:$$("rev:vue1:trend")._current_serie_selected}})})),$("button.ui.button.revByType_"+periodSplit[0]).on("click",(function(){"m"!=$$("rev:vue1:trend")._filter_level&&"s"!=$$("rev:vue1:trend")._filter_level||($$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend").data.filter((function(e){return"month_trend"==e._type||"rev_split"==e._type})))}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.revByType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:trend")._months||($$("rev:vue1:trend")._months=[]),$$("rev:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("rev:vue1:trend")._filter_level="m",$$("rev:vue1:trend")._current_month=e.data.month,$$("rev:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}));else{var t=Object(o.a)("revenue","vue2",e.data.month+"-01");$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),t.then((function(r){$$("rev:vue1:trend")._months.push(e.data.month),$$("rev:vue1:trend")._filter_level="m",$$("rev:vue1:trend").parse(t).then((function(){$$("rev:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}))})),$$("rev:vue1:trend")._current_month=e.data.month,$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()}))}},n.filterSlotHandler=function(e){if(e.data)if($("button.ui.button.revByType_"+periodSplit[2]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:trend")._days||($$("rev:vue1:trend")._days=[]),$$("rev:vue1:trend")._days.some((function(t){return t==e.data.upd_dt})))$$("rev:vue1:trend")._filter_level="s",$$("rev:vue1:trend")._current_upd_dt=e.data.upd_dt,$$("rev:vue1:trend").config.options.legend.selected={},$$("rev:vue1:trend").config.options.legend.selected[e.seriesName]=!0,$$("rev:vue1:trend").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt||"rev_split"==t._type}));else{var t=Object(o.a)("revenue","vue3",e.data.upd_dt,"vue3");$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),t.then((function(r){$$("rev:vue1:trend")._days.push(e.data.upd_dt),$$("rev:vue1:trend")._filter_level="s",$$("rev:vue1:trend").config.options.legend.selected={},$$("rev:vue1:trend").config.options.legend.selected[e.seriesName]=!0,$$("rev:vue1:trend").parse(t).then((function(){$$("rev:vue1:trend").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt||"rev_split"==t._type}))})),$$("rev:vue1:trend")._current_upd_dt=e.data.upd_dt,$$("rev:vue1:trend")._current_serie_selected=e.seriesName,$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=(r(27),r(1)),o=r(11),i=r(0),u=r(4);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"echarts-grid-dataset",id:"home:vue1:trend:topup",animation:!0,charts_event:{click:[{seriesId:"home:topup_split",seriesType:"bar"},function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=this;this.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),this._clicked&&(t=!0,r._clicked=!1,clearTimeout(this.executeDoubleClick))}if(t)if($("button.ui.button.topupHome_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("home:vue1:trend:topup")._months||($$("home:vue1:trend:topup")._months=[]),$$("home:vue1:trend:topup")._months.some((function(t){return t==e.data.month})))$$("home:vue1:trend:topup")._filter_level="m",$$("home:vue1:trend:topup")._current_month=e.data.month,$$("home:vue1:trend:topup").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||t.rec_type)}));else{var n=Object(o.a)("topup","dt_trend",e.data.month+"-01");$$("home:vue1:trend:topup").showProgress(),$$("home:vue1:trend:topup").disable(),n.then((function(t){$$("home:vue1:trend:topup")._months.push(e.data.month),$$("home:vue1:trend:topup")._filter_level="m",$$("home:vue1:trend:topup").parse(n).then((function(){$$("home:vue1:trend:topup").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||t.rec_type)}))})),$$("home:vue1:trend:topup")._current_month=e.data.month,$$("home:vue1:trend:topup").enable(),$$("home:vue1:trend:topup").hideProgress()}))}else this._clicked=!0}]},options:{tooltip:{trigger:"axis",show:!0,z:2,axisPointer:{show:!0},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){var t=e[0].name+"<br/>",r=e[0].dimensionNames[1];return t+=e[0].marker+Object(i.b)(e[0].data[r])}},grid:[{top:6,bottom:3,left:5,containLabel:!0}],dataset:[{dimensions:["month","trend"]},{dimensions:["upd_dt","trend_dt"]}],xAxis:[{type:"category",isDim:!0,_type:"trend",splitLine:{show:!1},axisPointer:{show:!0},axisLabel:{show:!0},axisTick:{show:!0,alignWithLabel:!0}}],yAxis:[{type:"value",isDim:!0,splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[{type:"line",encode:{x:"month",y:"trend"},datasetIndex:0,_type:"month_trend",id:"home:topup_split",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"orange"},{offset:1,color:"white"}],global:!1}},smooth:!0,lineStyle:{color:"orange",width:2.5},itemStyle:{color:"orange"},z:3},{type:"line",encode:{x:"upd_dt",y:"trend_dt"},_type:"dt_trend",datasetIndex:1}]}}},s.init=function(e){$$("home:vue1:trend:topup").showProgress(),$$("home:vue1:trend:topup").disable(),a.c.home.push({cmp:"home:vue1:trend:topup",data:Object(o.b)("month_trend").config.id}),$$("home:vue1:trend:topup")._months=[],$$("home:vue1:trend:topup")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:topup")._filter_level="a",Object(o.b)("month_trend").waitData.then((function(e){$$("home:vue1:trend:topup")._isDataLoaded=1,$$("home:vue1:trend:topup").parse(Object(o.b)("month_trend")),$$("home:vue1:trend:topup").enable(),$$("home:vue1:trend:topup").hideProgress()})),$$("home:vue1:trend:topup").data.attachEvent("onStoreLoad",(function(){Object(i.j)("home:vue1:trend:topup")})),Object(o.b)("month_trend").data.attachEvent("onClearAll",(function(){"home"==$$("top:menu").getSelectedId()&&($$("home:vue1:trend:topup")._months=[],$$("home:vue1:trend:topup")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:topup")._filter_level="a")}))},s.ready=function(e){$$("topupHome").attachEvent("onAfterRender",(function(){$("button.ui.button.topupHome_"+periodSplit[1]).on("click",(function(){if("a"==e._filter_level)if(e._filter_level="m",e._months.some((function(t){return t==e._current_month})))e.data.filter((function(t){return"month_trend"!=t._type&&(t.period==e._current_month||t.rec_type)}));else{var t=Object(o.a)("topup","dt_trend",e._current_month+"-01");e.showProgress(),e.disable(),t.then((function(r){e._months.push(e._current_month),e.parse(t).then((function(){e.data.filter((function(t){return"month_trend"!=t._type&&(t.period==e._current_month||t.rec_type)}))})),e._current_month=e._current_month,e.enable(),e.hideProgress()}))}})),$("button.ui.button.topupHome_"+periodSplit[0]).on("click",(function(){e&&"m"==e._filter_level&&(e._filter_level="a",e.data.filter((function(e){return"dt_trend"!=e._type})))}))}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=(r(27),r(1)),o=r(11),i=r(0),u=r(4);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"echarts-grid-dataset",id:"home:vue1:trend:arpu",animation:!0,charts_event:{click:[{seriesId:"home:arpu_split"},function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=this;this.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),this._clicked&&(t=!0,r._clicked=!1,clearTimeout(this.executeDoubleClick))}if(t)if($("button.ui.button.arpuHome_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("home:vue1:trend:arpu")._months||($$("home:vue1:trend:arpu")._months=[]),$$("home:vue1:trend:arpu")._months.some((function(t){return t==e.data.month})))$$("home:vue1:trend:arpu")._filter_level="m",$$("home:vue1:trend:arpu")._current_month=e.data.month,$$("home:vue1:trend:arpu").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||t.rec_type)}));else{var n=Object(o.a)("arpu","dt_trend",e.data.month+"-01");$$("home:vue1:trend:arpu").showProgress(),$$("home:vue1:trend:arpu").disable(),n.then((function(t){$$("home:vue1:trend:arpu")._months.push(e.data.month),$$("home:vue1:trend:arpu")._filter_level="m",$$("home:vue1:trend:arpu").parse(n).then((function(){$$("home:vue1:trend:arpu").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||t.rec_type)}))})),$$("home:vue1:trend:arpu")._current_month=e.data.month,$$("home:vue1:trend:arpu").enable(),$$("home:vue1:trend:arpu").hideProgress()}))}else this._clicked=!0}]},options:{tooltip:{trigger:"axis",show:!0,z:2,axisPointer:{show:!0},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){var t=e[0].name+"<br/>",r=e[0].dimensionNames[1];return t+=e[0].marker+Object(i.b)(e[0].data[r])}},grid:[{top:6,bottom:3,left:5,containLabel:!0}],dataset:[{dimensions:["month","trend"]},{dimensions:["upd_dt","trend_dt"]}],xAxis:[{type:"category",isDim:!0,_type:"trend",splitLine:{show:!1},axisPointer:{show:!0},axisLabel:{show:!0},axisTick:{show:!0,alignWithLabel:!0}}],yAxis:[{type:"value",isDim:!0,splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[{type:"line",encode:{x:"month",y:"trend"},datasetIndex:0,_type:"month_trend",id:"home:arpu_split",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"grey"},{offset:1,color:"white"}],global:!1}},smooth:!0,lineStyle:{color:"grey",width:2.5},itemStyle:{color:"grey"},z:3},{type:"line",encode:{x:"upd_dt",y:"trend_dt"},_type:"dt_trend",datasetIndex:1}]}}},s.init=function(e){$$("home:vue1:trend:arpu").showProgress(),$$("home:vue1:trend:arpu").disable(),a.c.home.push({cmp:"home:vue1:trend:arpu",data:Object(o.b)("trend_arpu").config.id}),$$("home:vue1:trend:arpu")._months=[],$$("home:vue1:trend:arpu")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:arpu")._filter_level="a",Object(o.b)("trend_arpu").waitData.then((function(e){$$("home:vue1:trend:arpu")._isDataLoaded=1,$$("home:vue1:trend:arpu").parse(Object(o.b)("trend_arpu")),$$("home:vue1:trend:arpu").enable(),$$("home:vue1:trend:arpu").hideProgress()})),$$("home:vue1:trend:arpu").data.attachEvent("onStoreLoad",(function(){Object(i.j)("home:vue1:trend:arpu")})),Object(o.b)("trend_arpu").data.attachEvent("onBeforeLoad",(function(){"home"==$$("top:menu").getSelectedId()&&($$("home:vue1:trend:arpu")._months=[],$$("home:vue1:trend:arpu")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:arpu")._filter_level="a")}))},s.ready=function(e){$$("arpuHome").attachEvent("onAfterRender",(function(){$("button.ui.button.arpuHome_"+periodSplit[1]).on("click",(function(){if("a"==e._filter_level)if(e._filter_level="m",e._months.some((function(t){return t==e._current_month})))e.data.filter((function(t){return"month_trend"!=t._type&&(t.period==e._current_month||t.rec_type)}));else{var t=Object(o.a)("arpu","dt_trend",e._current_month+"-01");e.showProgress(),e.disable(),t.then((function(r){e._months.push(e._current_month),e.parse(t).then((function(){e.data.filter((function(t){return"month_trend"!=t._type&&(t.period==e._current_month||t.rec_type)}))})),e._current_month=e._current_month,e.enable(),e.hideProgress()}))}})),$("button.ui.button.arpuHome_"+periodSplit[0]).on("click",(function(){e&&"m"==e._filter_level&&(e._filter_level="a",e.data.filter((function(e){return"dt_trend"!=e._type})))}))}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(27),r(1)),o=r(11),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){for(var e,t=[],r=[],o=[],u=[],c=function(){var n=e.value;r.push({dimensions:["month","traffic"]},{dimensions:["upd_dt","traffic"]},{dimensions:["slot","traffic"]});var s=a.n[n]?a.n[n].index:0;o.push({type:"value",position:"left",axisLabel:{formatter:function(e,t){return n.indexOf("data")>=0?Object(i.a)(e):Object(i.h)(e)}},splitLine:{show:!0}}),u.push({type:"category",splitNumber:6,position:"bottom",_type:n,show:0==s,splitLine:{show:!1},axisPointer:{show:0==s},axisTick:{show:0==s,alignWithLabel:0==s}}),t.push({type:"line",gridIndex:1,encode:{x:"month",y:"traffic"},seriesLayoutBy:"row",datasetIndex:r.length-3,_kpi:n,name:n,yAxisIndex:s,xAxisIndex:s,_type:"month_trend",id:"traff:month_split:"+n,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"voice"==n?"red":"sms"==n?"green":"blue"},{offset:1,color:"white"}],global:!1}},smooth:!0,lineStyle:{color:"voice"==n?"red":"sms"==n?"green":"blue",width:2.5},itemStyle:{color:"voice"==n?"red":"sms"==n?"green":"blue"},z:3},{type:"line",gridIndex:1,encode:{x:"upd_dt",y:"traffic"},_type:"dt_trend",_kpi:n,id:"traff:dt_split:"+n,datasetIndex:r.length-2,name:n,itemStyle:{color:"voice"==n?"red":"sms"==n?"green":"blue"},yAxisIndex:s,xAxisIndex:s},{type:"bar",gridIndex:1,encode:{x:"slot",y:"traffic"},_kpi:n,_type:"slot_trend",id:"traff:slot_split:"+n,datasetIndex:r.length-1,name:n,itemStyle:{color:"voice"==n?"red":"sms"==n?"green":"blue"},yAxisIndex:s,xAxisIndex:s})},d=s(traffType);!(e=d()).done;)c();return webix.promise.all([a.a,a.e]).then((function(e){e[0];var c=e[1];return{view:"echarts-grid-dataset",id:"home:vue1:trend:traff",animation:!0,beforedisplay:function(e,t,r){var o=this;r.off("click");var u=t.xAxis;r.on("legendselectchanged",(function(e){r.setOption({title:{text:a.n[e.name].name},xAxis:u.map((function(t){var r=t._type==e.name;return t.show=r,t.axisPointer={show:r},t.axisTick={show:r,alignWithLabel:r},t}))})}));for(var c,d=s(traffType);!(c=d()).done;){var l=c.value;r.on("click",{seriesId:"traff:month_split:"+l},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),r.on("click",{seriesId:"traff:dt_split:"+l},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),r.on("click",{seriesId:"traff:slot_split:"+l},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0}))}},options:{legend:{show:!0,itemGap:20,bottom:5,selectedMode:"single",type:"scroll",textStyle:{fontSize:10},formatter:function(e){return c.revenue[e]?c.revenue[e]:e}},tooltip:{trigger:"axis",show:!0,z:2,axisPointer:{show:!0},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){var t=e[0].name+"<br/>",r=e[0].dimensionNames[1];return t+=e[0].marker+Object(i.b)(e[0].data[r])}},title:{text:a.n.voice.name,left:"20%",textAlign:"center",textStyle:{fontSize:10}},grid:[{left:5,right:5,top:20,bottom:15,containLabel:!0}],dataset:r,xAxis:u,yAxis:o,series:t}}}))},c.init=function(e){$$("home:vue1:trend:traff").showProgress(),$$("home:vue1:trend:traff").disable(),a.c.home.push({cmp:"home:vue1:trend:traff",data:Object(o.b)("traffic_split").config.id}),$$("home:vue1:trend:traff")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:traff")._months=[],$$("home:vue1:trend:traff")._filter_level="a",$$("home:vue1:trend:traff")._current_upd_dt=Object(u.a)().d1,Object(o.b)("traffic_split").waitData.then((function(e){$$("home:vue1:trend:traff")._isDataLoaded=1,$$("home:vue1:trend:traff").parse(Object(o.b)("traffic_split")),$$("home:vue1:trend:traff").enable(),$$("home:vue1:trend:traff").hideProgress()})),Object(o.b)("traffic_split").data.attachEvent("onClearAll",(function(){"home"==$$("top:menu").getSelectedId()&&($$("home:vue1:trend:traff")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:traff")._months=[],$$("home:vue1:trend:traff")._filter_level="a",$$("home:vue1:trend:traff")._current_upd_dt=Object(u.a)().d1)})),$$("home:vue1:trend:traff").data.attachEvent("onStoreLoad",(function(){Object(i.j)("home:vue1:trend:traff")})),$$("traff_per").attachEvent("onAfterRender",(function(){$("button.ui.button.traff_per_"+periodSplit[1]).on("click",(function(){"m"!=$$("home:vue1:trend:traff")._filter_level&&n.filterHandler({data:{month:$$("home:vue1:trend:traff")._current_month,_type:"month_trend"}})})),$("button.ui.button.traff_per_"+periodSplit[2]).on("click",(function(){"s"!=$$("home:vue1:trend:traff")._filter_level&&n.filterHandler({data:{upd_dt:$$("home:vue1:trend:traff")._current_upd_dt,_type:"dt_trend",seriesName:$$("home:vue1:trend:traff")._current_serie_selected}})})),$("button.ui.button.traff_per_"+periodSplit[0]).on("click",(function(){"m"!=$$("home:vue1:trend:traff")._filter_level&&"s"!=$$("home:vue1:trend:traff")._filter_level||($$("home:vue1:trend:traff")._filter_level="a",$$("home:vue1:trend:traff").data.filter((function(e){return"month_trend"==e._type})))}))}))},c.ready=function(e){$$("traff_per").callEvent("onAfterRender")},n.filterHandler=function(e){if(e.data)switch(e.data._type){case"month_trend":if($("button.ui.button.traff_per_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("home:vue1:trend:traff")._months||($$("home:vue1:trend:traff")._months=[]),$$("home:vue1:trend:traff")._months.some((function(t){return t==e.data.month})))$$("home:vue1:trend:traff")._filter_level="m",$$("home:vue1:trend:traff")._current_month=e.data.month,$$("home:vue1:trend:traff").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("traffic","vue2",e.data.month+"-01","vue2");$$("home:vue1:trend:traff").showProgress(),$$("home:vue1:trend:traff").disable(),t.then((function(r){$$("home:vue1:trend:traff")._months.push(e.data.month),$$("home:vue1:trend:traff")._filter_level="m",$$("home:vue1:trend:traff").parse(t).then((function(){$$("home:vue1:trend:traff").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("home:vue1:trend:traff")._current_month=e.data.month,$$("home:vue1:trend:traff").enable(),$$("home:vue1:trend:traff").hideProgress()}))}break;case"dt_trend":if($("button.ui.button.traff_per_"+periodSplit[2]).addClass("active").siblings().removeClass("active"),$$("home:vue1:trend:traff")._days||($$("home:vue1:trend:traff")._days=[]),$$("home:vue1:trend:traff")._days.some((function(t){return t==e.data.upd_dt})))$$("home:vue1:trend:traff")._filter_level="s",$$("home:vue1:trend:traff")._current_upd_dt=e.data.upd_dt,$$("home:vue1:trend:traff").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}));else{var r=Object(o.a)("traffic","vue3",e.data.upd_dt,"vue3");$$("home:vue1:trend:traff").showProgress(),$$("home:vue1:trend:traff").disable(),r.then((function(t){$$("home:vue1:trend:traff")._days.push(e.data.upd_dt),$$("home:vue1:trend:traff")._filter_level="s",$$("home:vue1:trend:traff").parse(r).then((function(){$$("home:vue1:trend:traff").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}))})),$$("home:vue1:trend:traff")._current_upd_dt=e.data.upd_dt,$$("home:vue1:trend:traff")._current_serie_selected=e.seriesName,$$("home:vue1:trend:traff").enable(),$$("home:vue1:trend:traff").hideProgress()}))}}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"parc:vue1:grpoff:prod",animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},title:[{text:a.d.parc.by_prod_by_offer?a.d.parc.by_prod_by_offer:"",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(e){return e.name+" : "+Object(i.h)(e.value)}},series:[{name:"Parc",type:"treemap",leafDepth:1,levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}]}]}}},u.init=function(e){e.showProgress(),e.disable(),e._eType="treemap",e._expDataId=Object(o.b)("parc_offer_grp_exp").config.id,a.c.parc.push({cmp:"parc:vue1:grpoff:prod",data:Object(o.b)("parc_offer_grp").config.id}),a.c.parc.push({cmp:"parc_offer_grp_exp",data:Object(o.b)("parc_offer_grp_exp").config.id}),Object(o.b)("parc_offer_grp").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.b)("parc_offer_grp")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:grpoff:prod")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"parc:vue1:netadd",animation:!0,beforedisplay:function(e,t){var r=e.filter((function(e){return e.upd_dt}));t.xAxis[0].data=r.map((function(e){return e.upd_dt})).sort()},options:{tooltip:{trigger:"item",show:!0,z:2,position:function(e,t,r,n,a){var o={top:e[1]};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},title:[{text:a.d.parc.parc_mvt?a.d.parc.parc_mvt:"",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}},{text:a.d.parc.net_add_trend?a.d.parc.net_add_trend:"",left:"50%",top:"49%",textAlign:"center",textStyle:{fontSize:12}}],legend:{show:!0,type:"scroll",textStyle:{fontSize:10},top:"20"},grid:[{top:70,height:"25%",width:"25%",right:"40%",containLabel:!0},{bottom:"30",top:"55%",right:"5",left:"5",containLabel:!0}],dataset:[{dimensions:["upd_dt","netadd"]},{dimensions:["upd_dt","netadd"]},{dimensions:["mvt","qty"]}],dataZoom:[{type:"inside",start:50,end:100},{show:!0,type:"slider",bottom:5,start:50,end:100}],xAxis:[{splitLine:{show:!1},axisLabel:{show:!0},axisTick:{show:!0},gridIndex:1}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},gridIndex:1}],series:[{type:"pie",radius:["20%","30%"],center:["50%","35%"],_type:"mvt_split",datasetIndex:2,tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.qty)+" ("+e.percent+"%)"}},selectedMode:"single",emphasis:{label:{show:!0,fontSize:"15",fontWeight:"bold"}},avoidLabelOverlap:!1,label:{show:!1,position:"center"},labelLine:{show:!1},encode:{itemName:"mvt",value:"qty",tooltip:"qty"}},{type:"bar",encode:{x:"upd_dt",y:"netadd"},_type:"plus",datasetIndex:0,id:"parc:netadd",gridIndex:1,itemStyle:{color:"rgba(69, 227, 29, 1)"},z:3,barMinWidth:7,barMinHeight:10},{type:"bar",encode:{x:"upd_dt",y:"netadd"},_type:"minus",datasetIndex:1,barMinWidth:7,barMinHeight:10,gridIndex:1,itemStyle:{color:"rgba(227, 46, 29, 1)"}}]}}},u.init=function(e){$$("parc:vue1:netadd").showProgress(),$$("parc:vue1:netadd").disable(),a.c.parc.push({cmp:"parc:vue1:netadd",data:Object(o.b)("netadd").config.id}),Object(o.b)("netadd").waitData.then((function(e){$$("parc:vue1:netadd")._isDataLoaded=1,$$("parc:vue1:netadd").parse(Object(o.b)("netadd")),$$("parc:vue1:netadd").enable(),$$("parc:vue1:netadd").hideProgress()})),$$("parc:vue1:netadd").data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:netadd")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);r(4);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"treetable",id:"parc:vue1:split",math:!0,css:"webix_header_border webix_footer_border",borderless:!0,select:!0,columns:[{id:"parc",header:[{text:"Répartition du parc",colspan:3,css:{"text-align":"center"}},{text:"Parc",css:{"text-align":"center","font-size":"12px"}}],fillspace:3,template:"{common.treetable()}#parc#"},{id:"qty",header:["",{text:"Nombre",css:{"text-align":"center","font-size":"12px"}}],css:{"text-align":"right"},fillspace:1,format:function(e){return""==e?0:webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:0})}},{id:"qty_percent",header:["",{text:"Part (%)",css:{"text-align":"center","font-size":"12px"}}],css:{"text-align":"right"},fillspace:1,format:function(e){return""==e?0:webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:0})}}]}},u.init=function(e){webix.extend(e,webix.ProgressBar),e.showProgress(),e.disable(),e._eType="treemap",e._expDataId=Object(o.b)("parc_bill_split_exp").config.id,a.c.parc.push({cmp:"parc:vue1:split",data:Object(o.b)("parc_bill_split").config.id}),a.c.parc.push({cmp:"parc:exp:split",data:Object(o.b)("parc_bill_split_exp").config.id}),Object(o.b)("parc_bill_split").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.b)("parc_bill_split")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:split")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"parc:vue1:status:net",animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)}},title:[{text:a.d.parc.by_bill_by_prod?a.d.parc.by_bill_by_prod:"",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],series:[{type:"sunburst",name:"Parc",center:["50%","55%"],minAngle:10,emphasis:{focus:"descendant"},levels:[{label:{rotate:"tangential",formatter:function(e){return e.name.replace("TELEPHONIE","TEL.")},fontSize:11}},{r0:"15%",r:"40%",label:{rotate:"tangential",formatter:function(e){return e.name.replace("TELEPHONIE","TEL.")},fontSize:11}},{r0:"40%",r:"45%",label:{position:"outside",padding:3,silent:!1,formatter:function(e){return e.name.replace("TELEPHONIE","TEL.")},fontSize:11}}]}]}}},u.init=function(e){$$("parc:vue1:status:net").showProgress(),$$("parc:vue1:status:net").disable(),e._eType="treemap",e._expDataId=Object(o.b)("parc_status_split_exp").config.id,a.c.parc.push({cmp:"parc:vue1:status:net",data:Object(o.b)("parc_status_split").config.id}),a.c.parc.push({cmp:"parc:vue1:status:net:exp",data:Object(o.b)("parc_status_split_exp").config.id}),Object(o.b)("parc_status_split").waitData.then((function(e){$$("parc:vue1:status:net")._isDataLoaded=1,$$("parc:vue1:status:net").parse(Object(o.b)("parc_status_split")),$$("parc:vue1:status:net").enable(),$$("parc:vue1:status:net").hideProgress()})),$$("parc:vue1:status:net").data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:status:net")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(16),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"rec:vue1:type:split",animation:!0,options:{tooltip:{show:!0,position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},title:{text:a.d.recharge.rec_by_type_split?a.d.recharge.rec_by_type_split:"",left:"20%",textAlign:"center",textStyle:{fontSize:12}},grid:[{left:5,top:20,containLabel:!0}],dataset:[{dimensions:["rec_type","amnt"]}],series:[{type:"pie",radius:[0,"40%"],center:["50%","55%"],_type:"rec_split",minAngle:10,datasetIndex:0,tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.amnt)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!0,encode:{itemName:"rec_type",value:"amnt",tooltip:"amnt"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}}))},u.init=function(e){e.showProgress(),e.disable(),a.c.recharge.push({cmp:"rec:vue1:type:split",data:Object(o.b)("type_split").config.id}),Object(o.b)("type_split").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.b)("type_split")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("rec:vue1:type:split")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(16),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){this._kpi;return{view:"echarts-grid-dataset",id:"rec:type:vue1:trend",animation:!0,beforedisplay:function(e,t,r){var a=this,o=[],u=[],s={};if(0!=e.length){e[0].upd_dt&&e.sort((function(e,t){return e.upd_dt>t.upd_dt?1:-1})),e.forEach((function(e){s[e.rec_type]||(s[e.rec_type]=0),s[e.rec_type]++}));var c=Object.keys(s).map((function(e){return{op:e,cnt:s[e]}})).sort((function(e,t){return e.cnt>t.cnt?-1:1})).map((function(e){return e.op})),d=[];"month_trend"==e[0]._type&&(e.sort((function(e,t){return t.month<e.month?1:-1})),d=e.map((function(e){return e.month})).filter((function(e){return void 0!==e}))),"dt_trend"==e[0]._type&&(e.sort((function(e,t){return t.upd_dt<e.upd_dt?1:-1})),d=e.map((function(e){return e.upd_dt})).filter((function(e){return void 0!==e}))),"slot_trend"==e[0]._type&&(e.sort((function(e,t){return t.slot<e.slot?1:-1})),d=e.map((function(e){return e.slot})).filter((function(e){return void 0!==e}))),d=d.filter((function(e,t,r){return r.indexOf(e)==t})),r.off("click"),c.forEach((function(t){"month_trend"==e[0]._type&&(u.push({dimensions:["month","amnt"],source:e.filter((function(e){return e.rec_type==t&&"month_trend"==e._type})),isAdded:!0}),o.push({type:"bar",stack:"split",id:"rec_split_trend:"+t,datasetIndex:u.length-1,barMinHeight:10,_isStack:!0,name:t,encode:{x:"month",y:"amnt"}})),"dt_trend"==e[0]._type&&(u.push({dimensions:["upd_dt","amnt"],source:e.filter((function(e){return e.rec_type==t&&"dt_trend"==e._type})),isAdded:!0}),o.push({type:"line",smooth:!0,_isStack:!0,name:t,ecode:{x:"upd_dt",y:"amnt"},datasetIndex:u.length-1})),"slot_trend"==e[0]._type&&(u.push({dimensions:["slot","amnt"],source:e.filter((function(e){return e.rec_type==t&&"slot_trend"==e._type})),isAdded:!0}),o.push({type:"bar",_isStack:!0,name:t,ecode:{x:"slot",y:"amnt"},datasetIndex:u.length-1})),r.on("click",{seriesId:"rec_split_trend:"+t,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=a;a.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),a._clicked&&(t=!0,r._clicked=!1,clearTimeout(a.executeDoubleClick))}t?n.filterHandler(e):a._clicked=!0}))})),t.series=t.series.filter((function(e){return void 0===e._isStack})),t.dataset=t.dataset.filter((function(e){return void 0===e.isAdded})),0!=d.length&&(t.xAxis[0].data=d),0!=u.length&&(t.dataset=[].concat(t.dataset,u)),0!=o.length&&(t.series=o),"slot_trend"==e[0]._type?t.legend.selectedMode="single":t.legend.selectedMode="multiple","dt_trend"==e[0]._type&&r.on("click",{seriesType:"line"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=a;a.executeSDoubleClick=setTimeout((function(){r._sclicked=!1}),500),a._sclicked&&(t=!0,r._sclicked=!1,clearTimeout(a.executeSDoubleClick))}t?n.filterSlotHandler(e):a._sclicked=!0}))}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=s(e);!(t=n()).done;){var a=t.value;r+=a.marker+a.seriesName+" : "+Object(i.b)(a.value.amnt)+"<br/>"}return r},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,type:"scroll",top:"20",textStyle:{fontSize:10}},title:[{text:a.d.recharge.rec_by_type_trend?a.d.recharge.rec_by_type_trend:"",left:"50%",textAlign:"center",textStyle:{fontSize:12}}],dataset:[],grid:{left:10,containLabel:!0,bottom:5},xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}},c.init=function(e){e.showProgress(),e.disable(),e._filter_level="a",e._months=[],e._days=[],e._current_month=Object(u.a)().d1.substr(0,7),e._current_upd_dt=Object(u.a)().d1,a.c.recharge.push({cmp:"rec:type:vue1:trend",data:Object(o.b)("type_trend").config.id}),Object(o.b)("type_trend").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.b)("type_trend")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("rec:type:vue1:trend")})),e.data.attachEvent("onBeforeLoad",(function(){"recharge"==$$("top:menu").getSelectedId()&&(e._filter_level="a",e._months=[],e._current_month=Object(u.a)().d1.substr(0,7),e._current_upd_dt=Object(u.a)().d1)}));var t="trend";$$("recByType_"+t).attachEvent("onAfterRender",(function(){$("button.ui.button.recByType_trend_"+periodSplit[1]).on("click",(function(){"m"!=e._filter_level&&n.filterHandler({data:{month:e._current_month}})})),$("button.ui.button.recByType_trend_"+periodSplit[2]).on("click",(function(){"s"!=e._filter_level&&n.filterSlotHandler({data:{upd_dt:e._current_upd_dt,seriesName:e._current_serie_selected}})})),$("button.ui.button.recByType_trend_"+periodSplit[0]).on("click",(function(){"m"!=e._filter_level&&"s"!=e._filter_level||(e._filter_level="a",e.data.filter((function(e){return"month_trend"==e._type})))}))}))},n.filterHandler=function(e){if(e.data){if($("button.ui.button.recByType_trend_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("rec:type:vue1:trend")._months||($$("rec:type:vue1:trend")._months=[]),$$("rec:type:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("rec:type:vue1:trend")._filter_level="m",$$("rec:type:vue1:trend")._current_month=e.data.month,$$("rec:type:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("type_trend","vue2",e.data.month+"-01");$$("rec:type:vue1:trend").showProgress(),$$("rec:type:vue1:trend").disable(),t.then((function(r){$$("rec:type:vue1:trend")._months.push(e.data.month),$$("rec:type:vue1:trend")._filter_level="m",$$("rec:type:vue1:trend").parse(t).then((function(){$$("rec:type:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("rec:type:vue1:trend")._current_month=e.data.month,$$("rec:type:vue1:trend").enable(),$$("rec:type:vue1:trend").hideProgress()}))}}},n.filterSlotHandler=function(e){if(e.data){if($("button.ui.button.recByType_trend_"+periodSplit[2]).addClass("active").siblings().removeClass("active"),$$("rec:type:vue1:trend")._days||($$("rec:type:vue1:trend")._days=[]),$$("rec:type:vue1:trend")._days.some((function(t){return t==e.data.upd_dt})))$$("rec:type:vue1:trend")._filter_level="s",$$("rec:type:vue1:trend")._current_upd_dt=e.data.upd_dt,$$("rec:type:vue1:trend").config.options.legend.selected={},$$("rec:type:vue1:trend").config.options.legend.selected[e.seriesName]=!0,$$("rec:type:vue1:trend").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}));else{var t=Object(o.a)("type_trend","vue3",e.data.upd_dt,"vue3");$$("rec:type:vue1:trend").showProgress(),$$("rec:type:vue1:trend").disable(),t.then((function(r){$$("rec:type:vue1:trend")._days.push(e.data.upd_dt),$$("rec:type:vue1:trend")._filter_level="s",$$("rec:type:vue1:trend").config.options.legend.selected={},$$("rec:type:vue1:trend").config.options.legend.selected[e.seriesName]=!0,$$("rec:type:vue1:trend").parse(t).then((function(){$$("rec:type:vue1:trend").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}))})),$$("rec:type:vue1:trend")._current_upd_dt=e.data.upd_dt,$$("rec:type:vue1:trend")._current_serie_selected=e.seriesName,$$("rec:type:vue1:trend").enable(),$$("rec:type:vue1:trend").hideProgress()}))}}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return c}));var n=r(2),a=(r(10),r(1)),o=r(16),i=r(0),u=r(4);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return{view:"treetable",id:"rec:hierachy:split",math:!0,css:"webix_header_border webix_footer_border",borderless:!0,select:!0,columns:[{id:"recharge",header:{text:"Recharge",css:{"text-align":"center","font-size":"12px"}},fillspace:3,template:"{common.treetable()}#recharge#"},{id:"qty",header:{text:"Quantité",css:{"text-align":"center","font-size":"12px"}},css:{"text-align":"right"},fillspace:1,format:function(e){return""==e?0:webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:0})}},{id:"amount",header:{text:"Montant",css:{"text-align":"center","font-size":"12px"}},css:{"text-align":"right"},fillspace:1,format:function(e){return""==e?0:webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:0})}}]}},c.init=function(e){webix.extend(e,webix.ProgressBar),e.showProgress(),e.disable(),e._eType="treemap",e._expDataId=Object(o.b)("rec_hiera_split_exp").config.id,a.c.recharge.push({cmp:"rec:hierachy:split",data:Object(o.b)("rec_hiera_split").config.id}),a.c.recharge.push({cmp:"rec:hierachy:exp:split",data:Object(o.b)("rec_hiera_split_exp").config.id}),Object(o.b)("rec_hiera_split").waitData.then((function(t){e._isDataLoaded=1;var r=[].concat(Object(o.b)("rec_hiera_split").data.getRange()),n=Object(u.c)(r,["group","off","chan","type"],"recharge",["qty","amount"]).map((function(e){return s({},e,{open:!0})}));e.parse([].concat(n)),e.enable(),e.hideProgress(),Object(o.b)("rec_hiera_split").attachEvent("onAfterLoad",(function(){if("recharge"==$$("top:menu").getSelectedId()){var t=[].concat(Object(o.b)("rec_hiera_split").data.getRange()),r=Object(u.c)(t,["group","off","chan","type"],"recharge",["qty","amount"]).map((function(e){return s({},e,{open:!0})}));e.clearAll(),e.parse([].concat(r)),e.enable(),e.hideProgress()}}))})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("rec:hierachy:split")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(16),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"rec:chan:split",options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:e[1]+5};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},animation:!0,title:[{text:a.d.recharge.rec_by_channel?a.d.recharge.rec_by_channel:"",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],grid:[{left:5,bottom:10,top:20,right:"20%",containLabel:!0}],xAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"category",axisLabel:{interval:0,textStyle:{fontSize:10}},splitLine:{show:!1},axisTick:{show:!0}}],dataset:[{dimensions:["channel","amount"]}],series:[{type:"bar",_type:"chan_split",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:30,barMinHeight:10,encode:{x:"amount",y:"channel"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.amount)}},itemStyle:{color:function(t){return e.recChann[t.value.channel]}},label:{normal:{position:"right",show:!0},formatter:function(e){return Object(i.h)(e.value)}}}]}}}))},u.init=function(e){$$("rec:chan:split").showProgress(),$$("rec:chan:split").disable(),a.c.recharge.push({cmp:"rec:chan:split",data:Object(o.b)("rec_chan_split").config.id}),Object(o.b)("rec_chan_split").waitData.then((function(e){$$("rec:chan:split")._isDataLoaded=1,$$("rec:chan:split").parse(Object(o.b)("rec_chan_split")),$$("rec:chan:split").enable(),$$("rec:chan:split").hideProgress()})),$$("rec:chan:split").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rec:chan:split")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(16),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"rec:values:split",animation:!0,options:{tooltip:{show:!0,position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{top:20,show:!0,textStyle:{fontSize:10},type:"scroll"},title:[{text:a.d.recharge.rec_voucher_by_value?a.d.recharge.rec_voucher_by_value:"",left:"50%",textAlign:"center",textStyle:{fontSize:12}}],dataset:[{dimensions:["amnt","qty"]}],grid:[{left:5,top:40,containLabel:!0}],series:[{type:"pie",radius:["40%","50%"],_type:"rec_value",minAngle:10,datasetIndex:0,label:{show:!1,position:"center"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.qty)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!0,encode:{itemName:"amnt",value:"qty",tooltip:"qty"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},label:{show:!0,fontSize:"15",fontWeight:"bold"}}}]}}},u.init=function(e){e.showProgress(),e.disable(),a.c.recharge.push({cmp:"rec:values:split",data:Object(o.b)("rec_value_split").config.id}),e._isDataLoaded=1,e.parse(Object(o.b)("rec_value_split")),e.enable(),e.hideProgress(),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("rec:values:split")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"rev:vue1:operators",options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},xAxis:[{type:"value",isDim:!1,_type:"op",_dim:"name",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],title:[{text:a.d.revenue.rev_by_op_dest?a.d.revenue.rev_by_op_dest:"",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],yAxis:[{type:"category",axisLabel:{interval:0},splitLine:{show:!1},axisTick:{show:!0}}],grid:{left:10,top:25,bottom:20,right:5,width:"70%",containLabel:!0},dataset:[{dimensions:["operator","revenue"]}],series:[{type:"bar",_type:"op_split",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:40,barMinHeight:10,encode:{x:"revenue",y:"operator"},barMaxHeight:200,tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.b)(e.value.revenue,"t")}},itemStyle:{color:function(t){return t.value.operator?e.revenueOP[t.value.operator]:"red"}},label:{position:"right",show:!0,formatter:function(e){return Object(i.h)(e.data.revenue)+" ("+d3.format(".2%")(e.value.revenue/e.data.tot)+")"},textStyle:{fontSize:10}}}]}}}))},u.init=function(e){$$("rev:vue1:operators").showProgress(),$$("rev:vue1:operators").disable(),a.c.revenue.push({cmp:"rev:vue1:operators",data:Object(o.b)("operators").config.id}),Object(o.b)("operators").waitData.then((function(e){$$("rev:vue1:operators")._isDataLoaded=1,$$("rev:vue1:operators").parse(Object(o.b)("operators")),$$("rev:vue1:operators").enable(),$$("rev:vue1:operators").hideProgress()})),$$("rev:vue1:operators").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:operators")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"rev:vue1:operators:traff",options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},xAxis:[{type:"value",isDim:!1,_type:"op",_dim:"name",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],title:[{text:a.d.revenue.traff_by_op_dest?a.d.revenue.traff_by_op_dest:"",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],yAxis:[{type:"category",axisLabel:{interval:0},splitLine:{show:!1},axisTick:{show:!0}}],grid:{left:5,top:25,width:"70%",containLabel:!0,bottom:20},dataset:[{dimensions:["operator","traffic"]}],series:[{type:"bar",_type:"op_split",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:40,barMinHeight:10,encode:{x:"traffic",y:"operator"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.b)(e.value.traffic,"t")}},itemStyle:{color:function(t){return t.value.operator?e.revenueOP[t.value.operator]:"red"}},label:{position:"right",show:!0,formatter:function(e){return Object(i.h)(e.data.traffic)+" ("+d3.format(".2%")(e.value.traffic/e.data.tot)+")"},textStyle:{fontSize:10}}}]}}}))},u.init=function(e){$$("rev:vue1:operators:traff").showProgress(),$$("rev:vue1:operators:traff").disable(),a.c.revenue.push({cmp:"rev:vue1:operators:traff",data:Object(o.b)("operators_traff").config.id}),Object(o.b)("operators_traff").waitData.then((function(e){$$("rev:vue1:operators:traff")._isDataLoaded=1,$$("rev:vue1:operators:traff").parse(Object(o.b)("operators_traff")),$$("rev:vue1:operators:traff").enable(),$$("rev:vue1:operators:traff").hideProgress()})),$$("rev:vue1:operators:traff").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:operators:traff")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);r(4);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"treetable",id:"rev:type:vue1:split",math:!0,css:"webix_header_border webix_footer_border",borderless:!0,select:!0,columns:[{id:"type",header:[{text:a.d.revenue.by_type_by_produit?a.d.revenue.by_type_by_produit:"",colspan:3,css:{"text-align":"center"}},{text:"Type",css:{"text-align":"center","font-size":"12px"}}],fillspace:3,template:"{common.treetable()}#type#"},{id:"kpi",header:["",{text:"Revenu",css:{"text-align":"center","font-size":"12px"}}],css:{"text-align":"right"},fillspace:1,format:function(e){return""==e?0:webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:0})}},{id:"kpi_percent",header:["",{text:"Part (%)",css:{"text-align":"center","font-size":"12px"}}],css:{"text-align":"right"},fillspace:1,format:function(e){return""==e?0:webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:0})}}]}},u.init=function(e){webix.extend(e,webix.ProgressBar),e.showProgress(),e.disable(),e._eType="treemap",e._expDataId=Object(o.b)("rev_type_split_exp").config.id,a.c.revenue.push({cmp:"rev:type:vue1:split",data:Object(o.b)("rev_type_split").config.id}),a.c.revenue.push({cmp:"rev:exp:split",data:Object(o.b)("rev_type_split_exp").config.id}),Object(o.b)("rev_type_split").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.b)("rev_type_split")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:type:vue1:split")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"rev:vue1:split",animation:!0,maxHeight:180,options:{legend:{show:!0,itemGap:20,top:15,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},tooltip:{trigger:"item",show:!0,formatter:function(e){return(r.revenue[e.name]?r.revenue[e.name]:e.name)+": "+Object(i.h)(e.data.revenue)+" ("+e.percent+"%)"},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},dataset:[{dimensions:["rev_type","revenue"]}],grid:[{left:5,top:20,containLabel:!0}],series:[{type:"pie",radius:[0,"50%"],_type:"rev_split",minAngle:"10",datasetIndex:0,gridIndex:0,label:{show:!1,formatter:function(e){return r.revenue[e.name]}},selectedMode:"single",avoidLabelOverlap:!0,encode:{itemName:"rev_type",value:"revenue",tooltip:"revenue"},itemStyle:{color:function(e){return t.revenue[e.name]}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}}))},u.init=function(e){$$("rev:vue1:split").showProgress(),$$("rev:vue1:split").disable(),a.c.revenue.push({cmp:"rev:vue1:split",data:Object(o.b)("rev_split").config.id}),Object(o.b)("rev_split").waitData.then((function(e){$$("rev:vue1:split")._isDataLoaded=1,$$("rev:vue1:split").parse(Object(o.b)("rev_split")),$$("rev:vue1:split").enable(),$$("rev:vue1:split").hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:split")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"rev:vue1:client:compte",animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)}},title:[{text:a.d.revenue.by_market_by_bill?a.d.revenue.by_market_by_bill:"",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(e){return e.name+" : "+Object(i.h)(e.value)}},series:[{name:"Revenu",type:"treemap",leafDepth:1,levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}]}]}}},u.init=function(e){$$("rev:vue1:client:compte").showProgress(),$$("rev:vue1:client:compte").disable(),e._eType="treemap",e._expDataId=Object(o.b)("rev_client_split_exp").config.id,a.c.revenue.push({cmp:"rev:vue1:client:compte",data:Object(o.b)("rev_client_split").config.id}),a.c.revenue.push({cmp:"rev:vue1:client:compte:exp",data:Object(o.b)("rev_client_split_exp").config.id}),Object(o.b)("rev_client_split").waitData.then((function(e){$$("rev:vue1:client:compte")._isDataLoaded=1,$$("rev:vue1:client:compte").parse(Object(o.b)("rev_client_split")),$$("rev:vue1:client:compte").enable(),$$("rev:vue1:client:compte").hideProgress()})),$$("rev:vue1:client:compte").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:client:compte")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return c}));var n=r(2),a=(r(146),r(1)),o=r(13),i=r(0);function u(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){var e=this._kpi;return{view:"echarts-map-world",id:"traff:"+e+":test:geo",animation:!0,beforedisplay:function(e,t){var r,n=[];if(r=d3.scaleSequentialLog(d3.interpolatePuBuGn).domain([t.visualMap.min,t.visualMap.max]),t.visualMap.max>99){for(var a,o=u(d3.range(t.visualMap.min,99,10));!(a=o()).done;){var i=a.value;n.push(r(i))}for(var s,c=u(d3.range(100,t.visualMap.max,100));!(s=c()).done;){var d=s.value;n.push(r(d))}}else for(var l,p=u(d3.range(t.visualMap.min,t.visualMap.max,10));!(l=p()).done;){var f=l.value;n.push(r(f))}t.visualMap.inRange.color=n},options:{title:[{text:a.d.traffic.int_traff_map?a.d.traffic.int_traff_map:"",top:0,left:"50%",textAlign:"center",textStyle:{fontSize:10}}],series:[{type:"map",map:"world_map",name:"Traffic international "+e,roam:!0,nameProperty:"iso_a3",_type:e+"_geo_split",valueProperty:e+"_traff"}],tooltip:{trigger:"item",formatter:function(e){return e.data?e.data.country+": "+Object(i.h)(e.value):e.name+" : 0"},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},dataset:[{source:[]}],visualMap:{min:0,max:0,orient:"horizontal",right:0,seriesIndex:0,text:["High","Low"],realtime:!1,calculable:!0,formatter:function(e){return Object(i.h)(e)},inRange:{}}}}},s.init=function(e){var t=this._kpi;$$("traff:"+t+":test:geo").showProgress(),$$("traff:"+t+":test:geo").disable(),$$("traff:"+t+":test:geo")._current_type=t+"_geo_split",a.c.traffic.push({cmp:"traff:"+t+":test:geo",data:Object(o.b)("int_traffic").config.id}),Object(o.b)("int_traffic").waitData.then((function(e){$$("traff:"+t+":test:geo")._isDataLoaded=1,$$("traff:"+t+":test:geo").parse(Object(o.b)("int_traffic")),$$("traff:"+t+":test:geo").enable(),$$("traff:"+t+":test:geo").hideProgress()})),$$("traff:"+t+":test:geo").data.attachEvent("onStoreLoad",(function(){Object(i.j)("traff:"+t+":test:geo")})),$$("traff:"+t+":test:geo").data.attachEvent("onBeforeLoad",(function(){$$("parc:vue1:geo")._current_type=t+"_geo_split"}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return c}));var n=r(2),a=(r(10),r(1)),o=r(13),i=r(0);function u(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,console.log(n),a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){var e=this._kpi;return a.a.then((function(t){return{view:"echarts-grid-dataset",id:"traff:"+e+":vue1:dest",animation:!0,beforedisplay:function(r,n,a){var o,i=[],u=[],s=[];if(0!=r.length){r[0].upd_dt&&r.sort((function(e,t){return e.upd_dt>t.upd_dt?1:-1}));var c=r.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));r.forEach((function(e){s[e.traff_cat]||(s[e.traff_cat]=0),s[e.traff_cat]++}));var d=Object.keys(s).map((function(e){return{t:e,cnt:s[e]}})).sort((function(e,t){return e.cnt>t.cnt?-1:1})).map((function(e){return e.t}));c.sort(),o=c,a.off("click"),d.forEach((function(n){"dt_trend"==r[0]._type&&(u.push({dimensions:["upd_dt","traffic"],source:r.filter((function(t){return t.traff_type==e&&"in"==t.traff_dir&&t.traff_cat==n})),isAdded:!0}),i.push({type:"bar",stack:n+"_split",itemStyle:{color:function(r){return t.traffic[e+"_in"]}},id:"traff_split_dest:in:"+n+":"+e,datasetIndex:u.length-1,barMinHeight:10,_isStack:!0,name:n,encode:{x:"upd_dt",y:"traffic"}}),u.push({dimensions:["upd_dt","traffic"],source:r.filter((function(t){return t.traff_type==e&&"out"==t.traff_dir&&t.traff_cat==n})),isAdded:!0}),i.push({type:"bar",stack:n+"_split",id:"traff_split_dest:out:"+n+":"+e,datasetIndex:u.length-1,barMinHeight:10,_isStack:!0,name:n,encode:{x:"upd_dt",y:"traffic"},itemStyle:{color:function(r){return t.traffic[e+"_out"]}}}))})),n.series=n.series.filter((function(e){return void 0===e._isStack})),n.dataset=n.dataset.filter((function(e){return void 0===e.isAdded})),0!=u.length&&(n.dataset=[].concat(n.dataset,u)),0!=i.length&&(n.series=i),"dt_trend"==r[0]._type&&(n.legend.selectedMode="single"),n.xAxis[0].data=o}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=u(e);!(t=n()).done;){var a=t.value;r+=a.marker+a.seriesId.split(":")[1]+" : "+Object(i.b)(a.value.traffic)+"<br/>"}return r}},legend:{show:!0,itemGap:20,top:"20",type:"scroll",textStyle:{fontSize:10}},title:[{text:a.d.traffic.traff_by_dest?a.d.traffic.traff_by_dest:"",left:"50%",textAlign:"center",textStyle:{fontSize:12}}],dataset:[],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],grid:[{left:5,bottom:5,containLabel:!0}],series:[]}}}))},s.init=function(e){var t=this._kpi;$$("traff:"+t+":vue1:dest").showProgress(),$$("traff:"+t+":vue1:dest").disable(),a.c.traffic.push({cmp:"traff:"+t+":vue1:dest",data:Object(o.b)("traffic_dest").config.id}),Object(o.b)("traffic_dest").waitData.then((function(e){$$("traff:"+t+":vue1:dest")._isDataLoaded=1,$$("traff:"+t+":vue1:dest").parse(Object(o.b)("traffic_dest")),$$("traff:"+t+":vue1:dest").enable(),$$("traff:"+t+":vue1:dest").hideProgress()})),$$("traff:"+t+":vue1:dest").data.attachEvent("onStoreLoad",(function(){Object(i.j)("traff:"+t+":vue1:dest")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(13),i=r(0);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return a.a.then((function(t){return{view:"echarts-grid-dataset",id:"traff:vue1:"+e+":operators",options:{tooltip:{trigger:"item",show:!0},legend:{top:10,textStyle:{fontSize:10},type:"scroll"},title:[{top:"30",text:a.d.traffic.traffic_in?a.d.traffic.traffic_in:"",left:"25%",textAlign:"center",textStyle:{fontSize:12}},{top:"30",text:a.d.traffic.traffic_out?a.d.traffic.traffic_out:"",left:"75%",textAlign:"center",textStyle:{fontSize:12}}],grid:[{left:10,containLabel:!0},{right:10,containLabel:!0}],dataset:[{dimensions:["operator","traffic"]},{dimensions:["operator","traffic"]}],series:[{type:"pie",radius:[0,"50%"],center:["25%","55%"],datasetIndex:0,gridIndex:0,encode:{value:"traffic",itemName:"operator"},_type:"in",label:{show:!1},tooltip:{trigger:"item",show:!0,formatter:function(e){if(e.value)return e.name+" : "+Object(i.b)(e.value.traffic)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!0,minAngle:10,itemStyle:{color:function(e){return t.revenueOP[e.name]}}},{type:"pie",radius:[0,"50%"],center:["75%","55%"],datasetIndex:1,gridIndex:1,encode:{value:"traffic",itemName:"operator"},_type:"out",label:{show:!1},itemStyle:{color:function(e){return t.revenueOP[e.name]}},tooltip:{trigger:"item",show:!0,formatter:function(e){if(e.value)return e.name+" : "+Object(i.b)(e.value.traffic)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!0,minAngle:10}]}}}))},u.init=function(e){var t=this._kpi;$$("traff:vue1:"+t+":operators").showProgress(),$$("traff:vue1:"+t+":operators").disable(),a.c.traffic.push({cmp:"traff:vue1:"+t+":operators",data:Object(o.b)("traffic_operator").config.id}),Object(o.b)("traffic_operator").waitData.then((function(e){$$("traff:vue1:"+t+":operators")._isDataLoaded=1,$$("traff:vue1:"+t+":operators").parse(Object(o.b)("traffic_operator")),$$("traff:vue1:"+t+":operators").filter((function(e){return e.traff_type==t})),$$("traff:vue1:"+t+":operators").enable(),$$("traff:vue1:"+t+":operators").hideProgress()})),$$("traff:vue1:"+t+":operators").data.attachEvent("onStoreLoad",(function(){$$("traff:vue1:"+t+":operators").filter((function(e){return e.traff_type==t})),Object(i.j)("traff:vue1:"+t+":operators")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(13),i=r(0);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi,t=a.a.then((function(t){return{view:"echarts-grid-dataset",id:"traff:int:"+e,options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},xAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],title:[{text:a.d.traffic.top_int_traffic?a.d.traffic.top_int_traffic:"",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:10}}],yAxis:[{type:"category",axisLabel:{interval:0,show:!0},splitLine:{show:!1},axisTick:{show:!0}}],grid:{left:10,top:25,bottom:5,right:10,width:"70%",containLabel:!0},dataset:[{dimensions:["country","value"]}],series:[{type:"bar",_type:e+"_geo_split",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:40,barMinHeight:10,encode:{x:"value",y:"country"},barMaxHeight:200,tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.b)(e.value.value,"t")}},itemStyle:{color:function(e){return e.dataIndex<a.b.length&&"Autres"!=e.value.country&&"Inconnu"!=e.value.country?a.b[e.dataIndex]:"black"}},label:{position:"right",show:!0,formatter:function(e){return Object(i.h)(e.data.value)+" ("+d3.format(".2%")(e.data.value/e.data.tot)+")"},textStyle:{fontSize:10}}}]}}}));return console.log(Object(i.e)()),t},u.init=function(e){var t=this._kpi;$$("traff:int:"+t).showProgress(),$$("traff:int:"+t).disable(),a.c.traffic.push({cmp:"traff:int:"+t,data:Object(o.b)("int_traffic_sample").config.id}),Object(o.b)("int_traffic_sample").waitData.then((function(e){$$("traff:int:"+t)._isDataLoaded=1,$$("traff:int:"+t).parse(Object(o.b)("int_traffic_sample")),$$("traff:int:"+t).data.sort("value","asc","int"),$$("traff:int:"+t).enable(),$$("traff:int:"+t).hideProgress()})),$$("traff:int:"+t).data.attachEvent("onStoreLoad",(function(){Object(i.j)("traff:int:"+t),$$("traff:int:"+t).data.sort("value","asc","int")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(13),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"traff:site:data",options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},xAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],title:[{text:a.d.traffic.top_data_sites?a.d.traffic.top_data_sites:"",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:10}}],yAxis:[{type:"category",axisLabel:{interval:0,show:!0},splitLine:{show:!1},axisTick:{show:!0}}],grid:{left:10,top:25,bottom:5,right:10,width:"70%",containLabel:!0},dataset:[{dimensions:["site","value"]}],series:[{type:"bar",_type:"traff_data_site_split",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:40,barMinHeight:10,encode:{x:"value",y:"site"},barMaxHeight:200,tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.b)(e.value.value,"t")}},itemStyle:{color:function(e){return e.dataIndex<a.b.length&&"Autres"!=e.value.site&&"Inconnu"!=e.value.site?a.b[e.dataIndex]:"black"}},label:{position:"right",show:!0,formatter:function(e){return Object(i.a)(e.data.value)+" ("+d3.format(".2%")(e.data.value/e.data.tot)+")"},textStyle:{fontSize:10}}}]}}}))},u.init=function(e){e.showProgress(),e.disable(),a.c.traffic.push({cmp:"traff:site:data",data:Object(o.b)("data_site").config.id}),Object(o.b)("data_site").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.b)("data_site")),e.data.sort("value","asc","int"),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("traff:site:data"),e.data.sort("value","asc","int")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(13),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){var e="data";return a.a.then((function(t){return{view:"echarts-grid-dataset",id:"traff:data:vue1:type",animation:!0,beforedisplay:function(r,a,o){var u=this,s=[],c=[],d=[],l=[];if(0!=r.length){r[0].upd_dt&&r.sort((function(e,t){return e.upd_dt>t.upd_dt?1:-1})),"dt_trend"==r[0]._type&&(r.sort((function(e,t){return t.upd_dt<e.upd_dt?1:-1})),l=r.map((function(e){return e.upd_dt})).filter((function(e){return void 0!==e}))),"slot_trend"==r[0]._type&&(r.sort((function(e,t){return t.slot<e.slot?1:-1})),l=r.map((function(e){return e.slot})).filter((function(e){return void 0!==e}))),l=l.filter((function(e,t,r){return r.indexOf(e)==t})),r.forEach((function(e){d[e.traff_cat]||(d[e.traff_cat]=0),d[e.traff_cat]++}));var p=Object.keys(d).map((function(e){return{t:e,cnt:d[e]}})).sort((function(e,t){return e.cnt>t.cnt?-1:1})).map((function(e){return e.t}));o.off("click"),p.forEach((function(a){"dt_trend"==r[0]._type&&(c.push({dimensions:["upd_dt","traffic"],source:r.filter((function(t){return"dt_trend"==t._type&&t.traff_type==e&&"in"==t.traff_dir&&t.traff_cat==a})),isAdded:!0}),s.push({type:"bar",stack:a+"_split",itemStyle:{color:function(e){return t.traffic.data_in}},id:"traff_split_dest:in:"+a+":"+e+"type",datasetIndex:c.length-1,barMinHeight:10,_isStack:!0,name:a,encode:{x:"upd_dt",y:"traffic"}}),c.push({dimensions:["upd_dt","traffic"],source:r.filter((function(t){return"dt_trend"==t._type&&t.traff_type==e&&"out"==t.traff_dir&&t.traff_cat==a})),isAdded:!0}),s.push({type:"bar",stack:a+"_split",id:"traff_split_dest:out:"+a+":"+e,datasetIndex:c.length-1,barMinHeight:10,_isStack:!0,name:a,encode:{x:"upd_dt",y:"traffic"},itemStyle:{color:function(e){return t.traffic.data_out}}})),"slot_trend"==r[0]._type&&(c.push({dimensions:["slot","traffic"],source:r.filter((function(t){return"slot_trend"==t._type&&t.traff_type==e&&"in"==t.traff_dir&&t.traff_cat==a})),isAdded:!0}),s.push({type:"bar",stack:a+"_split",itemStyle:{color:function(e){return t.traffic.data_in}},id:"traff_split_dest:in:"+a+":"+e+"type",datasetIndex:c.length-1,barMinHeight:10,_isStack:!0,name:a,encode:{x:"slot",y:"traffic"}}),c.push({dimensions:["slot","traffic"],source:r.filter((function(t){return"slot_trend"==t._type&&t.traff_type==e&&"out"==t.traff_dir&&t.traff_cat==a})),isAdded:!0}),s.push({type:"bar",stack:a+"_split",id:"traff_split_dest:out:"+a+":"+e,datasetIndex:c.length-1,barMinHeight:10,_isStack:!0,name:a,encode:{x:"slot",y:"traffic"},itemStyle:{color:function(e){return t.traffic.data_out}}})),"dt_trend"==r[0]._type&&(o.on("click",{seriesId:"traff_split_dest:in:"+a+":"+e+"type"},(function(t){var r="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!r){var a=u;u.executeSDoubleClick=setTimeout((function(){a._sclicked=!1}),500),u._sclicked&&(r=!0,a._sclicked=!1,clearTimeout(u.executeSDoubleClick))}r?n.filterSlotHandler(t,e):u._sclicked=!0})),o.on("click",{seriesId:"traff_split_dest:out:"+a+":"+e+"type"},(function(t){var r="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!r){var a=u;u.executeSDoubleClick=setTimeout((function(){a._sclicked=!1}),500),u._sclicked&&(r=!0,a._sclicked=!1,clearTimeout(u.executeSDoubleClick))}r?n.filterSlotHandler(t,e):u._sclicked=!0})))})),"slot_trend"==r[0]._type?a.dataZoom=[{type:"inside",start:25,end:75},{show:!0,type:"slider",height:20,bottom:5,start:25,end:75}]:a.dataZoom&&delete a.dataZoom,a.series=a.series.filter((function(e){return void 0===e._isStack})),a.dataset=a.dataset.filter((function(e){return void 0===e.isAdded})),0!=c.length&&(a.dataset=[].concat(a.dataset,c)),0!=s.length&&(a.series=s),a.legend.selectedMode="single",a.xAxis[0].data=l}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=s(e);!(t=n()).done;){var a=t.value;r+=a.marker+a.seriesId.split(":")[1]+" : "+Object(i.b)(a.value.traffic)+"<br/>"}return r}},legend:{show:!0,itemGap:20,top:"20",type:"scroll",textStyle:{fontSize:10}},title:[{text:a.d.traffic.data_by_type_by_dir?a.d.traffic.data_by_type_by_dir:"",left:"50%",textAlign:"center",textStyle:{fontSize:12}}],dataset:[],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.a)(e)}},splitLine:{show:!0}}],grid:[{left:5,bottom:30,containLabel:!0}],series:[]}}}))},c.init=function(e){var t="data";e.showProgress(),e.disable(),e._days=[],a.c.traffic.push({cmp:"traff:data:vue1:type",data:Object(o.b)("traffic_data").config.id}),Object(o.b)("traffic_data").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.b)("traffic_data")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("traff:data:vue1:type")})),Object(o.b)("traffic_data").data.attachEvent("onClearAll",(function(){"traffic"==$$("top:menu").getSelectedId()&&(e._filter_level="m",e._months=[],e._current_month=Object(u.a)().d1.substr(0,7),e._current_upd_dt=Object(u.a)().d1)})),$$("traffByType_dest_"+t).attachEvent("onViewShow",(function(){$("button.ui.button.traffByType_dest_data_"+periodSplit[2]).on("click",(function(){"s"!=e._filter_level&&n.filterSlotHandler({data:{upd_dt:e._current_upd_dt,seriesName:e._current_serie_selected}},t)})),$("button.ui.button.traffByType_dest_data_"+periodSplit[1]).on("click",(function(){"m"!=e._filter_level&&(e._filter_level="m",e.data.filter((function(e){return"dt_trend"==e._type})))}))}))},n.filterSlotHandler=function(e,t){if(e.data)if($("button.ui.button.traffByType_dest_"+t+"_"+periodSplit[2]).addClass("active").siblings().removeClass("active"),$$("traff:"+t+":vue1:type")._days||($$("traff:"+t+":vue1:type")._days=[]),$$("traff:"+t+":vue1:type")._days.some((function(t){return t==e.data.upd_dt})))$$("traff:"+t+":vue1:type")._filter_level="s",$$("traff:"+t+":vue1:type")._current_upd_dt=e.data.upd_dt,$$("traff:"+t+":vue1:type").config.options.legend.selected={},$$("traff:"+t+":vue1:type").config.options.legend.selected[e.seriesName]=!0,$$("traff:"+t+":vue1:type").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}));else{var r=Object(o.a)("data_type","vue2",e.data.upd_dt,"vue2");$$("traff:"+t+":vue1:type").showProgress(),$$("traff:"+t+":vue1:type").disable(),r.then((function(n){$$("traff:"+t+":vue1:type")._days.push(e.data.upd_dt),$$("traff:"+t+":vue1:type")._filter_level="s",$$("traff:"+t+":vue1:type").config.options.legend.selected={},$$("traff:"+t+":vue1:type").config.options.legend.selected[e.seriesName]=!0,$$("traff:"+t+":vue1:type").parse(r).then((function(){$$("traff:"+t+":vue1:type").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}))})),$$("traff:"+t+":vue1:type")._current_upd_dt=e.data.upd_dt,$$("traff:"+t+":vue1:type")._current_serie_selected=e.seriesName,$$("traff:"+t+":vue1:type").enable(),$$("traff:"+t+":vue1:type").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(13),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"traff:data:parc:vue1:trend",animation:!0,options:{tooltip:{trigger:"axis",show:!0,z:2},dataset:[{dimensions:["traffic","upd_dt"]}],grid:{left:10,containLabel:!0,bottom:5,top:25},title:[{text:a.d.traffic.parc_data?a.d.traffic.parc_data:"",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[{type:"bar",datasetIndex:0,encode:{x:"upd_dt",y:"traffic"},_type:"parc_data",smooth:!0,barMaxWidth:40,barMinHeight:10}]}}},u.init=function(e){$$("traff:data:parc:vue1:trend").showProgress(),$$("traff:data:parc:vue1:trend").disable(),a.c.traffic.push({cmp:"traff:data:parc:vue1:trend",data:Object(o.b)("parc_data").config.id}),Object(o.b)("parc_data").waitData.then((function(e){$$("traff:data:parc:vue1:trend")._isDataLoaded=1,$$("traff:data:parc:vue1:trend").parse(Object(o.b)("parc_data")),$$("traff:data:parc:vue1:trend").enable(),$$("traff:data:parc:vue1:trend").hideProgress()})),$$("traff:data:parc:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("traff:data:parc:vue1:trend")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(13),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"data:vue1:type:split",animation:!0,options:{tooltip:{show:!0,position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{top:20,show:!0,textStyle:{fontSize:10},type:"scroll"},title:[{text:a.d.traffic.data_by_type?a.d.traffic.data_by_type:"",left:"50%",textAlign:"center",textStyle:{fontSize:12}}],dataset:[{dimensions:["data_type","traffic"]}],grid:[{left:5,top:40,containLabel:!0}],series:[{type:"pie",radius:["40%","50%"],_type:"data_type",minAngle:10,datasetIndex:0,label:{show:!1,position:"center"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.a)(e.data.traffic)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!0,encode:{itemName:"data_type",value:"traffic",tooltip:"traffic"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},label:{show:!0,fontSize:"15",fontWeight:"bold"}}}]}}},u.init=function(e){$$("data:vue1:type:split").showProgress(),$$("data:vue1:type:split").disable(),a.c.traffic.push({cmp:"data:vue1:type:split",data:Object(o.b)("data_type").config.id}),Object(o.b)("data_type").waitData.then((function(e){$$("data:vue1:type:split")._isDataLoaded=1,$$("data:vue1:type:split").parse(Object(o.b)("data_type")),$$("data:vue1:type:split").enable(),$$("data:vue1:type:split").hideProgress()})),$$("data:vue1:type:split").data.attachEvent("onStoreLoad",(function(){Object(i.j)("data:vue1:type:split")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return c}));var n=r(2),a=(r(10),r(1)),o=r(31),i=r(0);function u(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"echarts-grid-dataset",id:"mon:vue1:trend",animation:!0,beforedisplay:function(e,t,r){var n=[],a=[],o=e.map((function(e){return e.nodetype})).filter((function(e,t,r){return r.indexOf(e)==t})),i=e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));i.sort(),0!=e.length&&(e[0].upd_dt&&e.sort((function(e,t){return e.upd_dt>t.upd_dt?1:-1})),o.sort(),o.forEach((function(t){a.push({dimensions:["upd_dt","fcount","count","nodetype"],source:e.filter((function(e){return e.nodetype==t})),isAdded:!0}),n.push({type:"line",smooth:!0,_isStack:!0,name:t,encode:{x:"upd_dt",y:"count"},datasetIndex:a.length-1,xAxisIndex:1,yAxisIndex:1}),n.push({type:"line",smooth:!0,_isStack:!0,name:t,encode:{x:"upd_dt",y:"fcount"},datasetIndex:a.length-1})})),0!=a.length&&(t.dataset=a),0!=n.length&&(t.series=n),t.legend.selectedMode="single",t.xAxis[0].data=i)},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=u(e);!(t=n()).done;){var a=t.value;r+=a.marker+a.seriesName+" : "+Object(i.b)(a.value[a.dimensionNames[a.encode.y]])+"<br/>"}return r},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,top:"20",type:"scroll"},title:[{text:a.d.monitor.files?a.d.monitor.files:"",left:"50%",textAlign:"center",textStyle:{fontSize:12},top:35},{text:a.d.monitor.lines?a.d.monitor.lines:"",left:"50%",textAlign:"center",textStyle:{fontSize:12},top:"51%"}],dataset:[],grid:[{left:5,containLabel:!0,top:50,height:"38%"},{left:5,containLabel:!0,bottom:40,top:"60%"}],dataZoom:[{type:"inside",start:75,end:100},{show:!0,type:"slider",top:"45%",start:75,end:100},{type:"inside",start:75,xAxisIndex:1,end:100},{show:!0,type:"slider",bottom:5,xAxisIndex:1,start:75,end:100}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"},{axisLabel:{show:!0},axisTick:{show:!0},type:"category",gridIndex:1}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}},{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0},gridIndex:1}],series:[]}}},s.init=function(e){$$("mon:vue1:trend").showProgress(),$$("mon:vue1:trend").disable(),a.c.monitor.push({cmp:"mon:vue1:trend",data:Object(o.a)("line_trend").config.id}),Object(o.a)("line_trend").waitData.then((function(e){$$("mon:vue1:trend")._isDataLoaded=1,$$("mon:vue1:trend").parse(Object(o.a)("line_trend")),$$("mon:vue1:trend").enable(),$$("mon:vue1:trend").hideProgress()})),$$("mon:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("mon:vue1:trend")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));var n=r(2),a=r(76),o=r(5),i=r(8),u=r(28),s=r(77),c=r(29),d=r(78),l=r(79),p=r(0);var f=function(e){var t,r;function n(t,r,n,a){var o;return(o=e.call(this,t,r)||this)._kpi=n,o._feeddata=a,o}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var f=n.prototype;return f.config=function(){var e,t,r=this._kpi,n=(this._data,[]),f={view:"mobile"!=Object(p.e)()&&"mobile_rotated"!=Object(p.e)()?"c-dashboard":"m-dashboard",id:"traffic:dash:"+r,margin:5,padding:5,cells:n,css:{"background-color":"#EBEDF0"}};switch(Object(p.e)()){case"mobile":e=4,t=6,n.push({view:"panel",x:0,y:0,dx:4,dy:2,resize:!0,header:new o.default(this.app,"","traffic_offer_"+r,r),body:{type:"clean",margin:0,rows:[new c.default(this.app,"",r),new i.default(this.app,"","traffByType_"+r,3),new u.default(this.app,"",r)]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:0,y:2,dx:4,dy:2,resize:!0,header:new o.default(this.app,"","traffic_geo_int_"+r,r),body:{type:"clean",margin:0,rows:[new l.default(this.app,"",r),new a.default(this.app,"",r)]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:0,y:4,dx:4,dy:2,resize:!0,header:new o.default(this.app,"","traffic_other_"+r,r),body:{type:"clean",margin:0,rows:[new s.default(this.app,"",r),new d.default(this.app,"",r)]},css:{"background-color":"#fff"}}),f.minHeight=1900;break;case"mobile_rotated":e=4,t=4,n.push({view:"panel",x:0,y:0,dx:2,dy:2,resize:!0,header:new o.default(this.app,"","traffic_offer_"+r,r),body:{type:"clean",margin:0,rows:[new c.default(this.app,"",r),new i.default(this.app,"","traffByType_"+r,3),new u.default(this.app,"",r)]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:2,y:0,dx:2,dy:2,resize:!0,header:new o.default(this.app,"","traffic_other_"+r,r),body:{type:"clean",margin:0,rows:[new s.default(this.app,"",r),new d.default(this.app,"",r)]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:0,y:2,dx:4,dy:2,resize:!0,header:new o.default(this.app,"","traffic_geo_int_"+r,r),body:{type:"clean",margin:0,cols:[new l.default(this.app,"",r),new a.default(this.app,"",r)]},css:{"background-color":"#fff"}}),f.minHeight=850;break;default:e=9,t=3,n.push({view:"panel",x:0,y:0,dx:3,dy:3,resize:!0,header:new o.default(this.app,"","traffic_offer_"+r,r),body:{type:"clean",margin:0,rows:[new c.default(this.app,"",r),new i.default(this.app,"","traffByType_"+r,3),new u.default(this.app,"",r)]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:3,y:0,dx:3,dy:3,resize:!0,header:new o.default(this.app,"","traffic_geo_int_"+r,r),body:{type:"clean",margin:0,rows:[new l.default(this.app,"",r),new a.default(this.app,"",r)]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:6,y:0,dx:3,dy:3,resize:!0,header:new o.default(this.app,"","traffic_other_"+r,r),body:{type:"clean",margin:0,rows:[new s.default(this.app,"",r),new d.default(this.app,"",r)]},css:{"background-color":"#fff"}})}return f.cells=n,f.gridColumns=e,f.gridRows=t,{view:"scrollview",scroll:"y",body:f}},f.init=function(e){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(35),o=r(0);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.config=function(){return this._colCount=6,this._maxColCount=6,{view:"mobile"!=Object(o.e)()&&"mobile_rotated"!=Object(o.e)()?"c-dashboard":"m-dashboard",id:"bl:stats",gridColumns:this._colCount,gridRows:1,maxHeight:100,responsive:"hide",cells:[{view:"panel",x:0,y:0,dx:1,dy:1,body:new a.default(this.app,"","rv")},{view:"panel",x:1,y:0,dx:1,dy:1,body:new a.default(this.app,"","qte")},{view:"panel",x:2,y:0,dx:1,dy:1,body:new a.default(this.app,"","fpaid")},{view:"panel",x:3,y:0,dx:1,dy:1,body:new a.default(this.app,"","qpaid")},{view:"panel",x:4,y:0,dx:1,dy:1,body:new a.default(this.app,"","rv_post")},{view:"panel",x:5,y:0,dx:1,dy:1,body:new a.default(this.app,"","rv_pre")}]}},i.init=function(e){var t=this;webix.event(window,"resize",(function(){if(void 0===$$("top:menu")||"sales"==$$("top:menu").getSelectedId()){if("mobile_rotated"==Object(o.e)())return void $$("bl:stats").hide();$$("bl:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("bl:stats").define("gridColumns",t._colCount),$$("bl:stats").adjust()}}))},i.ready=function(e){var t=this;if("mobile_rotated"!=Object(o.e)()){$$("bl:stats").show();for(var r=window.screen.width;r/t._colCount<160;)t._colCount=t._colCount-1;r/t._colCount>160&&(t._colCount<t._maxColCount&&(t._colCount=t._colCount+1),r/t._colCount<160&&(t._colCount=t._colCount-1)),e.define("gridColumns",t._colCount),e.adjust()}else $$("bl:stats").hide()},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"FilterIconView",(function(){return i}));var n=r(2),a=r(1),o=r(3);var i=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._tp=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.config=function(){var e=this._tp,t={view:"icon",type:"image",id:"filterelmt:"+e,width:25,height:25,popup:"filterelmt:popup:"+e};return t},i.init=function(e){var t=this,r=this._tp;$$("filterelmt:popup:"+r)||t.ui({view:"popup",id:"filterelmt:popup:"+r}),a.f.then((function(n){$$("filterelmt:popup:"+r)&&$$("filterelmt:popup:"+r).destructor(),t.ui({view:"popup",id:"filterelmt:popup:"+r,body:{template:n.filters[r].desc+" : "+Object(o.c)()[r],autoheight:!0,autowidth:!0},maxWidth:150,css:"filter_tooltip"}),e.define("icon",n.filters[r].icon),$$("filterelmt:"+r).define("tooltip",n.filters[r].desc+" : "+Object(o.c)()[r]),$$("filterelmt:"+r).refresh()}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(89),o=r(90);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.config=function(){return{view:"tabview",id:"bill:tab",animate:!1,cells:[{id:"tab:resume",header:"Global",body:a.default},{id:"tab:details",header:"Detail",body:o.default}]}},i.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));var n=r(2),a=r(5),o=r(48),i=r(49),u=r(36),s=r(8),c=r(37),d=r(38),l=r(0),p=r(3);var f=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var f=n.prototype;return f.config=function(){var e,t,r=[];switch(Object(l.e)()){case"mobile":e=2,t=8,r.push({view:"panel",x:0,y:0,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","bills_fact"),body:{type:"clean",margin:0,rows:[new d.default(this.app,"","b"),new c.default(this.app,"","b"),new s.default(this.app,"","bParOff",2),new u.default(this.app,"","b")],css:{"background-color":"#fff"}}}),r.push({view:"panel",x:0,y:3,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","bills_paie"),body:{type:"clean",margin:0,rows:[new d.default(this.app,"","p"),new c.default(this.app,"","p"),new s.default(this.app,"","pParOff",2),new u.default(this.app,"","p")]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:6,dx:2,dy:2,resize:!0,header:new a.default(this.app,"","bills_recouvr"),body:{type:"clean",margin:0,rows:[i.default,o.default]},css:{"background-color":"#fff"}});break;case"mobile_rotated":e=4,t=5,r.push({view:"panel",x:0,y:0,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","bills_fact"),body:{type:"clean",margin:0,rows:[new d.default(this.app,"","b"),new c.default(this.app,"","b"),new s.default(this.app,"","bParOff",2),new u.default(this.app,"","b")],css:{"background-color":"#fff"}}}),r.push({view:"panel",x:2,y:0,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","bills_paie"),body:{type:"clean",margin:0,rows:[new d.default(this.app,"","p"),new c.default(this.app,"","p"),new s.default(this.app,"","pParOff",2),new u.default(this.app,"","p")]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:3,dx:4,dy:2,resize:!0,header:new a.default(this.app,"","bills_recouvr"),body:{type:"clean",margin:0,rows:[i.default,o.default]},css:{"background-color":"#fff"}});break;default:e=6,t=3,r.push({view:"panel",x:0,y:0,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","bills_fact"),body:{type:"clean",margin:0,rows:[new d.default(this.app,"","b"),new c.default(this.app,"","b"),new s.default(this.app,"","bParOff",2),new u.default(this.app,"","b")],css:{"background-color":"#fff"}}}),r.push({view:"panel",x:2,y:0,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","bills_paie"),body:{type:"clean",margin:0,rows:[new d.default(this.app,"","p"),new c.default(this.app,"","p"),new s.default(this.app,"","pParOff",2),new u.default(this.app,"","p")]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:0,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","bills_recouvr"),body:{type:"clean",margin:0,rows:[i.default,o.default]},css:{"background-color":"#fff"}})}var n={view:"mobile"!=Object(l.e)()&&"mobile_rotated"!=Object(l.e)()?"c-dashboard":"m-dashboard",gridColumns:e,gridRows:t,margin:5,padding:5,cells:r,css:{"background-color":"#EBEDF0"}};return"mobile"==Object(l.e)()&&(n.minHeight=1700),"mobile_rotated"==Object(l.e)()&&(n.minHeight=1e3),{view:"scrollview",scroll:"y",body:n}},f.init=function(){Object(l.i)("bills",Object(l.e)()),p.b.dashboards.bills=this,webix.event(window,"resize",(function(){"bills"==$$("top:menu").getSelectedId()&&Object(l.f)("bills")!=Object(l.e)()&&(Object(l.i)("bills",Object(l.e)()),null!=p.b.dashboards.bills._container&&p.b.dashboards.bills.refresh())}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var n=r(2),a=r(5),o=r(50),i=r(51),u=r(52),s=r(53),c=r(19),d=r(0),l=r(3);var p=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var p=n.prototype;return p.config=function(){var e,t,r=[];switch(Object(d.e)()){case"mobile":e=2,t=5,r.push({view:"panel",x:0,y:0,dx:2,dy:2,resize:!0,header:new a.default(this.app,"","bills_pay_split"),body:{type:"clean",margin:0,rows:[{template:"Factures",align:"center",type:"header"},{type:"clean",margin:0,cols:[new c.default(this.app,"","bill","type"),new c.default(this.app,"","bill","status")]},{template:"Encaissement",align:"center",type:"header"},{type:"clean",margin:0,cols:[new c.default(this.app,"","pay","type"),new c.default(this.app,"","pay","status")]}],css:{"background-color":"#fff"}}}),r.push({view:"panel",x:0,y:2,dx:2,dy:1,resize:!0,header:new a.default(this.app,"","bills_others"),body:{type:"clean",margin:0,cols:[s.default,i.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:3,dx:2,dy:2,header:new a.default(this.app,"","pay_others"),body:{type:"clean",margin:0,rows:[{template:"Encaissement par agent",type:"header"},u.default,o.default]}});break;case"mobile_rotated":e=4,t=5,r.push({view:"panel",x:0,y:0,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","bills_pay_split"),body:{type:"clean",margin:0,rows:[{template:"Factures",align:"center",type:"header"},{type:"clean",margin:0,cols:[new c.default(this.app,"","bill","type"),new c.default(this.app,"","bill","status")]},{template:"Encaissement",align:"center",type:"header"},{type:"clean",margin:0,cols:[new c.default(this.app,"","pay","type"),new c.default(this.app,"","pay","status")]}],css:{"background-color":"#fff"}}}),r.push({view:"panel",x:2,y:0,dx:2,dy:3,header:new a.default(this.app,"","pay_others"),body:{type:"clean",margin:0,rows:[{template:"Encaissement par agent",type:"header"},u.default,o.default]}}),r.push({view:"panel",x:0,y:3,dx:4,dy:2,resize:!0,header:new a.default(this.app,"","bills_others"),body:{type:"clean",margin:0,cols:[s.default,i.default]},css:{"background-color":"#fff"}});break;default:e=7,t=4,r.push({view:"panel",x:0,y:0,dx:2,dy:4,resize:!0,header:new a.default(this.app,"","bills_pay_split"),body:{type:"clean",margin:0,rows:[{template:"Factures",align:"center",type:"header"},{type:"clean",margin:0,cols:[new c.default(this.app,"","bill","type"),new c.default(this.app,"","bill","status")]},{template:"Encaissement",align:"center",type:"header"},{type:"clean",margin:0,cols:[new c.default(this.app,"","pay","type"),new c.default(this.app,"","pay","status")]}],css:{"background-color":"#fff"}}}),r.push({view:"panel",x:2,y:0,dx:3,dy:4,resize:!0,header:new a.default(this.app,"","bills_others"),body:{type:"clean",margin:0,cols:[s.default,i.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:5,y:0,dx:2,dy:4,header:new a.default(this.app,"","pay_others"),body:{type:"clean",margin:0,rows:[{template:"Encaissement par agent",type:"header"},u.default,o.default]}})}var n={view:"mobile"!=Object(d.e)()&&"mobile_rotated"!=Object(d.e)()?"c-dashboard":"m-dashboard",gridColumns:e,gridRows:t,margin:5,padding:5,cells:r,css:{"background-color":"#EBEDF0"}};return"mobile"==Object(d.e)()&&(n.minHeight=1500),"mobile_rotated"==Object(d.e)()&&(n.minHeight=900),{view:"scrollview",scroll:"y",body:n}},p.init=function(){Object(d.i)("bills",Object(d.e)()),l.b.dashboards.bills=this,webix.event(window,"resize",(function(){"bills"==$$("top:menu").getSelectedId()&&Object(d.f)("bills")!=Object(d.e)()&&(Object(d.i)("bills",Object(d.e)()),null!=l.b.dashboards.bills._container&&l.b.dashboards.bills.refresh())}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=r(1),o=r(18),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=webix.storage.session.get("filter");return{localId:"date_filt",view:"daterangepicker",name:"datef",value:{start:webix.Date.strToDate("%Y-%m-%d")(e.d1),end:webix.Date.strToDate("%Y-%m-%d")(e.d2)},on:{onChange:function(e,t){o.a.callEvent("filter","change","datef",e)}},suggest:{view:"daterangesuggest",body:{calendarCount:"mobile"==Object(i.e)()?1:2}}}},u.init=function(e){var t=this;this._type;a.f.then((function(e){t.$$("date_filt").define("label",e.filters.period.desc),t.$$("date_filt").refresh()}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=r(1),o=r(18),i=r(0);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._type=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{localId:this._type+"_filt",view:"mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)()?"multicombo":"multiselect",tagMode:!1,stringResult:!0}},u.init=function(e){var t=this,r=this._type,n=webix.storage.session.get("filter");a.f.then((function(a){t.$$(r+"_filt").define("suggest",{button:!0,selectAll:!0,data:a.filters[r].options}),t.$$(r+"_filt").define("label",a.filters[r].desc),void 0===n[r]?t.$$(t._type+"_filt").define("value",a.filters[r].options.join(",")):t.$$(t._type+"_filt").define("value",n[r]),e.define("placeholder",a.filters[r].default),e.define("tagTemplate",(function(e){return e.length?e.length==a.filters[r].options.length?a.filters[r].default:e.length+" "+a.filters[r].desc:a.filters[r].default})),e.define("on",{onChange:function(e,t){e.length!=a.filters[r].options.length?o.a.callEvent("filter","change",r,e):o.a.callEvent("filter","change",r,"")}}),t.$$(t._type+"_filt").refresh()}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return c}));var n=r(2),a=r(91),o=r(92),i=r(18),u=r(1),s=r(4);var c=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){var e=this;return u.f.then((function(t){var r=[{$subview:a.default}];for(var n in t.filters)"period"!=n&&r.push({$subview:new o.default(e.app,"",n)});return r.push({view:"button",value:"filtrer",id:"general:filter_button",name:"submit",width:100,align:"right",on:{onItemClick:function(){$$("general:filt_menu").hide(),Object(s.e)(),i.a.callEvent("filterButton","click")}}}),{view:"form",id:"menu:filt_form",width:450,elements:r}}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return o}));var n=r(2),a=r(93);var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){return{view:"sidemenu",id:"general:filt_menu",position:"right",css:"filt_menu",width:900,state:function(e){var t=$$("loginbar").$height;e.top=t,e.height-=t},body:a.default}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(43),o=r(3);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.config=function(){return{view:"toolbar",id:"loginbar",height:46,css:{"background-color":"#000"},elements:[{view:"icon",icon:"mdi mdi-menu",click:function(){$$("top:menu").toggle(),o.b.menucollapsed=!o.b.menucollapsed,webix.storage.session.put("menucollapsed",o.b.menucollapsed),window.dispatchEvent(new Event("resize"))}},{$subview:new a.BarLogoView(this.app,"","ologo")},{$subview:new a.BarLogoView(this.app,"","klogo")},{view:"label",id:"dashtitle",label:"<span style='color:#fff;' ></span>"},{resize:!0},{view:"label",id:"title",align:"left",label:"<span style='color:#fff;' >Home</span>"},{resize:!0},{template:'<span class="vertical-line"></span>',width:.5,height:30},{view:"label",id:"period",align:"left",minWidth:240,label:"<span style='color:#fff;font-size:14px' class='mdi mdi-calendar-check' > Période : "+Object(o.e)().d1+" - "+Object(o.e)().d2+"</span>",tooltip:function(){return"Période : "+Object(o.e)().d1+" - "+Object(o.e)().d2}},{view:"icon",icon:"mdi mdi-filter",click:function(){$$("general:filt_menu").config.hidden?$$("general:filt_menu").show():$$("general:filt_menu").hide()}},{$subview:new a.BarUserView(this.app,"","account")},{$subview:new a.BarUserView(this.app,"","logout")}]}},i.init=function(e){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return o}));var n=r(2),a=(r(43),r(3));var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.config=function(){var e;return(e={view:"toolbar",id:"loginbar",margin:2,css:{"background-color":"#000"}}).margin=5,e.elements=[{view:"icon",icon:"mdi mdi-menu",width:35,click:function(){$$("top:menu").config.hidden?$$("top:menu").show():$$("top:menu").hide(),webix.storage.session.put("mobileMenuhide",$$("top:menu").config.hidden),a.b.mobileMenuhide=$$("top:menu").config.hidden}},{view:"label",id:"title",align:"center"},{template:'<span class="vertical-line"></span>',width:.4,height:30},{view:"icon",icon:"mdi mdi-calendar-check",align:"left",id:"period",popup:"filterelmt:popup:period"},{view:"icon",icon:"mdi mdi-filter",align:"left",width:25,height:25,click:function(){$$("general:filt_menu").config.hidden?$$("general:filt_menu").show():$$("general:filt_menu").hide()}},{view:"icon",icon:"mdi mdi-logout",css:"webix_transparent acc_butt",align:"left",click:function(){webix.confirm({title:"Confirmation",ok:"Oui",cancel:"Non",text:"Voulez-vous vous déconnecter ?"}).then((function(){a.b.app.show("/logout")}))},width:25,height:25}],e},o.init=function(){this.ui({view:"popup",id:"filterelmt:popup:period",body:{template:"Period : "+Object(a.e)().d1+" - "+Object(a.e)().d2,autoheight:!0},maxWidth:250,css:"filter_tooltip"})},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(45),o=r(3);var i=function(e){var t,r;function i(){return e.apply(this,arguments)||this}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=i.prototype;return u.config=function(){return a.b.waitData.then((function(){return{view:"sidebar",id:"top:menu",layout:"y",select:!0,autowidth:!0,collapsed:o.b.menucollapsed,on:{onSelectChange:function(e){$$("title").config.label="<span style='color:#fff;' >"+$$("top:menu").getSelectedItem().value+"</span>",$$("title").refresh(),webix.storage.session.put("top.currentmenu",$$("top:menu").getSelectedId(),"",webix.Date.add(new Date,1,"minute"))}},data:a.b}}))},u.init=function(e){this.use(n.c.Menu,"top:menu")},i}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return _}));var n=r(2),a=r(55),o=r(56),i=r(57),u=r(58),s=r(8),c=r(59),d=r(60),l=r(5),p=r(61),f=r(0),h=r(3);var _=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var _=n.prototype;return _.config=function(){var e,t,r=[],n={view:"mobile"!=Object(f.e)()&&"mobile_rotated"!=Object(f.e)()?"c-dashboard":"m-dashboard",id:"home:dash",margin:5,padding:5,css:{"background-color":"#EBEDF0"}};switch(Object(f.e)()){case"mobile":e=2,t=30,r.push({view:"panel",x:0,y:0,dx:2,dy:6,resize:!0,header:new l.default(this.app,"","parc","homelines"),body:{type:"clean",margin:0,rows:[a.default,{type:"clean",margin:0,rows:[new s.default(this.app,"","parcHome",2),o.default]}]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:6,dx:2,dy:4,resize:!0,header:new l.default(this.app,"","arpu","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","arpuHome",2),d.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:10,dx:2,dy:5,resize:!0,header:new l.default(this.app,"","rev","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","revByType",3),u.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:15,dx:2,dy:5,resize:!0,header:new l.default(this.app,"","traffics","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","traff_per",3),p.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:20,dx:2,dy:5,resize:!0,header:new l.default(this.app,"","mnt_recharge","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","topupHome",2),c.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:25,dx:2,dy:5,resize:!0,header:new l.default(this.app,"","mnt_encaiss","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","payByType",2),i.default]},css:{"background-color":"#fff"}}),n.minHeight=1900;break;case"mobile_rotated":e=4,t=6,r.push({view:"panel",x:0,y:0,dx:2,dy:2,resize:!0,header:new l.default(this.app,"","parc","homelines"),body:{type:"clean",margin:0,rows:[a.default,{type:"clean",margin:0,rows:[new s.default(this.app,"","parcHome",2),o.default]}]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:2,y:0,dx:2,dy:2,resize:!0,header:new l.default(this.app,"","arpu","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","arpuHome",2),d.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:2,dx:2,dy:2,resize:!0,header:new l.default(this.app,"","rev","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","revByType",3),u.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:2,y:2,dx:2,dy:2,resize:!0,header:new l.default(this.app,"","traffics","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","traff_per",3),p.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:4,dx:2,dy:2,resize:!0,header:new l.default(this.app,"","mnt_recharge","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","topupHome",2),c.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:2,y:4,dx:2,dy:2,resize:!0,header:new l.default(this.app,"","mnt_encaiss","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","payByType",2),i.default]},css:{"background-color":"#fff"}}),n.minHeight=850;break;default:e=6,t=10,r.push({view:"panel",x:0,y:0,dx:2,dy:6,resize:!0,header:new l.default(this.app,"","parc","homelines"),body:{type:"clean",margin:0,rows:[a.default,{type:"clean",margin:0,rows:[new s.default(this.app,"","parcHome",2),o.default]}]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:6,dx:2,dy:4,resize:!0,header:new l.default(this.app,"","arpu","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","arpuHome",2),d.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:2,y:0,dx:2,dy:5,resize:!0,header:new l.default(this.app,"","rev","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","revByType",3),u.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:2,y:5,dx:2,dy:5,resize:!0,header:new l.default(this.app,"","traffics","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","traff_per",3),p.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:0,dx:2,dy:5,resize:!0,header:new l.default(this.app,"","mnt_recharge","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","topupHome",2),c.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:5,dx:2,dy:5,resize:!0,header:new l.default(this.app,"","mnt_encaiss","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new s.default(this.app,"","payByType",2),i.default]},css:{"background-color":"#fff"}})}return n.cells=r,n.gridColumns=e,n.gridRows=t,{view:"scrollview",scroll:"y",body:n}},_.init=function(e){Object(f.i)("home",Object(f.e)()),h.b.dashboards.home=this,webix.event(window,"resize",(function(){"home"==$$("top:menu").getSelectedId()&&Object(f.f)("home")!=Object(f.e)()&&(Object(f.i)("home",Object(f.e)()),null!=h.b.dashboards.home._container&&h.b.dashboards.home.refresh())}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(39),o=r(0);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.config=function(){return this._colCount=6,this._maxColCount=6,{view:"mobile"!=Object(o.e)()&&"mobile_rotated"!=Object(o.e)()?"c-dashboard":"m-dashboard",id:"home:stats",gridColumns:this._colCount,gridRows:1,maxHeight:100,responsive:"hide",cells:[{view:"panel",x:0,y:0,dx:1,dy:1,body:new a.default(this.app,"","parc")},{view:"panel",x:1,y:0,dx:1,dy:1,body:new a.default(this.app,"","revenue")},{view:"panel",x:2,y:0,dx:1,dy:1,body:new a.default(this.app,"","tvoix")},{view:"panel",x:3,y:0,dx:1,dy:1,body:new a.default(this.app,"","tdata")},{view:"panel",x:4,y:0,dx:1,dy:1,body:new a.default(this.app,"","topup")},{view:"panel",x:5,y:0,dx:1,dy:1,body:new a.default(this.app,"","encaiss")}]}},i.init=function(e){var t=this;webix.event(window,"resize",(function(){if(void 0===$$("top:menu")||"home"==$$("top:menu").getSelectedId()){if("mobile_rotated"==Object(o.e)())return void $$("home:stats").hide();$$("home:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("home:stats").define("gridColumns",t._colCount),$$("home:stats").adjust()}}))},i.ready=function(e){var t=this;if("mobile_rotated"!=Object(o.e)()){$$("home:stats").show();for(var r=window.screen.width;r/t._colCount<160;)t._colCount=t._colCount-1;r/t._colCount>160&&(t._colCount<t._maxColCount&&(t._colCount=t._colCount+1),r/t._colCount<160&&(t._colCount=t._colCount-1)),e.define("gridColumns",t._colCount),e.adjust()}else $$("home:stats").hide()},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(12),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"home:vue1:trend:arpu",animation:!0,beforedisplay:function(e,r,n){var a=[],o=[],i=[],u=e.map((function(e){return e.client_type})).filter((function(e,t,r){return r.indexOf(e)==t}));0!=e.length&&(u.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(o.push({dimensions:["month","trend"],source:e.filter((function(e){return e.client_type==r&&"month_trend"==e._type})),isAdded:!0}),a.push({type:"line",itemStyle:{color:t.revenue[r]},lineStyle:{color:t.revenue[r]},datasetIndex:o.length-1,name:r,encode:{x:"month",y:"trend"},gridIndex:1,smooth:!0})),e.some((function(e){return"dt_trend"==e._type}))&&(o.push({dimensions:["upd_dt","trend_dt"],source:e.filter((function(e){return e.client_type==r&&"dt_trend"==e._type})),isAdded:!0}),a.push({type:"bar",smooth:!0,barMinHeight:10,itemStyle:{color:t.revenue[r]},name:r,encode:{x:"upd_dt",y:"trend_dt"},datasetIndex:o.length-1,gridIndex:1})),i.push(t.revenue[r])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=o.length&&(r.dataset=o),0!=i.length&&(r.color=[].concat(i)),0!=a.length&&(r.series=a),r.legend.selectedMode="single")},charts_event:{click:[{seriesType:"line"},function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=this;this.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),this._clicked&&(t=!0,r._clicked=!1,clearTimeout(this.executeDoubleClick))}if(t)if($("button.ui.button.arpuHome_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("home:vue1:trend:arpu")._months||($$("home:vue1:trend:arpu")._months=[]),$$("home:vue1:trend:arpu")._months.some((function(t){return t==e.data.month})))$$("home:vue1:trend:arpu")._filter_level="m",$$("home:vue1:trend:arpu")._current_month=e.data.month,$$("home:vue1:trend:arpu").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||t.rec_type)}));else{var n=Object(o.a)("arpu","dt_trend",e.data.month+"-01");$$("home:vue1:trend:arpu").showProgress(),$$("home:vue1:trend:arpu").disable(),n.then((function(t){$$("home:vue1:trend:arpu")._months.push(e.data.month),$$("home:vue1:trend:arpu")._filter_level="m",$$("home:vue1:trend:arpu").parse(n).then((function(){$$("home:vue1:trend:arpu").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||t.rec_type)}))})),$$("home:vue1:trend:arpu")._current_month=e.data.month,$$("home:vue1:trend:arpu").enable(),$$("home:vue1:trend:arpu").hideProgress()}))}else this._clicked=!0}]},options:{tooltip:{trigger:"axis",show:!0,z:2,axisPointer:{show:!0},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){var t=e[0].name+"<br/>",n=e[0].dimensionNames[1];console.log(n);for(var a,o=s(e);!(a=o()).done;){var u=a.value;t+=u.marker+(r.revenue[u.seriesName]?r.revenue[u.seriesName]:u.seriesName)+" : "+Object(i.b)(u.value[n])+"<br/>"}return t}},grid:[{left:5,top:10,right:5,bottom:35,containLabel:!0}],legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},dataset:[],xAxis:[{type:"category",isDim:!0,_type:"trend",splitLine:{show:!1},axisPointer:{show:!0},axisLabel:{show:!0},axisTick:{show:!0,alignWithLabel:!0}}],yAxis:[{type:"value",isDim:!0,splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("home:vue1:trend:arpu").showProgress(),$$("home:vue1:trend:arpu").disable(),a.c.home.push({cmp:"home:vue1:trend:arpu",data:Object(o.b)("trend_arpu").config.id}),$$("home:vue1:trend:arpu")._months=[],$$("home:vue1:trend:arpu")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:arpu")._filter_level="a",Object(o.b)("trend_arpu").waitData.then((function(e){$$("home:vue1:trend:arpu")._isDataLoaded=1,$$("home:vue1:trend:arpu").parse(Object(o.b)("trend_arpu")),$$("home:vue1:trend:arpu").enable(),$$("home:vue1:trend:arpu").hideProgress()})),$$("home:vue1:trend:arpu").data.attachEvent("onStoreLoad",(function(){Object(i.j)("home:vue1:trend:arpu")})),Object(o.b)("trend_arpu").attachEvent("onBeforeLoad",(function(){"home"==$$("top:menu").getSelectedId()&&($$("home:vue1:trend:arpu")._months=[],$$("home:vue1:trend:arpu")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:arpu")._filter_level="a")}))},c.ready=function(e){$$("arpuHome").attachEvent("onAfterRender",(function(){$("button.ui.button.arpuHome_"+periodSplit[1]).on("click",(function(){if("a"==e._filter_level)if(e._filter_level="m",e._months.some((function(t){return t==e._current_month})))e.data.filter((function(t){return"month_trend"!=t._type&&t.period==e._current_month}));else{var t=Object(o.a)("arpu","dt_trend",e._current_month+"-01");e.showProgress(),e.disable(),t.then((function(r){e._months.push(e._current_month),e.parse(t).then((function(){e.data.filter((function(t){return"month_trend"!=t._type&&t.period==e._current_month}))})),e._current_month=e._current_month,e.enable(),e.hideProgress()}))}})),$("button.ui.button.arpuHome_"+periodSplit[0]).on("click",(function(){e&&"m"==e._filter_level&&(e._filter_level="a",e.data.filter((function(e){return"dt_trend"!=e._type})))}))}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(12),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){this._kpi;return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"dmd:vue1:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[];if(e.sort(),0!=e.length){var d=e.map((function(e){return e.clt_type})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==e[0]._type?e.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","qty"],source:e.filter((function(e){return e.clt_type==r&&"month_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.demands[r]},stack:"split",id:"dmd_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,barMaxWidth:40,_isStack:!0,name:r,encode:{x:"month",y:"qty"},gridIndex:1})),e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","qty"],source:e.filter((function(e){return e.clt_type==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.demands[r]},itemStyle:{color:t.demands[r]},_isStack:!0,name:r,encode:{x:"upd_dt",y:"qty"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"dmd_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.payments[r]),console.log(c)})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=c.length&&(r.color=[].concat(c)),0!=u.length&&(r.series=[].concat(u,r.series)),r.legend.selectedMode="multiple",r.xAxis[0].data=[].concat(l)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+(r.revenue[o.seriesName]?r.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.qty)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},dataset:[{dimensions:["rev_type","qty"]}],grid:[{left:5,top:10,right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("dmd:vue1:trend").showProgress(),$$("dmd:vue1:trend").disable(),$$("dmd:vue1:trend")._filter_level="a",$$("dmd:vue1:trend")._months=[],$$("dmd:vue1:trend")._days=[],$$("dmd:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("dmd:vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.home.push({cmp:"dmd:vue1:trend",data:Object(o.b)("dmd_trend").config.id}),Object(o.b)("dmd_trend").waitData.then((function(e){$$("dmd:vue1:trend")._isDataLoaded=1,$$("dmd:vue1:trend").parse(Object(o.b)("dmd_trend")),$$("dmd:vue1:trend").enable(),$$("dmd:vue1:trend").hideProgress()})),$$("dmd:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("dmd:vue1:trend")})),Object(o.b)("dmd_trend").attachEvent("onBeforeLoad",(function(){"home"==$$("top:menu").getSelectedId()&&($$("dmd:vue1:trend")._filter_level="a",$$("dmd:vue1:trend")._months=[],$$("dmd:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("dmd:vue1:trend")._current_upd_dt=Object(u.a)().d1)})),$("button.ui.button.dmdByType_"+periodSplit[1]).on("click",(function(){"m"!=$$("dmd:vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("dmd:vue1:trend")._current_month}})})),$("button.ui.button.dmdByType_"+periodSplit[0]).on("click",(function(){"m"==$$("dmd:vue1:trend")._filter_level&&($$("dmd:vue1:trend")._filter_level="a",$$("dmd:vue1:trend").data.filter((function(e){return"month_trend"==e._type})))}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.dmdByType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("dmd:vue1:trend")._months||($$("dmd:vue1:trend")._months=[]),$$("dmd:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("dmd:vue1:trend")._filter_level="m",$$("dmd:vue1:trend")._current_month=e.data.month,$$("dmd:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("demand","dt_trend",e.data.month+"-01","vue2");$$("dmd:vue1:trend").showProgress(),$$("dmd:vue1:trend").disable(),t.then((function(r){$$("dmd:vue1:trend")._months.push(e.data.month),$$("dmd:vue1:trend")._filter_level="m",$$("dmd:vue1:trend").parse(t).then((function(){$$("dmd:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("dmd:vue1:trend")._current_month=e.data.month,$$("dmd:vue1:trend").enable(),$$("dmd:vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var n=r(2),a=r(103),o=r(104),i=r(8),u=r(105),s=r(100),c=r(5),d=r(106),l=r(0),p=r(101),f=r(3);var h=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var h=n.prototype;return h.config=function(){var e,t,r=[],n={view:"c-dashboard",id:"home:dash",margin:5,padding:5,css:{"background-color":"#EBEDF0"}};return Object(l.e)(),e=6,t=4,r.push({view:"panel",x:0,y:0,dx:2,dy:2,resize:!0,header:new c.default(this.app,"","parc","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new i.default(this.app,"","parcByType",2),a.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:2,dx:2,dy:2,resize:!0,header:new c.default(this.app,"","arpu","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new i.default(this.app,"","arpuHome",2),s.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:2,y:0,dx:2,dy:2,resize:!0,header:new c.default(this.app,"","rev","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new i.default(this.app,"","revByType",2),o.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:0,dx:2,dy:2,resize:!0,header:new c.default(this.app,"","traffics","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new i.default(this.app,"","traff_per",3),d.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:2,y:2,dx:2,dy:2,resize:!0,header:new c.default(this.app,"","mnt_paid","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new i.default(this.app,"","payByType",2),u.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:2,dx:2,dy:2,resize:!0,header:new c.default(this.app,"","demandes","homelines"),body:{type:"clean",margin:0,rows:[{height:10},new i.default(this.app,"","dmdByType",2),p.default]},css:{"background-color":"#fff"}}),n.cells=r,n.gridColumns=e,n.gridRows=t,{view:"scrollview",scroll:"y",body:n}},h.init=function(e){Object(l.i)("home",Object(l.e)()),f.b.dashboards.home=this,webix.event(window,"resize",(function(){"home"==$$("top:menu").getSelectedId()&&Object(l.f)("home")!=Object(l.e)()&&(Object(l.i)("home",Object(l.e)()),null!=f.b.dashboards.home._container&&f.b.dashboards.home.refresh())}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(12),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"parc:vue1:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[],d=e.map((function(e){return e.client_type})).filter((function(e,t,r){return r.indexOf(e)==t}));0!=e.length&&(a.off("click"),d.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","parc"],source:e.filter((function(e){return e.client_type==r&&"month_trend"==e._type}))}),u.push({type:"bar",itemStyle:{color:t.parc[r]},id:"parc_type_trend:"+r,datasetIndex:s.length-1,barMinHeight:10,barMaxWidth:20,name:r,encode:{x:"month",y:"parc"},gridIndex:1})),e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","parc"],source:e.filter((function(e){return e.client_type==r&&"dt_trend"==e._type}))}),u.push({type:"line",smooth:!0,lineStyle:{color:t.parc[r]},itemStyle:{color:t.parc[r]},name:r,encode:{x:"upd_dt",y:"parc"},datasetIndex:s.length-1,gridIndex:1})),a.on("click",{seriesId:"parc_type_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.parc[r])})),0!=s.length&&(r.dataset=s),0!=c.length&&(r.color=[].concat(c)),0!=u.length&&(r.series=u),r.legend.selectedMode="multiple")},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+r.parc[o.seriesName]+" : "+Object(i.b)(o.value.parc)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.parc[e]?r.parc[e]:e}},dataset:[{dimensions:["client_type","parc"]}],grid:[{left:5,top:10,right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("parc:vue1:trend").showProgress(),$$("parc:vue1:trend").disable(),$$("parc:vue1:trend")._filter_level="a",$$("parc:vue1:trend")._months=[],$$("parc:vue1:trend")._days=[],$$("parc:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("parc:vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.home.push({cmp:"parc:vue1:trend",data:Object(o.b)("parc_trend").config.id}),Object(o.b)("parc_trend").waitData.then((function(e){$$("parc:vue1:trend")._isDataLoaded=1,$$("parc:vue1:trend").parse(Object(o.b)("parc_trend")),$$("parc:vue1:trend").enable(),$$("parc:vue1:trend").hideProgress()})),$$("parc:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:trend")})),Object(o.b)("parc_trend").attachEvent("onBeforeLoad",(function(){"home"==$$("top:menu").getSelectedId()&&($$("parc:vue1:trend")._filter_level="a",$$("parc:vue1:trend")._months=[],$$("parc:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("parc:vue1:trend")._current_upd_dt=Object(u.a)().d1)})),$("button.ui.button.parcByType_"+periodSplit[1]).on("click",(function(){"m"!=$$("parc:vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("parc:vue1:trend")._current_month}})})),$("button.ui.button.parcByType_"+periodSplit[0]).on("click",(function(){"m"==$$("parc:vue1:trend")._filter_level&&($$("parc:vue1:trend")._filter_level="a",$$("parc:vue1:trend").data.filter((function(e){return"month_trend"==e._type||"parc_type"==e._type})))}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.parcByType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("parc:vue1:trend")._months||($$("parc:vue1:trend")._months=[]),$$("parc:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("parc:vue1:trend")._filter_level="m",$$("parc:vue1:trend")._current_month=e.data.month,$$("parc:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("parc","dt_trend",e.data.month+"-01","vue2");$$("parc:vue1:trend").showProgress(),$$("parc:vue1:trend").disable(),t.then((function(r){$$("parc:vue1:trend")._months.push(e.data.month),$$("parc:vue1:trend")._filter_level="m",$$("parc:vue1:trend").parse(t).then((function(){$$("parc:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("parc:vue1:trend")._current_month=e.data.month,$$("parc:vue1:trend").enable(),$$("parc:vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(12),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){this._kpi;return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"rev:vue1:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[];if(e.sort(),0!=e.length){var d=e.map((function(e){return e.rev_type})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==e[0]._type?e.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","revenue"],source:e.filter((function(e){return e.rev_type==r&&"month_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.revenue[r]},stack:"split",id:"rev_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,barMaxWidth:40,_isStack:!0,name:r,encode:{x:"month",y:"revenue"},gridIndex:1})),e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","revenue"],source:e.filter((function(e){return e.rev_type==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.revenue[r]},itemStyle:{color:t.revenue[r]},_isStack:!0,name:r,encode:{x:"upd_dt",y:"revenue"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"rev_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.revenue[r]),console.log(c)})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=c.length&&(r.color=[].concat(c)),0!=u.length&&(r.series=[].concat(u,r.series)),r.legend.selectedMode="multiple",r.xAxis[0].data=[].concat(l)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+(r.revenue[o.seriesName]?r.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.revenue)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},dataset:[{dimensions:["rev_type","revenue"]}],grid:[{left:5,top:10,right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),$$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend")._months=[],$$("rev:vue1:trend")._days=[],$$("rev:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.home.push({cmp:"rev:vue1:trend",data:Object(o.b)("rev_trend").config.id}),Object(o.b)("rev_trend").waitData.then((function(e){$$("rev:vue1:trend")._isDataLoaded=1,$$("rev:vue1:trend").parse(Object(o.b)("rev_trend")),$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()})),$$("rev:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:trend")})),Object(o.b)("rev_trend").attachEvent("onBeforeLoad",(function(){"home"==$$("top:menu").getSelectedId()&&($$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend")._months=[],$$("rev:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend")._current_upd_dt=Object(u.a)().d1)})),$("button.ui.button.revByType_"+periodSplit[1]).on("click",(function(){"m"!=$$("rev:vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("rev:vue1:trend")._current_month}})})),$("button.ui.button.revByType_"+periodSplit[0]).on("click",(function(){"m"==$$("rev:vue1:trend")._filter_level&&($$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend").data.filter((function(e){return"month_trend"==e._type})))})),$$("revByType").disable()},c.ready=function(e){$$("revByType").enable(),e.attachEvent("onAfterRender",(function(){"home"==$$("top:menu").getSelectedId()&&(console.log("READY"),$$("revByType").enable(),e.adjust(),$$("home:dash").adjust())}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.revByType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:trend")._months||($$("rev:vue1:trend")._months=[]),$$("rev:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("rev:vue1:trend")._filter_level="m",$$("rev:vue1:trend")._current_month=e.data.month,$$("rev:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("revenue","dt_trend",e.data.month+"-01","vue2");$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),t.then((function(r){$$("rev:vue1:trend")._months.push(e.data.month),$$("rev:vue1:trend")._filter_level="m",$$("rev:vue1:trend").parse(t).then((function(){$$("rev:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("rev:vue1:trend")._current_month=e.data.month,$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(12),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){this._kpi;return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"pay:vue1:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[];if(e.sort(),0!=e.length){var d=e.map((function(e){return e.clt_type})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==e[0]._type?e.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","revenue"],source:e.filter((function(e){return e.clt_type==r&&"month_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.payments[r]},stack:"split",id:"pay_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,barMaxWidth:40,_isStack:!0,name:r,encode:{x:"month",y:"revenue"},gridIndex:1})),e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","revenue"],source:e.filter((function(e){return e.clt_type==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.payments[r]},itemStyle:{color:t.payments[r]},_isStack:!0,name:r,encode:{x:"upd_dt",y:"revenue"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"pay_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.payments[r])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=c.length&&(r.color=[].concat(c)),0!=u.length&&(r.series=[].concat(u,r.series)),r.legend.selectedMode="multiple",r.xAxis[0].data=[].concat(l)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+(r.revenue[o.seriesName]?r.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.revenue)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},dataset:[{dimensions:["rev_type","revenue"]}],grid:[{left:5,top:10,right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("pay:vue1:trend").showProgress(),$$("pay:vue1:trend").disable(),$$("pay:vue1:trend")._filter_level="a",$$("pay:vue1:trend")._months=[],$$("pay:vue1:trend")._days=[],$$("pay:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("pay:vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.home.push({cmp:"pay:vue1:trend",data:Object(o.b)("pay_trend").config.id}),Object(o.b)("pay_trend").waitData.then((function(e){$$("pay:vue1:trend")._isDataLoaded=1,$$("pay:vue1:trend").parse(Object(o.b)("pay_trend")),$$("pay:vue1:trend").enable(),$$("pay:vue1:trend").hideProgress(),$$("pay:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("pay:vue1:trend")})),Object(o.b)("pay_trend").attachEvent("onBeforeLoad",(function(){"home"==$$("top:menu").getSelectedId()&&($$("pay:vue1:trend")._filter_level="a",$$("pay:vue1:trend")._months=[],$$("pay:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("pay:vue1:trend")._current_upd_dt=Object(u.a)().d1)}))})),$("button.ui.button.payByType_"+periodSplit[1]).on("click",(function(){"m"!=$$("pay:vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("pay:vue1:trend")._current_month}})})),$("button.ui.button.payByType_"+periodSplit[0]).on("click",(function(){"m"==$$("pay:vue1:trend")._filter_level&&($$("pay:vue1:trend")._filter_level="a",$$("pay:vue1:trend").data.filter((function(e){return"month_trend"==e._type})))}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.payByType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("pay:vue1:trend")._months||($$("pay:vue1:trend")._months=[]),$$("pay:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("pay:vue1:trend")._filter_level="m",$$("pay:vue1:trend")._current_month=e.data.month,$$("pay:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("pay","dt_trend",e.data.month+"-01","vue2");$$("pay:vue1:trend").showProgress(),$$("pay:vue1:trend").disable(),t.then((function(r){$$("pay:vue1:trend")._months.push(e.data.month),$$("pay:vue1:trend")._filter_level="m",$$("pay:vue1:trend").parse(t).then((function(){$$("pay:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("pay:vue1:trend")._current_month=e.data.month,$$("pay:vue1:trend").enable(),$$("pay:vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(12),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){for(var e,t=[],r=[],o=[],u=function(){var n=e.value;r.push({dimensions:["month","traffic"]},{dimensions:["upd_dt","traffic"]},{dimensions:["slot","traffic"]});var a=trafficYaxisType[n]?trafficYaxisType[n].index:0;o.push({type:"value",position:"left",axisLabel:{formatter:function(e,t){return n.indexOf("data")>=0?Object(i.a)(e):Object(i.h)(e)}},splitLine:{show:!0}}),t.push({type:"line",gridIndex:1,encode:{x:"month",y:"traffic"},seriesLayoutBy:"row",datasetIndex:r.length-3,_kpi:n,name:n,yAxisIndex:a,_type:"month_trend",id:"traff:month_split:"+n,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"voice"==n?"red":"sms"==n?"green":"blue"},{offset:1,color:"white"}],global:!1}},smooth:!0,lineStyle:{color:"voice"==n?"red":"sms"==n?"green":"blue",width:2.5},itemStyle:{color:"voice"==n?"red":"sms"==n?"green":"blue"},z:3},{type:"line",gridIndex:1,encode:{x:"upd_dt",y:"traffic"},_type:"dt_trend",_kpi:n,id:"traff:dt_split:"+n,datasetIndex:r.length-2,name:n,itemStyle:{color:"voice"==n?"red":"sms"==n?"green":"blue"},yAxisIndex:a},{type:"bar",gridIndex:1,encode:{x:"slot",y:"traffic"},_kpi:n,_type:"slot_trend",id:"traff:slot_split:"+n,datasetIndex:r.length-1,name:n,itemStyle:{color:"voice"==n?"red":"sms"==n?"green":"blue"},yAxisIndex:a})},c=s(traffType);!(e=c()).done;)u();return webix.promise.all([a.a,a.e]).then((function(e){e[0];var a=e[1];return{view:"echarts-grid-dataset",id:"home:vue1:trend:traff",animation:!0,beforedisplay:function(e,t,r){var a=this;r.off("click"),r.on("legendselectchanged",(function(e){r.setOption({title:{text:trafficYaxisType[e.name].name}})}));for(var o,u=s(traffType);!(o=u()).done;){var c=o.value;r.on("click",{seriesId:"traff:month_split:"+c},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=a;a.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),a._clicked&&(t=!0,r._clicked=!1,clearTimeout(a.executeDoubleClick))}t?n.filterHandler(e):a._clicked=!0})),r.on("click",{seriesId:"traff:dt_split:"+c},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=a;a.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),a._clicked&&(t=!0,r._clicked=!1,clearTimeout(a.executeDoubleClick))}t?n.filterHandler(e):a._clicked=!0})),r.on("click",{seriesId:"traff:slot_split:"+c},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=a;a.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),a._clicked&&(t=!0,r._clicked=!1,clearTimeout(a.executeDoubleClick))}t?n.filterHandler(e):a._clicked=!0}))}},options:{legend:{show:!0,itemGap:20,bottom:5,selectedMode:"single",type:"scroll",textStyle:{fontSize:10},formatter:function(e){return a.revenue[e]?a.revenue[e]:e}},tooltip:{trigger:"axis",show:!0,z:2,axisPointer:{show:!0},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){var t=e[0].name+"<br/>",r=e[0].dimensionNames[1];return t+=e[0].marker+Object(i.b)(e[0].data[r])}},title:{text:trafficYaxisType.voice.name,left:"20%",textAlign:"center",textStyle:{fontSize:10}},grid:[{left:5,right:5,top:20,bottom:35,containLabel:!0}],dataset:r,xAxis:[{type:"category",splitNumber:6,splitLine:{show:!1},axisPointer:{show:!0},axisTick:{show:!0,alignWithLabel:!0}}],yAxis:o,series:t}}}))},c.init=function(e){$$("home:vue1:trend:traff").showProgress(),$$("home:vue1:trend:traff").disable(),a.c.home.push({cmp:"home:vue1:trend:traff",data:Object(o.b)("traffic_split").config.id}),$$("home:vue1:trend:traff")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:traff")._months=[],$$("home:vue1:trend:traff")._filter_level="a",$$("home:vue1:trend:traff")._current_upd_dt=Object(u.a)().d1,Object(o.b)("traffic_split").waitData.then((function(e){$$("home:vue1:trend:traff")._isDataLoaded=1,$$("home:vue1:trend:traff").parse(Object(o.b)("traffic_split")),$$("home:vue1:trend:traff").enable(),$$("home:vue1:trend:traff").hideProgress()})),$$("home:vue1:trend:traff").data.attachEvent("onClearAll",(function(){console.log("BEFORE LOADING"),"home"==$$("top:menu").getSelectedId()&&($$("home:vue1:trend:traff")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:traff")._months=[],$$("home:vue1:trend:traff")._filter_level="a",$$("home:vue1:trend:traff")._current_upd_dt=Object(u.a)().d1)})),$$("home:vue1:trend:traff").data.attachEvent("onStoreLoad",(function(){Object(i.j)("home:vue1:trend:traff")})),$$("traff_per").attachEvent("onAfterRender",(function(){"home"==$$("top:menu").getSelectedId()&&($("button.ui.button.traff_per_"+periodSplit[1]).on("click",(function(){"m"!=$$("home:vue1:trend:traff")._filter_level&&n.filterHandler({data:{month:$$("home:vue1:trend:traff")._current_month,_type:"month_trend"}})})),$("button.ui.button.traff_per_"+periodSplit[2]).on("click",(function(){"s"!=$$("home:vue1:trend:traff")._filter_level&&n.filterHandler({data:{upd_dt:$$("home:vue1:trend:traff")._current_upd_dt,_type:"dt_trend",seriesName:$$("home:vue1:trend:traff")._current_serie_selected}})})),$("button.ui.button.traff_per_"+periodSplit[0]).on("click",(function(){"m"!=$$("home:vue1:trend:traff")._filter_level&&"s"!=$$("home:vue1:trend:traff")._filter_level||($$("home:vue1:trend:traff")._filter_level="a",$$("home:vue1:trend:traff").data.filter((function(e){return"month_trend"==e._type})))})))}))},c.ready=function(e){},n.filterHandler=function(e){if(e.data)switch(e.data._type){case"month_trend":if($("button.ui.button.traff_per_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("home:vue1:trend:traff")._months||($$("home:vue1:trend:traff")._months=[]),$$("home:vue1:trend:traff")._months.some((function(t){return t==e.data.month})))$$("home:vue1:trend:traff")._filter_level="m",$$("home:vue1:trend:traff")._current_month=e.data.month,$$("home:vue1:trend:traff").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("traffic","vue2",e.data.month+"-01","vue2");$$("home:vue1:trend:traff").showProgress(),$$("home:vue1:trend:traff").disable(),t.then((function(r){$$("home:vue1:trend:traff")._months.push(e.data.month),$$("home:vue1:trend:traff")._filter_level="m",$$("home:vue1:trend:traff").parse(t).then((function(){$$("home:vue1:trend:traff").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("home:vue1:trend:traff")._current_month=e.data.month,$$("home:vue1:trend:traff").enable(),$$("home:vue1:trend:traff").hideProgress()}))}break;case"dt_trend":if($("button.ui.button.traff_per_"+periodSplit[2]).addClass("active").siblings().removeClass("active"),$$("home:vue1:trend:traff")._days||($$("home:vue1:trend:traff")._days=[]),$$("home:vue1:trend:traff")._days.some((function(t){return t==e.data.upd_dt})))$$("home:vue1:trend:traff")._filter_level="s",$$("home:vue1:trend:traff")._current_upd_dt=e.data.upd_dt,$$("home:vue1:trend:traff").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}));else{var r=Object(o.a)("traffic","vue3",e.data.upd_dt,"vue3");$$("home:vue1:trend:traff").showProgress(),$$("home:vue1:trend:traff").disable(),r.then((function(t){$$("home:vue1:trend:traff")._days.push(e.data.upd_dt),$$("home:vue1:trend:traff")._filter_level="s",$$("home:vue1:trend:traff").parse(r).then((function(){$$("home:vue1:trend:traff").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}))})),$$("home:vue1:trend:traff")._current_upd_dt=e.data.upd_dt,$$("home:vue1:trend:traff")._current_serie_selected=e.seriesName,$$("home:vue1:trend:traff").enable(),$$("home:vue1:trend:traff").hideProgress()}))}}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(40),o=r(0);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.config=function(){return this._colCount=6,this._maxColCount=6,{view:"dashboard",id:"home:stats",gridColumns:this._colCount,gridRows:1,maxHeight:100,responsive:"hide",cells:[{view:"panel",x:0,y:0,dx:1,dy:1,body:new a.default(this.app,"","parc")},{view:"panel",x:1,y:0,dx:1,dy:1,body:new a.default(this.app,"","revenue_fai")},{view:"panel",x:2,y:0,dx:1,dy:1,body:new a.default(this.app,"","revenue_gros")},{view:"panel",x:3,y:0,dx:1,dy:1,body:new a.default(this.app,"","rsales")},{view:"panel",x:4,y:0,dx:1,dy:1,body:new a.default(this.app,"","fpaid")},{view:"panel",x:5,y:0,dx:1,dy:1,body:new a.default(this.app,"","tvoix")}]}},i.init=function(e){var t=this;webix.event(window,"resize",(function(){if(void 0===$$("top:menu")||"home"==$$("top:menu").getSelectedId()){if("mobile_rotated"==Object(o.e)())return void $$("home:stats").hide();$$("home:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("home:stats").define("gridColumns",t._colCount),$$("home:stats").adjust()}}))},i.ready=function(e){var t=this;if("mobile_rotated"!=Object(o.e)()){$$("home:stats").show();for(var r=window.screen.width;r/t._colCount<160;)t._colCount=t._colCount-1;r/t._colCount>160&&(t._colCount<t._maxColCount&&(t._colCount=t._colCount+1),r/t._colCount<160&&(t._colCount=t._colCount-1)),e.define("gridColumns",t._colCount),e.adjust()}else $$("home:stats").hide()},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(30),o=r(0);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.config=function(){return this._colCount=7,this._maxColCount=7,{view:"mobile"!=Object(o.e)()&&"mobile_rotated"!=Object(o.e)()?"c-dashboard":"m-dashboard",id:"mon:stats",gridColumns:this._colCount,gridRows:1,maxHeight:100,responsive:"hide",cells:[{view:"panel",x:0,y:0,dx:1,dy:1,body:new a.default(this.app,"","tot")},{view:"panel",x:1,y:0,dx:1,dy:1,body:new a.default(this.app,"","ocs")},{view:"panel",x:2,y:0,dx:1,dy:1,body:new a.default(this.app,"","ims")},{view:"panel",x:3,y:0,dx:1,dy:1,body:new a.default(this.app,"","ocb")},{view:"panel",x:4,y:0,dx:1,dy:1,body:new a.default(this.app,"","pgw")},{view:"panel",x:5,y:0,dx:1,dy:1,body:new a.default(this.app,"","msc")},{view:"panel",x:6,y:0,dx:1,dy:1,body:new a.default(this.app,"","sico")}]}},i.init=function(e){var t=this;webix.event(window,"resize",(function(){if(void 0===$$("top:menu")||"monitor"==$$("top:menu").getSelectedId()){if("mobile_rotated"==Object(o.e)())return void $$("mon:stats").hide();$$("mon:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("mon:stats").define("gridColumns",t._colCount),$$("mon:stats").adjust()}}))},i.ready=function(e){var t=this;if("mobile_rotated"!=Object(o.e)()){$$("mon:stats").show();for(var r=window.screen.width;r/t._colCount<160;)t._colCount=t._colCount-1;r/t._colCount>160&&(t._colCount<t._maxColCount&&(t._colCount=t._colCount+1),r/t._colCount<160&&(t._colCount=t._colCount-1)),e.define("gridColumns",t._colCount),e.adjust()}else $$("mon:stats").hide()},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=r(5),o=r(110),i=r(84),u=r(0);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){var e,t,r=[];switch(Object(u.e)()){case"mobile":case"mobile_rotated":e=2,t=2,r.push({view:"panel",x:0,y:0,dx:2,dy:2,resize:!0,header:new a.default(this.app,"","monitor_line"),body:i.default});break;default:e=3,t=2,r.push({view:"panel",x:0,y:0,dx:2,dy:2,resize:!0,header:new a.default(this.app,"","monitor_tab"),body:o.default}),r.push({view:"panel",x:2,y:0,dx:1,dy:2,resize:!0,header:new a.default(this.app,"","monitor_line"),body:i.default})}var n={view:"mobile"!=Object(u.e)()&&"mobile_rotated"!=Object(u.e)()?"c-dashboard":"m-dashboard",gridColumns:e,gridRows:t,margin:5,padding:5,cells:r,css:{"background-color":"#EBEDF0"}};return{view:"scrollview",scroll:"y",body:n}},s.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=r(31),o=r(0),i=r(1);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"datatable",id:"monitorTab",css:"webix_header_border",scrollX:!0,resizeColumn:!0,columns:[{id:"node",header:{text:"<span style='font-size: 11px;'>Type</span>",css:{"text-align":"left"}},sort:"string",fillspace:2,adjust:!0,css:{"text-align":"left"}},{id:"src",fillspace:1,header:{text:"<span style='font-size: 11px;'>Source</span>",css:{"text-align":"center"}},adjust:!0,css:{"text-align":"center"},sort:"string"},{id:"count_b5",fillspace:2,header:{text:"<span style='font-size: 11px;'>Fich. Big5</span>",css:{"text-align":"center"}},adjust:!0,css:{"text-align":"center"},sort:"int",format:function(e){return e<0?"-":Object(o.b)(e)}},{id:"count_IN",fillspace:2,header:{text:"<span style='font-size: 11px;'>Fich. SBIN</span>",css:{"text-align":"center"}},adjust:!0,css:{"text-align":"center"},sort:"int",format:function(e){return e<0?"-":Object(o.b)(e)}},{id:"fdiff",fillspace:2,header:{text:"<span style='font-size: 11px;'>Big5 vs OCS</span>",css:{"text-align":"center"}},adjust:!0,css:{"text-align":"center"},sort:"int"},{id:"fcount",header:{text:"<span style='font-size: 11px;'>Fichiers</span>",css:{"text-align":"center"}},adjust:!0,css:{"text-align":"right"},sort:"int",fillspace:2,format:function(e){return Object(o.b)(e)}},{id:"fvar",header:{text:"<span style='font-size: 11px;'>Var. Fich.(%)</span>",css:{"text-align":"center"}},adjust:!0,css:{"text-align":"right"},sort:"abs_sort",fillspace:2,format:function(e){return Object(o.b)(e,"p")}},{id:"count",header:{text:"<span style='font-size: 11px;'>Enregistrement</span>",css:{"text-align":"center"}},adjust:!0,css:{"text-align":"right"},sort:"int",fillspace:2,format:function(e){return Object(o.b)(e)}},{id:"last_dt",header:{text:"<span style='font-size: 11px;'>last date</span>",css:{"text-align":"center"}},minWidth:160,adjust:!0,css:{"text-align":"right"},sort:"string",fillspace:2},{id:"var",header:{text:"<span style='font-size: 11px;'>Var. Enreg.(%)</span>",css:{"text-align":"center"}},adjust:!0,css:{"text-align":"right"},sort:"abs_sort",fillspace:2,format:function(e){return Object(o.b)(e,"p")}}],select:!0}},u.init=function(e){webix.extend($$("monitorTab"),webix.ProgressBar),$$("monitorTab").showProgress(),$$("monitorTab").disable();var t=Object(a.a)("mon_tab");t.data.scheme({$init:function(e){Math.abs(e.fvar)>5&&Math.abs(e.fvar)<10&&(e.$css={"background-color":"#ff9f40",color:"white"}),Math.abs(e.fvar)>=10&&Math.abs(e.fvar)<20&&(e.$css={"background-color":"#cc6600",color:"white"}),Math.abs(e.fvar)>=20&&(e.$css={"background-color":"red",color:"white"}),Math.abs(e.var)>5&&Math.abs(e.var)<10&&(e.$css={"background-color":"#ff9f40",color:"white"}),Math.abs(e.var)>=10&&Math.abs(e.var)<20&&(e.$css={"background-color":"#cc6600",color:"white"}),Math.abs(e.var)>=20&&(e.$css={"background-color":"red",color:"white"})}}),i.c.monitor.push({cmp:"monitorTab",data:t.config.id}),t.waitData.then((function(){$$("monitorTab").parse(t),e.sort("#var#","desc","abs_sort"),$$("monitorTab").hideProgress(),$$("monitorTab").enable()})),$$("monitorTab").attachEvent("onSelectChange",(function(){var e=this.getSelectedItem();$$("mon:vue1:trend")._legend_selected=e.node;var t=$$("mon:vue1:trend")._echart_obj.getOption().legend[0],r=Object.keys(t.selected).filter((function(e){return t.selected[e]}));t.selected[e.node]=!0,t.selected[r[0]]=!1,$$("mon:vue1:trend")._echart_obj.setOption({legend:t})})),e.data.attachEvent("onStoreLoad",(function(){e.sort("#var#","desc","abs_sort"),Object(o.j)("monitorTab")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var n=r(2),a=r(0),o=r(3),i=r(5),u=r(22),s=r(23),c=r(62),d=r(63),l=r(64),p=r(8),f=r(65);var h=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var h=n.prototype;return h.config=function(){var e,t,r=[],n={view:"mobile"!=Object(a.e)()&&"mobile_rotated"!=Object(a.e)()?"c-dashboard":"m-dashboard",id:"parc:dash",margin:5,padding:5,css:{"background-color":"#EBEDF0"}};switch(Object(a.e)()){case"mobile":e=4,t=15,r.push({view:"panel",x:0,y:0,dx:4,dy:5,resize:!0,header:new i.default(this.app,"","parc","homelines"),body:l.default}),r.push({view:"panel",x:0,y:5,dx:4,dy:5,resize:!0,header:new i.default(this.app,"","offer_type","homelines"),body:{type:"clean",margin:0,rows:[{type:"clean",margin:0,cols:[u.default,c.default]},new p.default(this.app,"","parcByType_prod",2),s.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:10,dx:4,dy:5,resize:!0,header:new i.default(this.app,"","parc_other","homelines"),body:{type:"clean",margin:0,rows:[f.default,d.default]},css:{"background-color":"#fff"}}),n.minHeight=1900;break;case"mobile_rotated":e=4,t=14,r.push({view:"panel",x:0,y:0,dx:4,dy:5,resize:!0,header:new i.default(this.app,"","parc","homelines"),body:l.default}),r.push({view:"panel",x:0,y:5,dx:4,dy:5,resize:!0,header:new i.default(this.app,"","offer_type","homelines"),body:{type:"clean",margin:0,rows:[{type:"clean",margin:0,cols:[u.default,c.default]},new p.default(this.app,"","parcByType_prod",2),s.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:10,dx:4,dy:4,resize:!0,header:new i.default(this.app,"","parc_other","homelines"),body:{type:"clean",margin:0,cols:[f.default,d.default]},css:{"background-color":"#fff"}}),n.minHeight=1200;break;default:e=10,t=6,r.push({view:"panel",x:0,y:0,dx:3,dy:6,resize:!0,header:new i.default(this.app,"","parc","homelines"),body:{type:"clean",margin:0,rows:[l.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:3,y:0,dx:4,dy:6,resize:!0,header:new i.default(this.app,"","offer_type","homelines"),body:{type:"clean",margin:0,rows:[{type:"clean",margin:0,cols:[u.default,c.default]},new p.default(this.app,"","parcByType_prod",2),s.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:7,y:0,dx:3,dy:6,resize:!0,header:new i.default(this.app,"","parc_other","homelines"),body:{type:"clean",margin:0,rows:[f.default,d.default]},css:{"background-color":"#fff"}}),"standard"==Object(a.e)()&&(n.minHeight=555)}return n.cells=r,n.gridColumns=e,n.gridRows=t,{view:"scrollview",scroll:"y",body:n}},h.init=function(){Object(a.i)("parc",Object(a.e)()),o.b.dashboards.parc=this,webix.event(window,"resize",(function(){"parc"==$$("top:menu").getSelectedId()&&Object(a.f)("parc")!=Object(a.e)()&&(Object(a.i)("parc",Object(a.e)()),null!=o.b.dashboards.parc._container&&o.b.dashboards.parc.refresh())}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(44),o=r(0);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.config=function(){return this._colCount=5,this._maxColCount=5,{view:"mobile"!=Object(o.e)()&&"mobile_rotated"!=Object(o.e)()?"c-dashboard":"m-dashboard",id:"parc:stats",gridColumns:this._colCount,gridRows:1,maxHeight:100,responsive:"hide",cells:[{view:"panel",x:0,y:0,dx:1,dy:1,body:new a.default(this.app,"","prepaid")},{view:"panel",x:1,y:0,dx:1,dy:1,body:new a.default(this.app,"","postpaid")},{view:"panel",x:2,y:0,dx:1,dy:1,body:new a.default(this.app,"","pmobile")},{view:"panel",x:3,y:0,dx:1,dy:1,body:new a.default(this.app,"","pfixe")},{view:"panel",x:4,y:0,dx:1,dy:1,body:new a.default(this.app,"","plte")}]}},i.init=function(e){var t=this;webix.event(window,"resize",(function(){if(void 0===$$("top:menu")||"parc"==$$("top:menu").getSelectedId()){if("mobile_rotated"==Object(o.e)())return void $$("parc:stats").hide();$$("parc:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("parc:stats").define("gridColumns",t._colCount),$$("parc:stats").adjust()}}))},i.ready=function(e){var t=this;if("mobile_rotated"!=Object(o.e)()){$$("parc:stats").show();for(var r=window.screen.width;r/t._colCount<160;)t._colCount=t._colCount-1;r/t._colCount>160&&(t._colCount<t._maxColCount&&(t._colCount=t._colCount+1),r/t._colCount<160&&(t._colCount=t._colCount-1)),e.define("gridColumns",t._colCount),e.adjust()}else $$("parc:stats").hide()},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._type=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._type,t={view:"echarts-grid-dataset",id:"parc:vue1:billType:"+e,maxHeight:"small"==Object(i.e)()||"mobile"==Object(i.e)()?150:225,options:{tooltip:{trigger:"axis",show:!0,textStyle:{fontSize:10},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,bottom:"5",type:"scroll"},animation:!0,title:[{text:"Par Billing type",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],grid:[{height:"90%",left:5,bottom:5,top:20,containLabel:!0}],dataset:[{dimensions:["bill_type","bill_qty"]}],series:[{type:"pie",radius:[0,"50%"],minAngle:10,_type:e,datasetIndex:0,label:{show:!1},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.bill_qty)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!1,encode:{itemName:"bill_type",value:"bill_qty",tooltip:"bill_qty"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}};return"mobile_rotated"==Object(i.e)()&&(t.maxWidth=190),t},u.init=function(e){var t=this._type;e.showProgress(),e.disable(),a.c.parc.push({cmp:"parc:vue1:billType:"+t,data:Object(o.b)("parc_bill").config.id}),Object(o.b)("parc_bill").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.b)("parc_bill")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:billType:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"parc:vue1:grpoff:acct",animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},title:[{text:"Par produit par offre",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(e){return e.name+" : "+Object(i.h)(e.value)}},series:[{name:"Parc",type:"treemap",_type:"_grpoff",leafDepth:1,levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}]}]}}},u.init=function(e){var t="acct";e._eType="treemap",e._expDataId=Object(o.b)("parc_offer_acct_exp").config.id,e.showProgress(),e.disable(),a.c.parc.push({cmp:"parc:vue1:grpoff:"+t,data:Object(o.b)("parc_offer_"+t).config.id}),a.c.parc.push({cmp:"parc:vue1:grpoff:acct:exp",data:Object(o.b)("parc_offer_acct_exp").config.id}),Object(o.b)("parc_offer_"+t).waitData.then((function(r){e._isDataLoaded=1,e.parse(Object(o.b)("parc_offer_"+t)),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:grpoff:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){this._type;return a.a.then((function(e){return a.e.then((function(t){return{view:"echarts-grid-dataset",id:"parc:gros:type",maxHeight:165,options:{tooltip:{trigger:"axis",show:!0,position:function(e,t,r,n,a){var o={top:e[1]+5};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){console.log(e)}},animation:!0,grid:[{left:5,bottom:10,top:25,containLabel:!0}],yAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],xAxis:[{type:"category",axisLabel:{show:!0,formatter:function(e){return t.parc[e]?t.parc[e]:e}},splitLine:{show:!1},axisTick:{show:!0},axisLine:{show:!0}}],legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10}},dataset:[{dimensions:["type","qty"]}],series:[{type:"bar",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:30,barMinHeight:10,encode:{y:"qty",x:"type"},tooltip:{trigger:"item",show:!0,formatter:function(e){return(t.parc[e.name]?t.parc[e.name]:e.name)+": "+Object(i.h)(e.data.qty)}},itemStyle:{color:function(t){return e.parc[t.value.type]}},label:{normal:{position:"right",show:!0,formatter:function(e){return Object(i.b)(e.data.qty)}}}}]}}}))}))},u.init=function(e){e.showProgress(),e.disable(),a.c.parc.push({cmp:"parc:gros:type",data:Object(o.b)("parc_gros_type").config.id}),Object(o.b)("parc_gros_type").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.b)("parc_gros_type")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:gros:type")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0),u=r(4);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"treetable",id:"parc:gros:off",math:!0,css:"webix_header_border webix_footer_border",borderless:!0,select:!0,columns:[{id:"client",header:[{text:"Offre par catégorie par client ",colspan:2,css:{"text-align":"center"}},{text:"Client/Offre",css:{"text-align":"center","font-size":"12px"}}],fillspace:3,template:"{common.treetable()}#client#"},{id:"qty",header:["",{text:"Nombre",css:{"text-align":"center","font-size":"12px"}}],css:{"text-align":"right"},fillspace:1,format:function(e){return""==e?0:webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:0})}}]}},s.init=function(e){webix.extend(e,webix.ProgressBar),e.showProgress(),e.disable(),a.c.parc.push({cmp:"parc:gros:off",data:Object(o.b)("parc_gros_off").config.id}),Object(o.b)("parc_gros_off").waitData.then((function(t){e._isDataLoaded=1;var r=[].concat(Object(o.b)("parc_gros_off").data.getRange()),n=Object(u.c)(r,["client","grp","art"],"client",["qty"]);e.parse([].concat(n)),e.enable(),e.hideProgress(),Object(o.b)("parc_gros_off").attachEvent("onAfterLoad",(function(){if("parc"==$$("top:menu").getSelectedId()){var t=[].concat(Object(o.b)("parc_gros_off").data.getRange()),r=Object(u.c)(t,["client","grp","art"],"client",["qty"]);e.clearAll(),e.parse([].concat(r)),e.enable(),e.hideProgress()}}))})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:gros:off")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"parc:vue1:billmkt",animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)}},title:[{text:a.d.parc.by_bill_by_prod?a.d.parc.by_bill_by_prod:"",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],series:[{type:"sunburst",emphasis:{focus:"descendant"},_type:"_mkbt",levels:[{},{r0:"15%",r:"45%",label:{rotate:"tangential"}},{r0:"45%",r:"50%",label:{position:"outside",padding:3,silent:!1}}]}]}}},u.init=function(e){$$("parc:vue1:billmkt").showProgress(),$$("parc:vue1:billmkt").disable(),a.c.parc.push({cmp:"parc:vue1:billmkt",data:Object(o.b)("parc_market").config.id}),Object(o.b)("parc_market").waitData.then((function(e){$$("parc:vue1:billmkt")._isDataLoaded=1,$$("parc:vue1:billmkt").parse(Object(o.b)("parc_market")),$$("parc:vue1:billmkt").enable(),$$("parc:vue1:billmkt").hideProgress()})),$$("parc:vue1:billmkt").data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:billmkt")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"parc:vue1:zones",options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:e[1]+5};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},animation:!0,title:[{text:"Parc par zone",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],grid:[{left:5,bottom:10,top:20,right:"20%",containLabel:!0}],xAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"category",axisLabel:{interval:0,textStyle:{fontSize:10}},splitLine:{show:!1},axisTick:{show:!0}}],dataset:[{dimensions:["zone","qty"]}],series:[{type:"bar",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:30,barMinHeight:10,encode:{x:"qty",y:"zone"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.qty)}},label:{normal:{position:"right",show:!0},formatter:function(e){return Object(i.h)(e.value)}}}]}}}))},u.init=function(e){$$("parc:vue1:zones").showProgress(),$$("parc:vue1:zones").disable(),a.c.parc.push({cmp:"parc:vue1:zones",data:Object(o.b)("parc_zone").config.id}),Object(o.b)("parc_zone").waitData.then((function(e){$$("parc:vue1:zones")._isDataLoaded=1,$$("parc:vue1:zones").parse(Object(o.b)("parc_zone")),$$("parc:vue1:zones").enable(),$$("parc:vue1:zones").hideProgress()})),$$("parc:vue1:zones").data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:zones")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return h}));var n=r(2),a=r(118),o=r(117),i=r(0),u=r(5),s=r(22),c=r(23),d=r(120),l=r(121),p=r(32),f=r(8);var h=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var h=n.prototype;return h.config=function(){var e,t,r=[],n={view:"c-dashboard",id:"parc:fai:dash",margin:5,padding:5,css:{"background-color":"#EBEDF0"}};return Object(i.e)(),e=8,t=6,r.push({view:"panel",x:0,y:0,dx:2,dy:6,resize:!0,header:new u.default(this.app,"","parc","parc_off_FAI_exp"),body:new p.default(this.app,"","FAI"),css:{"background-color":"#fff"}}),r.push({view:"panel",x:2,y:0,dx:2,dy:6,resize:!0,header:new u.default(this.app,"","offer_type","homelines"),body:{type:"clean",margin:0,rows:[new s.default(this.app,"","fai"),new f.default(this.app,"","parcByType_fai",2),new c.default(this.app,"","fai")]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:0,dx:2,dy:6,resize:!0,header:new u.default(this.app,"","parc_status_ligne","homelines"),body:{type:"clean",margin:0,rows:[d.default,new f.default(this.app,"","parcLG",2),l.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:6,y:0,dx:2,dy:6,resize:!0,header:new u.default(this.app,"","parc_other","homelines"),body:{type:"clean",margin:0,rows:[o.default,a.default]},css:{"background-color":"#fff"}}),"standard"==Object(i.e)()&&(n.minHeight=555),n.cells=r,n.gridColumns=e,n.gridRows=t,{view:"scrollview",scroll:"y",body:n}},h.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e,t={view:"echarts-grid-dataset",id:"parc:vue1:lgst",maxHeight:"small"==Object(i.e)()||"mobile"==Object(i.e)()?150:225,options:{tooltip:{trigger:"axis",show:!0,textStyle:{fontSize:10},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,bottom:"5",type:"scroll"},animation:!0,title:[{text:"Par status",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],grid:[{height:"90%",left:5,bottom:5,top:20,containLabel:!0}],dataset:[{dimensions:["status","qty"]}],series:[(e={type:"pie",radius:["40%","50%"],minAngle:10,datasetIndex:0,label:{show:!1},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.qty)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!1,encode:{itemName:"status",value:"qty",tooltip:"qty"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},label:{show:!0,fontSize:"15",fontWeight:"bold"}}},e.label={show:!1,position:"center"},e.labelLine={show:!1},e)]}};return"mobile_rotated"==Object(i.e)()&&(t.maxWidth=190),t},u.init=function(e){$$("parc:vue1:lgst").showProgress(),$$("parc:vue1:lgst").disable(),a.c.parc.push({cmp:"parc:vue1:lgst",data:Object(o.b)("parc_lg").config.id}),Object(o.b)("parc_lg").waitData.then((function(e){$$("parc:vue1:lgst")._isDataLoaded=1,$$("parc:vue1:lgst").parse(Object(o.b)("parc_lg")),$$("parc:vue1:lgst").enable(),$$("parc:vue1:lgst").hideProgress()})),$$("parc:vue1:lgst").data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:lgst")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){this._kpi;return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"parc:vue1:lgst:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[];if(e.sort(),0!=e.length){var d=e.map((function(e){return e.status})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==e[0]._type?e.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","qty"],source:e.filter((function(e){return e.status==r&&"month_trend"==e._type})),isAdded:!0}),u.push({type:"bar",stack:"split",id:"parc_lg_trend:"+r,datasetIndex:s.length,barMinHeight:10,barMaxWidth:40,_isStack:!0,name:r,encode:{x:"month",y:"qty"},gridIndex:1})),e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","qty"],source:e.filter((function(e){return e.status==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,_isStack:!0,name:r,encode:{x:"upd_dt",y:"qty"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"parc_lg_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.parcOff[r])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=u.length&&(r.series=[].concat(u,r.series)),r.legend.selectedMode="multiple",r.xAxis[0].data=[].concat(l)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+(r.revenue[o.seriesName]?r.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.qty)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},dataset:[{dimensions:["status","qty"]}],grid:[{left:5,top:20,right:5,bottom:35,containLabel:!0}],title:{text:a.d.parc.by_prod_trend?a.d.parc.by_prod_trend:"",right:"15%",textAlign:"center",textStyle:{fontSize:12}},xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("parc:vue1:lgst:trend").showProgress(),$$("parc:vue1:lgst:trend").disable(),$$("parc:vue1:lgst:trend")._filter_level="a",$$("parc:vue1:lgst:trend")._months=[],$$("parc:vue1:lgst:trend")._days=[],$$("parc:vue1:lgst:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("parc:vue1:lgst:trend")._current_upd_dt=Object(u.a)().d1,a.c.parc.push({cmp:"parc:vue1:lgst:trend",data:Object(o.b)("parc_lg_trend").config.id}),Object(o.b)("parc_lg_trend").waitData.then((function(e){$$("parc:vue1:lgst:trend")._isDataLoaded=1,$$("parc:vue1:lgst:trend").parse(Object(o.b)("parc_lg_trend")),$$("parc:vue1:lgst:trend").enable(),$$("parc:vue1:lgst:trend").hideProgress()})),$$("parc:vue1:lgst:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:lgst:trend")})),Object(o.b)("parc_lg_trend").attachEvent("onBeforeLoad",(function(){"parc"==$$("top:menu").getSelectedId()&&($$("parc:vue1:lgst:trend")._filter_level="a",$$("parc:vue1:lgst:trend")._months=[],$$("parc:vue1:lgst:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("parc:vue1:lgst:trend")._current_upd_dt=Object(u.a)().d1)})),$("button.ui.button.parcLG_"+periodSplit[1]).on("click",(function(){"m"!=$$("parc:vue1:lgst:trend")._filter_level&&n.filterHandler({data:{month:$$("parc:vue1:lgst:trend")._current_month}})})),$("button.ui.button.parcLG_"+periodSplit[0]).on("click",(function(){"m"==$$("parc:vue1:lgst:trend")._filter_level&&($$("parc:vue1:lgst:trend")._filter_level="a",$$("parc:vue1:lgst:trend").data.filter((function(e){return"month_trend"==e._type})))})),$$("parcLG").disable()},c.ready=function(e){$$("parcLG").enable(),e.attachEvent("onAfterRender",(function(){"parc"==$$("top:menu").getSelectedId()&&(console.log("READY"),$$("parcLG").enable(),e.adjust(),$$("home:dash").adjust())}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.parcLG_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("parc:vue1:lgst:trend")._months||($$("parc:vue1:lgst:trend")._months=[]),$$("parc:vue1:lgst:trend")._months.some((function(t){return t==e.data.month})))$$("parc:vue1:lgst:trend")._filter_level="m",$$("parc:vue1:lgst:trend")._current_month=e.data.month,$$("parc:vue1:lgst:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("line","dt_trend",e.data.month+"-01","vue2");$$("parc:vue1:lgst:trend").showProgress(),$$("parc:vue1:lgst:trend").disable(),t.then((function(r){$$("parc:vue1:lgst:trend")._months.push(e.data.month),$$("parc:vue1:lgst:trend")._filter_level="m",$$("parc:vue1:lgst:trend").parse(t).then((function(){$$("parc:vue1:lgst:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("parc:vue1:lgst:trend")._current_month=e.data.month,$$("parc:vue1:lgst:trend").enable(),$$("parc:vue1:lgst:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=r(0),o=r(5),i=r(22),u=r(23),s=r(32),c=r(8);var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var d=n.prototype;return d.config=function(){var e,t,r=[],n={view:"c-dashboard",id:"parc:gros:dash",margin:5,padding:5,css:{"background-color":"#EBEDF0"}};return Object(a.e)(),e=8,t=6,r.push({view:"panel",x:0,y:0,dx:4,dy:6,resize:!0,header:new o.default(this.app,"","parc_gros_gen","homelines"),body:new s.default(this.app,"","GROS"),css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:0,dx:4,dy:6,resize:!0,header:new o.default(this.app,"","gros_offer_type","homelines"),body:{type:"clean",margin:0,rows:[new i.default(this.app,"","gros"),new c.default(this.app,"","parcByType_gros",2),new u.default(this.app,"","gros")]},css:{"background-color":"#fff"}}),"standard"==Object(a.e)()&&(n.minHeight=555),n.cells=r,n.gridColumns=e,n.gridRows=t,{view:"scrollview",scroll:"y",body:n}},d.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=r(124),o=r(46),i=r(4);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return this._colCount=5,this._maxColCount=5,{view:"mobile"!=Object(i.b)()&&"mobile_rotated"!=Object(i.b)()?"c-dashboard":"m-dashboard",id:"topup:stats",gridColumns:this._colCount,gridRows:1,maxHeight:100,responsive:"hide",cells:[{view:"panel",x:0,y:0,dx:1,dy:1,body:a.default},{view:"panel",x:1,y:0,dx:1,dy:1,body:new o.default(this.app,"","cash")},{view:"panel",x:2,y:0,dx:1,dy:1,body:new o.default(this.app,"","voucher")},{view:"panel",x:3,y:0,dx:1,dy:1,body:new o.default(this.app,"","prepaid")},{view:"panel",x:4,y:0,dx:1,dy:1,body:new o.default(this.app,"","postpaid")}]}},u.init=function(e){var t=this;webix.event(window,"resize",(function(){if(void 0===$$("top:menu")||"recharge"==$$("top:menu").getSelectedId()){if("mobile_rotated"==Object(i.b)())return void $$("topup:stats").hide();$$("topup:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("topup:stats").define("gridColumns",t._colCount),$$("topup:stats").adjust()}}))},u.ready=function(e){var t=this;if("mobile_rotated"!=Object(i.b)()){$$("topup:stats").show();for(var r=window.screen.width;r/t._colCount<160;)t._colCount=t._colCount-1;r/t._colCount>160&&(t._colCount<t._maxColCount&&(t._colCount=t._colCount+1),r/t._colCount<160&&(t._colCount=t._colCount-1)),e.define("gridColumns",t._colCount),e.adjust()}else $$("topup:stats").hide()},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(16)),o=r(4),i=r(1);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",id:"rec:stat:tot",_type:"mnt_rec",tooltip:{template:"<span style='background-color:#1212120d;'>"+(i.i.tot.title?i.i.tot.title:"")+"<br>Def. : "+(i.i.tot.definition?i.i.tot.definition+"<br>Variation par rapport au mois dernier":"")+"</span>"},content:{header:i.i.rec_tot.label,meta:i.i.rec_tot.desc,shortheader:i.i.rec_tot.shortlab?i.i.rec_tot.shortlab:i.i.rec_tot.label.substr(0,4),seuil:i.i.rec_tot.wseuil?i.i.rec_tot.wseuil:200,shortdesc:i.i.rec_tot.shortdesc?i.i.rec_tot.shortdesc:i.i.rec_tot.desc,wdseuil:i.i.rec_tot.wdseuil?i.i.rec_tot.wdseuil:200,moblab:i.i.rec_tot.moblab}}},u.init=function(e){$$("rec:stat:tot").showProgress(),$$("rec:stat:tot").disable(),i.i.rec_tot.title&&e.config.tooltip&&webix.TooltipControl.addTooltip(e.$view,e.config.tooltip.template),i.c.recharge.push({cmp:"rec:stat:tot",data:Object(a.b)("stat_tot").config.id}),Object(a.b)("stat_tot").waitData.then((function(e){$$("rec:stat:tot").parse(Object(a.b)("stat_tot")),$$("rec:stat:tot").enable(),$$("rec:stat:tot").hideProgress()})),e.attachEvent("onDestruct",(function(){webix.TooltipControl.removeTooltip(e.$view)})),$$("rec:stat:tot").data.attachEvent("onStoreLoad",(function(){Object(o.h)("rec:stat:tot")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));var n=r(2),a=r(66),o=r(5),i=r(67),u=r(8),s=r(68),c=r(69),d=r(70),l=r(0),p=r(3);var f=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var f=n.prototype;return f.config=function(){var e,t,r=[];switch(Object(l.e)()){case"mobile_rotated":e=4,t=4,r.push({view:"panel",x:0,y:0,dx:2,dy:2,resize:!0,header:new o.default(this.app,"","rec_by_type"),body:{type:"clean",margin:0,rows:[a.default,new u.default(this.app,"","recByType_trend",3),i.default],css:{"background-color":"#fff"}}}),r.push({view:"panel",x:2,y:0,dx:2,dy:2,resize:!0,header:new o.default(this.app,"","rec_split"),body:{type:"clean",margin:0,rows:[c.default,d.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:2,dx:4,dy:2,resize:!0,header:new o.default(this.app,"","rec_by_prod"),body:s.default,css:{"background-color":"#fff"}});break;case"mobile":e=2,t=6,r.push({view:"panel",x:0,y:0,dx:2,dy:2,resize:!0,header:new o.default(this.app,"","rec_by_type"),body:{type:"clean",margin:0,rows:[a.default,new u.default(this.app,"","recByType_trend",3),i.default],css:{"background-color":"#fff"}}}),r.push({view:"panel",x:0,y:2,dx:2,dy:2,resize:!0,header:new o.default(this.app,"","rec_split"),body:{type:"clean",margin:0,rows:[c.default,d.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:4,dx:2,dy:2,resize:!0,header:new o.default(this.app,"","rec_by_prod"),body:s.default,css:{"background-color":"#fff"}});break;default:e=6,t=3,r.push({view:"panel",x:0,y:0,dx:2,dy:3,resize:!0,header:new o.default(this.app,"","rec_by_type"),body:{type:"clean",margin:0,rows:[a.default,new u.default(this.app,"","recByType_trend",3),i.default],css:{"background-color":"#fff"}}}),r.push({view:"panel",x:2,y:0,dx:2,dy:3,resize:!0,header:new o.default(this.app,"","rec_split"),body:{type:"clean",margin:0,rows:[c.default,d.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:0,dx:2,dy:3,resize:!0,header:new o.default(this.app,"","rec_by_prod"),body:s.default,css:{"background-color":"#fff"}})}var n={view:"mobile"!=Object(l.e)()&&"mobile_rotated"!=Object(l.e)()?"c-dashboard":"m-dashboard",gridColumns:e,gridRows:t,margin:5,padding:5,cells:r,css:{"background-color":"#EBEDF0"}};return"standard"==Object(l.e)()&&(n.minHeight=520),"mobile"==Object(l.e)()&&(n.minHeight=1400),"mobile_rotated"==Object(l.e)()&&(n.minHeight=850),{view:"scrollview",scroll:"y",body:n}},f.init=function(){Object(l.i)("recharge",Object(l.e)()),p.b.dashboards.recharge=this,webix.event(window,"resize",(function(){"recharge"==$$("top:menu").getSelectedId()&&Object(l.f)("recharge")!=Object(l.e)()&&(Object(l.i)("recharge",Object(l.e)()),null!=p.b.dashboards.recharge._container&&p.b.dashboards.recharge.refresh())}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(41),o=r(0);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.config=function(){return this._colCount=6,this._maxColCount=6,{view:"mobile"!=Object(o.e)()&&"mobile_rotated"!=Object(o.e)()?"c-dashboard":"m-dashboard",id:"rev:stats",gridColumns:this._colCount,gridRows:1,maxHeight:100,responsive:"hide",cells:[{view:"panel",x:0,y:0,dx:1,dy:1,body:new a.default(this.app,"","rtot")},{view:"panel",x:1,y:0,dx:1,dy:1,body:new a.default(this.app,"","rpyg")},{view:"panel",x:2,y:0,dx:1,dy:1,body:new a.default(this.app,"","rmob")},{view:"panel",x:5,y:0,dx:1,dy:1,body:new a.default(this.app,"","rlte")},{view:"panel",x:3,y:0,dx:1,dy:1,body:new a.default(this.app,"","rprepaid")},{view:"panel",x:4,y:0,dx:1,dy:1,body:new a.default(this.app,"","rpostpaid")}]}},i.init=function(e){var t=this;webix.event(window,"resize",(function(){if(void 0===$$("top:menu")||"revenue"==$$("top:menu").getSelectedId()){if("mobile_rotated"==Object(o.e)())return void $$("rev:stats").hide();$$("rev:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("rev:stats").define("gridColumns",t._colCount),$$("rev:stats").adjust()}}))},i.ready=function(e){var t=this;if("mobile_rotated"!=Object(o.e)()){$$("rev:stats").show();for(var r=window.screen.width;r/t._colCount<160;)t._colCount=t._colCount-1;r/t._colCount>160&&(t._colCount<t._maxColCount&&(t._colCount=t._colCount+1),r/t._colCount<160&&(t._colCount=t._colCount-1)),e.define("gridColumns",t._colCount),e.adjust()}else $$("rev:stats").hide()},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return v}));var n=r(2),a=r(8),o=r(24),i=r(25),u=r(71),s=r(72),c=r(73),d=r(5),l=r(74),p=r(26),f=r(75),h=r(0),_=r(3);var v=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var v=n.prototype;return v.config=function(){var e,t,r=[],n={view:"mobile"!=Object(h.e)()&&"mobile_rotated"!=Object(h.e)()?"c-dashboard":"m-dashboard",margin:5,padding:5,css:{"background-color":"#EBEDF0"}};switch(Object(h.e)()){case"mobile":e=4,t=21,r.push({view:"panel",x:0,y:0,dx:4,dy:5,resize:!0,header:new d.default(this.app,"","rev_global","homelines"),body:{type:"clean",margin:0,rows:[l.default,new a.default(this.app,"","revByType",3),p.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:5,dx:4,dy:5,resize:!0,header:new d.default(this.app,"","rev_by_line","homelines"),body:{type:"clean",margin:0,rows:[o.default,new a.default(this.app,"","revByLine",2),i.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:10,dx:4,dy:5,resize:!0,header:new d.default(this.app,"","rev_by_op","homelines"),body:{type:"clean",margin:0,rows:[u.default,s.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:15,dx:4,dy:6,resize:!0,header:new d.default(this.app,"","rev_other",""),body:{type:"clean",margin:0,rows:[c.default,f.default]}}),n.minHeight=1900;break;case"mobile_rotated":e=6,t=4,r.push({view:"panel",x:0,y:0,dx:3,dy:2,resize:!0,header:new d.default(this.app,"","rev_global","homelines"),body:{type:"clean",margin:0,rows:[l.default,new a.default(this.app,"","revByType",3),p.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:3,y:0,dx:3,dy:2,resize:!0,header:new d.default(this.app,"","rev_by_line","homelines"),body:{type:"clean",margin:0,rows:[o.default,new a.default(this.app,"","revByLine",2),i.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:0,y:2,dx:3,dy:2,resize:!0,header:new d.default(this.app,"","rev_by_op","homelines"),body:{type:"clean",margin:0,rows:[u.default,s.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:3,y:2,dx:3,dy:2,resize:!0,header:new d.default(this.app,"","rev_other",""),body:{type:"clean",margin:0,rows:[c.default,f.default]}}),n.minHeight=850;break;default:e=8,t=6,r.push({view:"panel",x:0,y:0,dx:2,dy:6,resize:!0,header:new d.default(this.app,"","rev_global","homelines"),body:{type:"clean",margin:0,rows:[l.default,new a.default(this.app,"","revByType",3),p.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:2,y:0,dx:2,dy:6,resize:!0,header:new d.default(this.app,"","rev_by_line","homelines"),body:{type:"clean",margin:0,rows:[o.default,new a.default(this.app,"","revByLine",2),i.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:0,dx:2,dy:6,resize:!0,header:new d.default(this.app,"","rev_by_op","homelines"),body:{type:"clean",margin:0,rows:[u.default,s.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:6,y:0,dx:2,dy:6,resize:!0,header:new d.default(this.app,"","rev_other",""),body:{type:"clean",margin:0,rows:[c.default,f.default]}})}return n.cells=r,n.gridColumns=e,n.gridRows=t,{view:"scrollview",scroll:"y",body:n}},v.init=function(){Object(h.i)("revenue",Object(h.e)()),_.b.dashboards.revenue=this,webix.event(window,"resize",(function(){"revenue"==$$("top:menu").getSelectedId()&&Object(h.f)("revenue")!=Object(h.e)()&&(Object(h.i)("revenue",Object(h.e)()),null!=_.b.dashboards.revenue._container&&_.b.dashboards.revenue.refresh())}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return v}));var n=r(2),a=r(8),o=r(129),i=r(130),u=r(131),s=r(132),c=r(24),d=r(25),l=r(5),p=r(33),f=r(26),h=r(34),_=r(0);var v=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var v=n.prototype;return v.config=function(){var e,t,r=[],n={view:"c-dashboard",margin:5,padding:5,css:{"background-color":"#EBEDF0"}};return Object(_.e)(),e=8,t=6,r.push({view:"panel",x:0,y:0,dx:2,dy:6,resize:!0,header:new l.default(this.app,"","rev_global","homelines"),body:{type:"clean",margin:0,rows:[new p.default(this.app,"","fai"),new a.default(this.app,"","revParType_fai",2),new f.default(this.app,"","fai"),new h.default(this.app,"","fai")]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:2,y:0,dx:2,dy:6,resize:!0,header:new l.default(this.app,"","rev_by_line","homelines"),body:{type:"clean",margin:0,rows:[new c.default(this.app,"","FAI"),new a.default(this.app,"","revByLine_FAI",2),new d.default(this.app,"","FAI")]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:0,dx:2,dy:6,resize:!0,header:new l.default(this.app,"","rev_sales","homelines"),body:{type:"clean",margin:0,rows:[s.default,new a.default(this.app,"","revBySalesType",2),u.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:6,y:0,dx:2,dy:6,resize:!0,header:new l.default(this.app,"","rev_other",""),body:{type:"clean",margin:0,rows:[i.default,o.default]},css:{"background-color":"#fff"}}),n.cells=r,n.gridColumns=e,n.gridRows=t,{view:"scrollview",scroll:"y",body:n}},v.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"rev:vue1:zones",options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:e[1]+5};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},animation:!0,title:[{text:"Revenu hors ventes par zone",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],grid:[{left:5,bottom:10,top:20,right:"20%",containLabel:!0}],xAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"category",axisLabel:{interval:0,textStyle:{fontSize:10}},splitLine:{show:!1},axisTick:{show:!0}}],dataset:[{dimensions:["zone","revenue"]}],series:[{type:"bar",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:30,barMinHeight:10,encode:{x:"revenue",y:"zone"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.revenue)}},label:{normal:{position:"right",show:!0},formatter:function(e){return Object(i.h)(e.value)}}}]}}}))},u.init=function(e){$$("rev:vue1:zones").showProgress(),$$("rev:vue1:zones").disable(),a.c.revenue.push({cmp:"rev:vue1:zones",data:Object(o.b)("rev_zone").config.id}),Object(o.b)("rev_zone").waitData.then((function(e){$$("rev:vue1:zones")._isDataLoaded=1,$$("rev:vue1:zones").parse(Object(o.b)("rev_zone")),$$("rev:vue1:zones").enable(),$$("rev:vue1:zones").hideProgress()})),$$("rev:vue1:zones").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:zones")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e,t={view:"echarts-grid-dataset",id:"rev:vue1:bill",maxHeight:"small"==Object(i.e)()||"mobile"==Object(i.e)()?150:225,options:{tooltip:{trigger:"axis",show:!0,textStyle:{fontSize:10},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,bottom:"5",type:"scroll"},animation:!0,title:[{text:"Par billing type",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],grid:[{height:"90%",left:5,bottom:5,top:20,containLabel:!0}],dataset:[{dimensions:["bill","revenue"]}],series:[(e={type:"pie",radius:["40%","50%"],minAngle:10,datasetIndex:0,label:{show:!1},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.revenue)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!1,encode:{itemName:"bill",value:"revenue",tooltip:"revenue"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"},label:{show:!0,fontSize:"15",fontWeight:"bold"}}},e.label={show:!1,position:"center"},e.labelLine={show:!1},e)]}};return"mobile_rotated"==Object(i.e)()&&(t.maxWidth=190),t},u.init=function(e){$$("rev:vue1:bill").showProgress(),$$("rev:vue1:bill").disable(),a.c.revenue.push({cmp:"rev:vue1:bill",data:Object(o.b)("rev_bill").config.id}),Object(o.b)("rev_bill").waitData.then((function(e){$$("rev:vue1:bill")._isDataLoaded=1,$$("rev:vue1:bill").parse(Object(o.b)("rev_bill")),$$("rev:vue1:bill").enable(),$$("rev:vue1:bill").hideProgress()})),$$("rev:vue1:bill").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:bill")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){this._kpi;return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"rev:vue1:sales:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[];if(e.sort(),0!=e.length){var d=e.map((function(e){return e.cat})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==e[0]._type?e.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","revenue"],source:e.filter((function(e){return e.cat==r&&"month_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.revenue[r]},stack:"split",id:"rev_off_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,barMaxWidth:40,_isStack:!0,name:r,encode:{x:"month",y:"revenue"},gridIndex:1})),e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","revenue"],source:e.filter((function(e){return e.cat==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.revenue[r]},itemStyle:{color:t.revenue[r]},_isStack:!0,name:r,encode:{x:"upd_dt",y:"revenue"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"rev_off_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.revenue[r])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=c.length&&(r.color=[].concat(c)),0!=u.length&&(r.series=[].concat(u,r.series)),r.legend.selectedMode="multiple",r.xAxis[0].data=[].concat(l)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+(r.revenue[o.seriesName]?r.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.revenue)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},dataset:[{dimensions:["cat","revenue"]}],grid:[{left:5,top:20,right:5,bottom:35,containLabel:!0}],title:{text:"Evolution",right:"15%",top:5,textAlign:"center",textStyle:{fontSize:12}},xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("rev:vue1:sales:trend").showProgress(),$$("rev:vue1:sales:trend").disable(),$$("rev:vue1:sales:trend")._filter_level="a",$$("rev:vue1:sales:trend")._months=[],$$("rev:vue1:sales:trend")._days=[],$$("rev:vue1:sales:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:sales:trend")._current_upd_dt=Object(u.a)().d1,a.c.revenue.push({cmp:"rev:vue1:sales:trend",data:Object(o.b)("rev_sales_trend").config.id}),Object(o.b)("rev_sales_trend").waitData.then((function(e){$$("rev:vue1:sales:trend")._isDataLoaded=1,$$("rev:vue1:sales:trend").parse(Object(o.b)("rev_sales_trend")),$$("rev:vue1:sales:trend").enable(),$$("rev:vue1:sales:trend").hideProgress()})),$$("rev:vue1:sales:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:sales:trend")})),Object(o.b)("rev_sales_trend").attachEvent("onBeforeLoad",(function(){"revenue"==$$("top:menu").getSelectedId()&&($$("rev:vue1:sales:trend")._filter_level="a",$$("rev:vue1:sales:trend")._months=[],$$("rev:vue1:sales:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:sales:trend")._current_upd_dt=Object(u.a)().d1)})),$("button.ui.button.revBySalesType_"+periodSplit[1]).on("click",(function(){"m"!=$$("rev:vue1:sales:trend")._filter_level&&n.filterHandler({data:{month:$$("rev:vue1:sales:trend")._current_month}})})),$("button.ui.button.revBySalesType_"+periodSplit[0]).on("click",(function(){"m"==$$("rev:vue1:sales:trend")._filter_level&&($$("rev:vue1:sales:trend")._filter_level="a",$$("rev:vue1:sales:trend").data.filter((function(e){return"month_trend"==e._type})))})),$$("revBySalesType").disable()},c.ready=function(e){$$("revBySalesType").enable(),e.attachEvent("onAfterRender",(function(){"revenue"==$$("top:menu").getSelectedId()&&(console.log("READY"),$$("revBySalesType").enable(),e.adjust(),$$("home:dash").adjust())}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.revBySalesType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:sales:trend")._months||($$("rev:vue1:sales:trend")._months=[]),$$("rev:vue1:sales:trend")._months.some((function(t){return t==e.data.month})))$$("rev:vue1:sales:trend")._filter_level="m",$$("rev:vue1:sales:trend")._current_month=e.data.month,$$("rev:vue1:sales:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("sale","dt_trend",e.data.month+"-01","vue2");$$("rev:vue1:sales:trend").showProgress(),$$("rev:vue1:sales:trend").disable(),t.then((function(r){$$("rev:vue1:sales:trend")._months.push(e.data.month),$$("rev:vue1:sales:trend")._filter_level="m",$$("rev:vue1:sales:trend").parse(t).then((function(){$$("rev:vue1:sales:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("rev:vue1:sales:trend")._current_month=e.data.month,$$("rev:vue1:sales:trend").enable(),$$("rev:vue1:sales:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"rev:vue1:sales:split",animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)}},title:[{text:"Par category par type",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(e){return e.name+" : "+Object(i.h)(e.value)}},series:[{type:"treemap",leafDepth:1,name:"revenu",_type:"_rsales",levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}]}]}}},u.init=function(e){$$("rev:vue1:sales:split").showProgress(),$$("rev:vue1:sales:split").disable(),a.c.revenue.push({cmp:"rev:vue1:sales:split",data:Object(o.b)("rev_sales_split").config.id}),Object(o.b)("rev_sales_split").waitData.then((function(e){$$("rev:vue1:sales:split")._isDataLoaded=1,$$("rev:vue1:sales:split").parse(Object(o.b)("rev_sales_split")),$$("rev:vue1:sales:split").enable(),$$("rev:vue1:sales:split").hideProgress()})),$$("rev:vue1:sales:split").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:sales:split")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var n=r(2),a=r(8),o=r(24),i=r(25),u=r(5),s=r(33),c=r(26),d=r(34),l=r(0);var p=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var p=n.prototype;return p.config=function(){var e,t,r=[],n={view:"c-dashboard",margin:5,padding:5,css:{"background-color":"#EBEDF0"}};return Object(l.e)(),e=8,t=6,r.push({view:"panel",x:0,y:0,dx:4,dy:6,resize:!0,header:new u.default(this.app,"","rev_global_gros","homelines"),body:{type:"clean",margin:0,rows:[new s.default(this.app,"","gros"),new a.default(this.app,"","revParType_gros",2),new c.default(this.app,"","gros"),new d.default(this.app,"","gros")]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:0,dx:4,dy:6,resize:!0,header:new u.default(this.app,"","rev_by_offer_gros","homelines"),body:{type:"clean",margin:0,rows:[new o.default(this.app,"","GROS"),new a.default(this.app,"","revByLine_GROS",2),new i.default(this.app,"","GROS")]},css:{"background-color":"#fff"}}),n.cells=r,n.gridColumns=e,n.gridRows=t,{view:"scrollview",scroll:"y",body:n}},p.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(42),o=r(0);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=n.prototype;return i.config=function(){return this._colCount=6,this._maxColCount=6,{view:"dashboard",id:"sl:stats",gridColumns:this._colCount,gridRows:1,maxHeight:100,responsive:"hide",cells:[{view:"panel",x:0,y:0,dx:1,dy:1,body:new a.default(this.app,"","rsales")},{view:"panel",x:1,y:0,dx:1,dy:1,body:new a.default(this.app,"","qsales")},{view:"panel",x:2,y:0,dx:1,dy:1,body:new a.default(this.app,"","rproduit")},{view:"panel",x:3,y:0,dx:1,dy:1,body:new a.default(this.app,"","rsouscription")},{view:"panel",x:4,y:0,dx:1,dy:1,body:new a.default(this.app,"","rrecharge")},{view:"panel",x:5,y:0,dx:1,dy:1,body:new a.default(this.app,"","rservice")}]}},i.init=function(e){var t=this;webix.event(window,"resize",(function(){if(void 0===$$("top:menu")||"sales"==$$("top:menu").getSelectedId()){if("mobile_rotated"==Object(o.e)())return void $$("sl:stats").hide();$$("sl:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("sl:stats").define("gridColumns",t._colCount),$$("sl:stats").adjust()}}))},i.ready=function(e){var t=this;if("mobile_rotated"!=Object(o.e)()){$$("sl:stats").show();for(var r=window.screen.width;r/t._colCount<160;)t._colCount=t._colCount-1;r/t._colCount>160&&(t._colCount<t._maxColCount&&(t._colCount=t._colCount+1),r/t._colCount<160&&(t._colCount=t._colCount-1)),e.define("gridColumns",t._colCount),e.adjust()}else $$("sl:stats").hide()},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return _}));var n=r(2),a=r(5),o=r(136),i=r(137),u=r(138),s=r(139),c=r(140),d=r(141),l=r(142),p=r(0),f=r(8),h=r(3);var _=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var _=n.prototype;return _.config=function(){var e,t,r=[];Object(p.e)(),e=6,t=3,r.push({view:"panel",x:0,y:0,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","command_glob"),body:{type:"clean",margin:0,rows:[c.default,new f.default(this.app,"","salesParType",2),s.default],css:{"background-color":"#fff"}}}),r.push({view:"panel",x:2,y:0,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","command_split"),body:{type:"clean",margin:0,rows:[u.default,l.default]},css:{"background-color":"#fff"}}),r.push({view:"panel",x:4,y:0,dx:2,dy:3,resize:!0,header:new a.default(this.app,"","sales_split"),body:{type:"clean",margin:0,rows:[new f.default(this.app,"","saleTot",3),i.default,new f.default(this.app,"","salesParUser",2),o.default,new f.default(this.app,"","salesParpop",2),d.default]},css:{"background-color":"#fff"}});var n={view:"c-dashboard",gridColumns:e,gridRows:t,margin:5,padding:5,cells:r,css:{"background-color":"#EBEDF0"}};return"mobile"==Object(p.e)()&&(n.minHeight=1350),"mobile_rotated"==Object(p.e)()&&(n.minHeight=850),{view:"scrollview",scroll:"y",body:n}},_.init=function(){Object(p.i)("sales",Object(p.e)()),h.b.dashboards.sales=this,webix.event(window,"resize",(function(){"sales"==$$("top:menu").getSelectedId()&&Object(p.f)("sales")!=Object(p.e)()&&(Object(p.i)("sales",Object(p.e)()),null!=h.b.dashboards.sales._container&&h.b.dashboards.sales.refresh())}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(15),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"sales:vue1:users:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[];if(0!=e.length){var d=e.map((function(e){return e.user})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==e[0]._type?e.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){var c;e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","montant"],source:e.filter((function(e){return e.user==r&&"month_trend"==e._type})),isAdded:!0}),u.push(((c={type:"bar",stack:"split",id:"sales_user_trend:"+r,datasetIndex:s.length,barMinHeight:10,_isStack:!0,name:r,encode:{x:"month",y:"montant"},gridIndex:1}).barMinHeight=10,c.barMaxWidth=40,c)));e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","montant"],source:e.filter((function(e){return e.user==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.revenue[r]},_isStack:!0,name:r,enable:{x:"upd_dt",y:"montant"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"sales_user_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0}))})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=c.length&&(r.color=[].concat(c)),0!=u.length?r.series=[].concat(u,r.series):r.legend.selectedMode="multiple",r.xAxis[0].data=[].concat(l)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+(r.revenue[o.seriesName]?r.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.montant)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},title:[{text:"Ventes par agent",textStyle:{fontSize:12},left:"50%",textAlign:"center"}],dataset:[{dimensions:["user","montant"]}],grid:[{left:5,top:"25",right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("sales:vue1:users:trend").showProgress(),$$("sales:vue1:users:trend").disable(),$$("sales:vue1:users:trend")._filter_level="a",$$("sales:vue1:users:trend")._months=[],$$("sales:vue1:users:trend")._days=[],$$("sales:vue1:users:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("sales:vue1:users:trend")._current_upd_dt=Object(u.a)().d1,a.c.sales.push({cmp:"sales:vue1:users:trend",data:Object(o.b)("salesUser_trend").config.id}),Object(o.b)("salesUser_trend").waitData.then((function(e){$$("sales:vue1:users:trend")._isDataLoaded=1,$$("sales:vue1:users:trend").parse(Object(o.b)("salesUser_trend")),$$("sales:vue1:users:trend").enable(),$$("sales:vue1:users:trend").hideProgress()})),$("button.ui.button.salesParUser_"+periodSplit[1]).on("click",(function(){"m"!=$$("sales:vue1:users:trend")._filter_level&&n.filterHandler({data:{month:$$("sales:vue1:users:trend")._current_month}})})),$("button.ui.button.salesParUser_"+periodSplit[0]).on("click",(function(){"m"==$$("sales:vue1:users:trend")._filter_level&&($$("sales:vue1:users:trend")._filter_level="a",$$("sales:vue1:users:trend").data.filter((function(e){return"month_trend"==e._type})))})),$$("sales:vue1:users:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("sales:vue1:users:trend")})),Object(o.b)("salesUser_trend").attachEvent("onBeforeLoad",(function(){"sales"==$$("top:menu").getSelectedId()&&($$("sales:vue1:users:trend")._filter_level="a",$$("sales:vue1:users:trend")._months=[],$$("sales:vue1:users:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("sales:vue1:users:trend")._current_upd_dt=Object(u.a)().d1)}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.salesParUser_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("sales:vue1:users:trend")._months||($$("sales:vue1:users:trend")._months=[]),$$("sales:vue1:users:trend")._months.some((function(t){return t==e.data.month})))$$("sales:vue1:users:trend")._filter_level="m",$$("sales:vue1:users:trend")._current_month=e.data.month,$$("sales:vue1:users:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("sales","users",e.data.month+"-01","dt_trend");$$("sales:vue1:users:trend").showProgress(),$$("sales:vue1:users:trend").disable(),t.then((function(r){$$("sales:vue1:users:trend")._months.push(e.data.month),$$("sales:vue1:users:trend")._filter_level="m",$$("sales:vue1:users:trend").parse(t).then((function(){$$("sales:vue1:users:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("sales:vue1:users:trend")._current_month=e.data.month,$$("sales:vue1:users:trend").enable(),$$("sales:vue1:users:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=(r(10),r(1)),o=r(15),i=r(0),u=r(4);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"echarts-grid-dataset",id:"sales:vue1:trend:tot",animation:!0,beforedisplay:function(e,t,r){var a=this;r.off("click"),r.on("click",{seriesId:"sale:month_split"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=a;a.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),a._clicked&&(t=!0,r._clicked=!1,clearTimeout(a.executeDoubleClick))}t?n.filterHandler(e):a._clicked=!0})),r.on("click",{seriesId:"sale:dt_split"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=a;a.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),a._clicked&&(t=!0,r._clicked=!1,clearTimeout(a.executeDoubleClick))}t?n.filterHandler(e):a._clicked=!0})),r.on("click",{seriesId:"sale:slot_split"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=a;a.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),a._clicked&&(t=!0,r._clicked=!1,clearTimeout(a.executeDoubleClick))}t?n.filterHandler(e):a._clicked=!0}))},options:{tooltip:{trigger:"axis",show:!0,z:2,axisPointer:{show:!0},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){var t=e[0].name+"<br/>",r=e[0].dimensionNames[1];return t+=e[0].marker+Object(i.b)(e[0].data[r])}},title:{text:"Ventes totales",left:"10%",top:3,textAlign:"center",textStyle:{fontSize:12}},grid:[{left:5,top:30,bottom:3,containLabel:!0}],dataset:[{dimensions:["month","amount"]},{dimensions:["upd_dt","amount"]},{dimensions:["slot","amount"]}],xAxis:[{type:"category",splitLine:{show:!1},axisPointer:{show:!0},axisTick:{show:!0,alignWithLabel:!0}}],yAxis:[{type:"value",splitNumber:4,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[{type:"line",gridIndex:1,encode:{x:"month",y:"amount"},seriesLayoutBy:"row",datasetIndex:0,_type:"month_trend",_dim:"key",id:"sale:month_split",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"orange"},{offset:1,color:"white"}],global:!1}},smooth:!0,lineStyle:{color:"orange",width:2.5},itemStyle:{color:"orange"},z:3,barMaxWidth:40,barMinHeight:10},{type:"line",gridIndex:1,encode:{x:"upd_dt",y:"amount"},_type:"dt_trend",datasetIndex:1,id:"sale:dt_split"},{type:"bar",gridIndex:1,encode:{x:"slot",y:"amount"},_type:"slot_trend",id:"sale:slot_split",datasetIndex:2}]}}},s.init=function(e){$$("sales:vue1:trend:tot").showProgress(),$$("sales:vue1:trend:tot").disable(),a.c.sales.push({cmp:"sales:vue1:trend:tot",data:Object(o.b)("tot_trend").config.id}),$$("sales:vue1:trend:tot")._current_month=Object(u.a)().d1.substr(0,7),$$("sales:vue1:trend:tot")._months=[],$$("sales:vue1:trend:tot")._filter_level="a",Object(o.b)("tot_trend").waitData.then((function(e){$$("sales:vue1:trend:tot")._isDataLoaded=1,$$("sales:vue1:trend:tot").parse(Object(o.b)("tot_trend")),$$("sales:vue1:trend:tot").enable(),$$("sales:vue1:trend:tot").hideProgress()})),Object(o.b)("tot_trend").attachEvent("onBeforeLoad",(function(){"sales"==$$("top:menu").getSelectedId()&&($$("sales:vue1:trend:tot")._current_month=Object(u.a)().d1.substr(0,7),$$("sales:vue1:trend:tot")._months=[],$$("sales:vue1:trend:tot")._filter_level="a")})),$$("sales:vue1:trend:tot").data.attachEvent("onStoreLoad",(function(){Object(i.j)("sales:vue1:trend:tot")})),$$("saleTot").attachEvent("onAfterRender",(function(){$("button.ui.button.saleTot_"+periodSplit[1]).on("click",(function(){"m"!=$$("sales:vue1:trend:tot")._filter_level&&n.filterHandler({data:{month:$$("sales:vue1:trend:tot")._current_month,_type:"month_trend"}})})),$("button.ui.button.saleTot_"+periodSplit[2]).on("click",(function(){"s"!=$$("sales:vue1:trend:tot")._filter_level&&n.filterHandler({data:{upd_dt:$$("sales:vue1:trend:tot")._current_upd_dt,_type:"dt_trend",seriesName:$$("sales:vue1:trend:tot")._current_serie_selected}})})),$("button.ui.button.saleTot_"+periodSplit[0]).on("click",(function(){"m"!=$$("sales:vue1:trend:tot")._filter_level&&"s"!=$$("sales:vue1:trend:tot")._filter_level||($$("sales:vue1:trend:tot")._filter_level="a",$$("sales:vue1:trend:tot").data.filter((function(e){return"month_trend"==e._type})))}))}))},s.ready=function(e){$$("saleTot").callEvent("onAfterRender")},n.filterHandler=function(e){if(e.data)switch(e.data._type){case"month_trend":if($("button.ui.button.saleTot_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("sales:vue1:trend:tot")._months||($$("sales:vue1:trend:tot")._months=[]),$$("sales:vue1:trend:tot")._months.some((function(t){return t==e.data.month})))$$("sales:vue1:trend:tot")._filter_level="m",$$("sales:vue1:trend:tot")._current_month=e.data.month,$$("sales:vue1:trend:tot").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("sales","tot",e.data.month+"-01","dt_trend");$$("sales:vue1:trend:tot").showProgress(),$$("sales:vue1:trend:tot").disable(),t.then((function(r){$$("sales:vue1:trend:tot")._months.push(e.data.month),$$("sales:vue1:trend:tot")._filter_level="m",$$("sales:vue1:trend:tot").parse(t).then((function(){$$("sales:vue1:trend:tot").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("sales:vue1:trend:tot")._current_month=e.data.month,$$("sales:vue1:trend:tot").enable(),$$("sales:vue1:trend:tot").hideProgress()}))}break;case"dt_trend":if($("button.ui.button.saleTot_"+periodSplit[2]).addClass("active").siblings().removeClass("active"),$$("sales:vue1:trend:tot")._days||($$("sales:vue1:trend:tot")._days=[]),$$("sales:vue1:trend:tot")._days.some((function(t){return t==e.data.upd_dt})))$$("sales:vue1:trend:tot")._filter_level="s",$$("sales:vue1:trend:tot")._current_upd_dt=e.data.upd_dt,$$("sales:vue1:trend:tot").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}));else{var r=Object(o.a)("sales","tot",e.data.upd_dt,"slot_trend");$$("sales:vue1:trend:tot").showProgress(),$$("sales:vue1:trend:tot").disable(),r.then((function(t){$$("sales:vue1:trend:tot")._days.push(e.data.upd_dt),$$("sales:vue1:trend:tot")._filter_level="s",$$("sales:vue1:trend:tot").parse(r).then((function(){$$("sales:vue1:trend:tot").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt}))})),$$("sales:vue1:trend:tot")._current_upd_dt=e.data.upd_dt,$$("sales:vue1:trend:tot")._current_serie_selected=e.seriesName,$$("sales:vue1:trend:tot").enable(),$$("sales:vue1:trend:tot").hideProgress()}))}}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(15),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"sales:vue1:typeprod",animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},title:[{text:"Par catégorie par type",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(e){return e.name+" : "+Object(i.h)(e.value)}},series:[{name:"Ventes",type:"treemap",leafDepth:1,_type:"_mkbt",levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}]}]}}},u.init=function(e){$$("sales:vue1:typeprod").showProgress(),$$("sales:vue1:typeprod").disable(),a.c.sales.push({cmp:"sales:vue1:typeprod",data:Object(o.b)("sales_type_split").config.id}),Object(o.b)("sales_type_split").waitData.then((function(e){$$("sales:vue1:typeprod")._isDataLoaded=1,$$("sales:vue1:typeprod").parse(Object(o.b)("sales_type_split")),$$("sales:vue1:typeprod").enable(),$$("sales:vue1:typeprod").hideProgress()})),$$("sales:vue1:typeprod").data.attachEvent("onStoreLoad",(function(){Object(i.j)("sales:vue1:typeprod")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(15),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"sales:vue1:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[];if(0!=e.length){var d=e.map((function(e){return e.cat})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==e[0]._type?e.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){var d;e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","montant"],source:e.filter((function(e){return e.cat==r&&"month_trend"==e._type})),isAdded:!0}),u.push(((d={type:"bar",itemStyle:{color:t.revenue[r]},stack:"split",id:"sales_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,_isStack:!0,name:r,encode:{x:"month",y:"montant"},gridIndex:1}).barMinHeight=10,d.barMaxWidth=40,d)));e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","montant"],source:e.filter((function(e){return e.cat==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.revenue[r]},itemStyle:{color:t.revenue[r]},_isStack:!0,name:r,enable:{x:"upd_dt",y:"montant"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"sales_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.rechargeEC[r])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=c.length&&(r.color=[].concat(c)),0!=u.length?r.series=[].concat(u,r.series):r.legend.selectedMode="multiple",r.xAxis[0].data=[].concat(l)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+(r.revenue[o.seriesName]?r.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.montant)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},title:[{text:"Evolution",textStyle:{fontSize:12},left:"50%",textAlign:"center"}],dataset:[{dimensions:["cat","montant"]}],grid:[{left:5,top:"25",right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("sales:vue1:trend").showProgress(),$$("sales:vue1:trend").disable(),$$("sales:vue1:trend")._filter_level="a",$$("sales:vue1:trend")._months=[],$$("sales:vue1:trend")._days=[],$$("sales:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("sales:vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.sales.push({cmp:"sales:vue1:trend",data:Object(o.b)("saleType_trend").config.id}),Object(o.b)("saleType_trend").waitData.then((function(e){$$("sales:vue1:trend")._isDataLoaded=1,$$("sales:vue1:trend").parse(Object(o.b)("saleType_trend")),$$("sales:vue1:trend").enable(),$$("sales:vue1:trend").hideProgress()})),$("button.ui.button.salesParType_"+periodSplit[1]).on("click",(function(){"m"!=$$("sales:vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("sales:vue1:trend")._current_month}})})),$("button.ui.button.salesParType_"+periodSplit[0]).on("click",(function(){"m"==$$("sales:vue1:trend")._filter_level&&($$("sales:vue1:trend")._filter_level="a",$$("sales:vue1:trend").data.filter((function(e){return"month_trend"==e._type})))})),$$("sales:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("sales:vue1:trend")})),Object(o.b)("saleType_trend").attachEvent("onBeforeLoad",(function(){"sales"==$$("top:menu").getSelectedId()&&($$("sales:vue1:trend")._filter_level="a",$$("sales:vue1:trend")._months=[],$$("sales:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("sales:vue1:trend")._current_upd_dt=Object(u.a)().d1)}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.salesParType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("sales:vue1:trend")._months||($$("sales:vue1:trend")._months=[]),$$("sales:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("sales:vue1:trend")._filter_level="m",$$("sales:vue1:trend")._current_month=e.data.month,$$("sales:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}));else{var t=Object(o.a)("split_trend","dt_trend",e.data.month+"-01","vue2");$$("sales:vue1:trend").showProgress(),$$("sales:vue1:trend").disable(),t.then((function(r){$$("sales:vue1:trend")._months.push(e.data.month),$$("sales:vue1:trend")._filter_level="m",$$("sales:vue1:trend").parse(t).then((function(){$$("sales:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}))})),$$("sales:vue1:trend")._current_month=e.data.month,$$("sales:vue1:trend").enable(),$$("sales:vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(15),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t,r=e[0],n=(e[1],{view:"echarts-grid-dataset",id:"sales:vue1:cat",maxHeight:"small"==Object(i.e)()||"mobile"==Object(i.e)()?150:225,options:{tooltip:{trigger:"axis",show:!0,textStyle:{fontSize:10},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,bottom:"5",type:"scroll"},animation:!0,title:[{text:"Par categorie",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],grid:[{height:"90%",left:5,bottom:5,top:20,containLabel:!0}],dataset:[{dimensions:["cat","montant"]}],series:[(t={type:"pie",radius:["50%","60%"],minAngle:10,itemStyle:{borderRadius:8},datasetIndex:0,label:{show:!1},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.montant)+" ("+e.percent+"%)"}},selectedMode:"single",avoidLabelOverlap:!1,encode:{itemName:"cat",value:"montant",tooltip:"montant"}},t.itemStyle={color:function(e){return r.revenue[e.name]}},t.emphasis={itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},t)]}});return"mobile_rotated"==Object(i.e)()&&(n.maxWidth=190),n}))},u.init=function(e){$$("sales:vue1:cat").showProgress(),$$("sales:vue1:cat").disable(),a.c.sales.push({cmp:"sales:vue1:cat",data:Object(o.b)("sales_split").config.id}),Object(o.b)("sales_split").waitData.then((function(e){$$("sales:vue1:cat")._isDataLoaded=1,$$("sales:vue1:cat").parse(Object(o.b)("sales_split")),$$("sales:vue1:cat").enable(),$$("sales:vue1:cat").hideProgress()})),$$("sales:vue1:cat").data.attachEvent("onStoreLoad",(function(){Object(i.j)("sales:vue1:cat")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(15),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"sales:vue1:pops:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[];if(0!=e.length){var d=e.map((function(e){return e.pop})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==e[0]._type?e.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){var c;e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","montant"],source:e.filter((function(e){return e.pop==r&&"month_trend"==e._type})),isAdded:!0}),u.push(((c={type:"bar",stack:"split",id:"sales_pop_trend:"+r,datasetIndex:s.length,barMinHeight:10,_isStack:!0,name:r,encode:{x:"month",y:"montant"},gridIndex:1}).barMinHeight=10,c.barMaxWidth=40,c)));e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","montant"],source:e.filter((function(e){return e.pop==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.revenue[r]},_isStack:!0,name:r,enable:{x:"upd_dt",y:"montant"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"sales_pop_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0}))})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=c.length&&(r.color=[].concat(c)),0!=u.length?r.series=[].concat(u,r.series):r.legend.selectedMode="multiple",r.xAxis[0].data=[].concat(l)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+(r.revenue[o.seriesName]?r.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.montant)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},title:[{text:"Ventes par POP",textStyle:{fontSize:12},left:"50%",textAlign:"center"}],dataset:[{dimensions:["pop","montant"]}],grid:[{left:5,top:"25",right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("sales:vue1:pops:trend").showProgress(),$$("sales:vue1:pops:trend").disable(),$$("sales:vue1:pops:trend")._filter_level="a",$$("sales:vue1:pops:trend")._months=[],$$("sales:vue1:pops:trend")._days=[],$$("sales:vue1:pops:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("sales:vue1:pops:trend")._current_upd_dt=Object(u.a)().d1,a.c.sales.push({cmp:"sales:vue1:pops:trend",data:Object(o.b)("salespop_trend").config.id}),Object(o.b)("salespop_trend").waitData.then((function(e){$$("sales:vue1:pops:trend")._isDataLoaded=1,$$("sales:vue1:pops:trend").parse(Object(o.b)("salespop_trend")),$$("sales:vue1:pops:trend").enable(),$$("sales:vue1:pops:trend").hideProgress()})),$("button.ui.button.salesParpop_"+periodSplit[1]).on("click",(function(){"m"!=$$("sales:vue1:pops:trend")._filter_level&&n.filterHandler({data:{month:$$("sales:vue1:pops:trend")._current_month}})})),$("button.ui.button.salesParpop_"+periodSplit[0]).on("click",(function(){"m"==$$("sales:vue1:pops:trend")._filter_level&&($$("sales:vue1:pops:trend")._filter_level="a",$$("sales:vue1:pops:trend").data.filter((function(e){return"month_trend"==e._type})))})),$$("sales:vue1:pops:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("sales:vue1:pops:trend")})),Object(o.b)("salespop_trend").attachEvent("onBeforeLoad",(function(){"sales"==$$("top:menu").getSelectedId()&&($$("sales:vue1:pops:trend")._filter_level="a",$$("sales:vue1:pops:trend")._months=[],$$("sales:vue1:pops:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("sales:vue1:pops:trend")._current_upd_dt=Object(u.a)().d1)}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.salesParpop_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("sales:vue1:pops:trend")._months||($$("sales:vue1:pops:trend")._months=[]),$$("sales:vue1:pops:trend")._months.some((function(t){return t==e.data.month})))$$("sales:vue1:pops:trend")._filter_level="m",$$("sales:vue1:pops:trend")._current_month=e.data.month,$$("sales:vue1:pops:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}));else{var t=Object(o.a)("sales","pops",e.data.month+"-01","dt_trend");$$("sales:vue1:pops:trend").showProgress(),$$("sales:vue1:pops:trend").disable(),t.then((function(r){$$("sales:vue1:pops:trend")._months.push(e.data.month),$$("sales:vue1:pops:trend")._filter_level="m",$$("sales:vue1:pops:trend").parse(t).then((function(){$$("sales:vue1:pops:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month}))})),$$("sales:vue1:pops:trend")._current_month=e.data.month,$$("sales:vue1:pops:trend").enable(),$$("sales:vue1:pops:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=(r(10),r(1)),o=r(15),i=r(0),u=r(4);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"treetable",id:"sales:vue1:popuser",math:!0,css:"webix_header_border webix_footer_border",borderless:!0,select:!0,columns:[{id:"pop",header:[{text:"Produits par agent par pop ",colspan:3,css:{"text-align":"center"}},{text:"POP",css:{"text-align":"center","font-size":"12px"}}],fillspace:3,template:"{common.treetable()}#pop#"},{id:"qty",header:["",{text:"Quantité",css:{"text-align":"center","font-size":"12px"}}],css:{"text-align":"right"},fillspace:1,format:function(e){return""==e?0:webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:0})}},{id:"montant",header:["",{text:"Montant",css:{"text-align":"center","font-size":"12px"}}],css:{"text-align":"right"},fillspace:1,format:function(e){return""==e?0:webix.Number.format(e,{groupDelimiter:" ",groupSize:3,decimalDelimiter:".",decimalSize:0})}}]}},s.init=function(e){webix.extend(e,webix.ProgressBar),e.showProgress(),e.disable(),a.c.sales.push({cmp:"sales:vue1:popuser",data:Object(o.b)("sales_pop_split").config.id}),Object(o.b)("sales_pop_split").waitData.then((function(t){e._isDataLoaded=1;var r=[].concat(Object(o.b)("sales_pop_split").data.getRange()),n=Object(u.c)(r,["pop","user","cat","tp","prod"],"pop",["qty","montant"]);e.parse([].concat(n)),e.enable(),e.hideProgress(),Object(o.b)("sales_pop_split").attachEvent("onAfterLoad",(function(){if("sales"==$$("top:menu").getSelectedId()){var t=[].concat(Object(o.b)("sales_pop_split").data.getRange()),r=Object(u.c)(t,["pop","user","cat","tp","prod"],"pop",["qty","montant"]);e.clearAll(),e.parse([].concat(r)),e.enable(),e.hideProgress()}}))})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("sales:vue1:popuser")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=r(0),o=r(85),i=r(144);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"tabview",id:"traffic:tab",animate:!1,cells:[{id:"tab:voix",header:Object(a.g)("traffic_voix_tab"),body:new o.default(this.app,"","voice","trafficvoix")},{id:"tab:sms",header:Object(a.g)("traffic_sms_tab"),body:new o.default(this.app,"","sms","trafficsms")},{id:"tab:data",header:Object(a.g)("traffic_data_tab"),body:i.default}]}},u.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return f}));var n=r(2),a=r(5),o=r(80),i=r(81),u=r(8),s=r(28),c=r(29),d=r(82),l=r(83),p=r(0);var f=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var f=n.prototype;return f.config=function(){var e,t,r="data",n=[],f={view:"mobile"!=Object(p.e)()&&"mobile_rotated"!=Object(p.e)()?"c-dashboard":"m-dashboard",margin:5,padding:5,cells:n,css:{"background-color":"#EBEDF0"}};switch(Object(p.e)()){case"mobile":e=4,t=6,n.push({view:"panel",x:0,y:0,dx:4,dy:2,resize:!0,header:new a.default(this.app,"","traffic_offer_data"),body:{type:"clean",margin:0,rows:[new c.default(this.app,"",r),new u.default(this.app,"","traffByType_"+r,3),new s.default(this.app,"",r)]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:0,y:2,dx:4,dy:2,resize:!0,header:new a.default(this.app,"","traffic_other_data"),body:{type:"clean",margin:0,rows:[new u.default(this.app,"","traffByType_dest_"+r,2,1),i.default,l.default]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:0,y:4,dx:4,dy:2,resize:!0,header:new a.default(this.app,"","data_repartition"),body:{type:"clean",margin:0,rows:[d.default,o.default]},css:{"background-color":"#fff"}}),f.minHeight=1800;break;case"mobile_rotated":e=4,t=3,n.push({view:"panel",x:0,y:0,dx:2,dy:2,resize:!0,header:new a.default(this.app,"","traffic_offer_data"),body:{type:"clean",margin:0,rows:[new c.default(this.app,"",r),new u.default(this.app,"","traffByType_"+r,3),new s.default(this.app,"",r)]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:2,y:0,dx:2,dy:2,resize:!0,header:new a.default(this.app,"","traffic_other_data"),body:{type:"clean",margin:0,rows:[new u.default(this.app,"","traffByType_dest_"+r,2,1),i.default,l.default]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:0,y:2,dx:4,dy:1,resize:!0,header:new a.default(this.app,"","data_repartition"),body:{type:"clean",margin:0,cols:[d.default,o.default]},css:{"background-color":"#fff"}}),f.minHeight=700;break;default:e=9,t=6,n.push({view:"panel",x:0,y:0,dx:3,dy:6,resize:!0,header:new a.default(this.app,"","traffic_offer_data"),body:{type:"clean",margin:0,rows:[new c.default(this.app,"",r),new u.default(this.app,"","traffByType_"+r,3),new s.default(this.app,"",r)]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:3,y:0,dx:3,dy:6,resize:!0,header:new a.default(this.app,"","data_repartition"),body:{type:"clean",margin:0,rows:[d.default,o.default]},css:{"background-color":"#fff"}}),n.push({view:"panel",x:6,y:0,dx:3,dy:6,resize:!0,header:new a.default(this.app,"","traffic_other_data"),body:{type:"clean",margin:0,rows:[new u.default(this.app,"","traffByType_dest_"+r,2,1),i.default,l.default]},css:{"background-color":"#fff"}}),"standard"==Object(p.e)()&&(f.minHeight=600)}return f.cells=n,f.gridColumns=e,f.gridRows=t,{view:"scrollview",scroll:"y",body:f}},f.init=function(){},n}(n.b)},function(e,t){function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}webix.ui.custom_smui=webix.protoUI({name:"smui-cmp",defaults:{content:{name:"div"}},$init:function(){this._cmp||webix.delay(webix.bind(this.__render_once,this))},__build:function(e,t){var r=t.name?t.name:"div",a=e.append(r);if(t.view&&(t.id?a.attr("class",t.view+" "+t.id):a.attr("class",t.view)),t.props)for(var o in t.props)a.attr(o,t.props[o]);if(t.style)for(var i in t.style)a.style(i,t.style[i]);if(t.children)for(var u,s=n(t.children);!(u=s()).done;){var c=u.value;this.__build(a,c)}if(t.value&&a.append("span").html(t.value),t.html&&a.html(t.html),t.events)for(var d in t.events)a.on(d,t.events[d]);this._cmp=a},__render_once:function(){var e=r({},this.config),t=d3.select(this.$view);this._cmp||this.__build(t,e.content),this.callEvent("onAfterRender")},$getSize:function(e,t){return webix.ui.view.prototype.$getSize.call(this,e,t)}},webix.EventSystem,webix.ui.view)},function(e,t,r){"use strict";r.r(t);var n=r(1),a=d3.json("static/map/"+n.h.world);n.h.zone_ref,n.h.zone_levels;webix.protoUI({name:"echarts-map-world",defaults:{options:{series:[]}},$init:function(){this._ready_awaits=1,this._is_init=0,webix.extend(this,webix.ProgressBar),this.data.provideApi(this,!0);var e=this;this.data.attachEvent("onAfterLoad",(function(){2==this._ready_awaits?(webix.delay(webix.bind(this.render,this)),this.config.ready&&(this.config.ready.call(this,this.data),this._ready_awaits=3)):this._ready_awaits=1})),this.data.attachEvent("onStoreUpdated",(function(){e._isDataLoaded=1,2==e._ready_awaits&&webix.delay(webix.bind(e.render,e))})),webix.delay(webix.bind(this.launch_init,this))},launch_init:function(){1==this._ready_awaits&&webix.delay(webix.bind(this._render_once,this))},_render_once:function(){var e=this.config,t=this,r=echarts.init(t.$view);this._echart_obj=r,this._isDataLoaded=void 0===this._isDataLoaded?0:this._isDataLoaded,this._echart_obj.showLoading(),a.then((function(r){if(echarts.getMap("world_map")||echarts.registerMap("world_map",r),e.charts_event)for(var n in e.charts_event)t._echart_obj.on(n,e.charts_event[n][0],e.charts_event[n][1]);t._ready_awaits=2,t._echart_obj.setOption(e.options,!0),webix.delay(webix.bind(t.render,t))}))},render:function(){var e=this.config.options,t=this,r=this.data.getRange(),n=[].concat(r);(n=(n=n.filter((function(e){return e._type==t._current_type}))).filter((function(e){return e.country&&"Inconnu"!=e.country&&"null"!=e.country&&""!=e.country}))).length>0?(e.series[0].data=n.map((function(e){return{name:e.code.trim(),value:e.value,country:e.country}})),e.visualMap.max=Number.parseFloat(d3.max(e.series[0].data.map((function(e){return e.value})))),e.visualMap.min=Number.parseFloat(d3.min(e.series[0].data.map((function(e){return e.value})))),"function"==typeof this.config.beforedisplay&&this.config.beforedisplay(r,e),this._echart_obj.setOption(e,!0),this._echart_obj.hideLoading()):(e.visualMap.max=0,e.visualMap.min=0,1==this._isDataLoaded&&this._echart_obj.hideLoading())},$getSize:function(e,t){return webix.ui.view.prototype.$getSize.call(this,e,t)},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)&&2==this._ready_awaits&&this._echart_obj.resize()}},webix.DataLoader,webix.EventSystem,webix.ui.view)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(86),o=r(88);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){var e=[];return e.push({$subview:a.default}),e.push({$subview:o.default}),{type:"space",margin:5,css:"app-right-panel",padding:4,rows:e}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(98),o=r(99);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){var e=[];return e.push({$subview:o.default}),e.push({$subview:a.default}),{type:"space",margin:5,css:"app-right-panel",padding:4,rows:e}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=(r(10),r(1)),o=r(12),i=r(0),u=r(4);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"echarts-grid-dataset",id:"home:vue1:trend:bndle",animation:!0,charts_event:{click:[{seriesId:"home:bndle_split",seriesType:"bar"},function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=this;this.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),this._clicked&&(t=!0,r._clicked=!1,clearTimeout(this.executeDoubleClick))}if(t)if($("button.ui.button.bndleHome_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("home:vue1:trend:bndle")._months||($$("home:vue1:trend:bndle")._months=[]),$$("home:vue1:trend:bndle")._months.some((function(t){return t==e.data.month})))$$("home:vue1:trend:bndle")._filter_level="m",$$("home:vue1:trend:bndle")._current_month=e.data.month,$$("home:vue1:trend:bndle").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||"bndle_split"==t._type)}));else{var n=Object(o.a)("bndle","dt_trend",e.data.month+"-01");$$("home:vue1:trend:bndle").showProgress(),$$("home:vue1:trend:bndle").disable(),n.then((function(t){$$("home:vue1:trend:bndle")._months.push(e.data.month),$$("home:vue1:trend:bndle")._filter_level="m",$$("home:vue1:trend:bndle").parse(n).then((function(){$$("home:vue1:trend:bndle").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||"bndle_split"==t._type)}))})),$$("home:vue1:trend:bndle")._current_month=e.data.month,$$("home:vue1:trend:bndle").enable(),$$("home:vue1:trend:bndle").hideProgress()}))}else this._clicked=!0}]},options:{tooltip:{trigger:"axis",show:!0,z:2,axisPointer:{show:!0},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){var t=e[0].name+"<br/>",r=e[0].dimensionNames[1];return t+=e[0].marker+Object(i.b)(e[0].data[r])}},dataset:[{dimensions:["month","trend"]},{dimensions:["upd_dt","trend_dt"]}],grid:[{top:6,left:5,bottom:3,containLabel:!0}],xAxis:[{type:"category",isDim:!0,splitNumber:6,splitLine:{show:!1},axisPointer:{show:!0},axisTick:{show:!0,alignWithLabel:!0}}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[{type:"line",encode:{x:"month",y:"trend"},seriesLayoutBy:"row",datasetIndex:0,_type:"month_trend",_dim:"key",id:"home:bndle_split",z:3,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"blue"},{offset:1,color:"white"}],global:!1}},smooth:!0,lineStyle:{color:"blue",width:2.5},itemStyle:{color:"blue"},barMaxWidth:40,barMinHeight:10},{type:"line",encode:{x:"upd_dt",y:"trend_dt"},_type:"dt_trend",datasetIndex:1}]}}},s.init=function(e){$$("home:vue1:trend:bndle").showProgress(),$$("home:vue1:trend:bndle").disable(),a.c.home.push({cmp:"home:vue1:trend:bndle",data:Object(o.b)("trend_bndle").config.id}),$$("home:vue1:trend:bndle")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:bndle")._months=[],$$("home:vue1:trend:bndle")._filter_level="a",Object(o.b)("trend_bndle").waitData.then((function(e){$$("home:vue1:trend:bndle")._isDataLoaded=1,$$("home:vue1:trend:bndle").parse(Object(o.b)("trend_bndle")),$$("home:vue1:trend:bndle").enable(),$$("home:vue1:trend:bndle").hideProgress()})),$$("home:vue1:trend:bndle").data.attachEvent("onBeforeLoad",(function(){"home"==$$("top:menu").getSelectedId()&&($$("home:vue1:trend:bndle")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:bndle")._months=[],$$("home:vue1:trend:bndle")._filter_level="a")})),$$("home:vue1:trend:bndle").data.attachEvent("onStoreLoad",(function(){Object(i.j)("home:vue1:trend:bndle")}))},s.ready=function(e){$$("bndleHome").attachEvent("onAfterRender",(function(){"home"==$$("top:menu").getSelectedId()&&($("button.ui.button.bndleHome_"+periodSplit[1]).on("click",(function(){if("a"==e._filter_level)if(e._filter_level="m",e._months.some((function(t){return t==e._current_month})))e.data.filter((function(t){return"month_trend"!=t._type&&(t.period==e._current_month||"bndle_split"==t._type)}));else{var t=Object(o.a)("bndle","dt_trend",e._current_month+"-01");e.showProgress(),e.disable(),t.then((function(r){e._months.push(e._current_month),e.parse(t).then((function(){e.data.filter((function(t){return"month_trend"!=t._type&&(t.period==e._current_month||"bndle_split"==t._type)}))})),e._current_month=e._current_month,e.enable(),e.hideProgress()}))}})),$("button.ui.button.bndleHome_"+periodSplit[0]).on("click",(function(){e&&"m"==e._filter_level&&(e._filter_level="a",e.data.filter((function(e){return"dt_trend"!=e._type})))})))}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=(r(10),r(1)),o=r(12),i=r(0),u=r(4);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"echarts-grid-dataset",id:"home:vue1:trend:topup",animation:!0,charts_event:{click:[{seriesId:"home:topup_split",seriesType:"bar"},function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=this;this.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),this._clicked&&(t=!0,r._clicked=!1,clearTimeout(this.executeDoubleClick))}if(t)if($("button.ui.button.topupHome_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("home:vue1:trend:topup")._months||($$("home:vue1:trend:topup")._months=[]),$$("home:vue1:trend:topup")._months.some((function(t){return t==e.data.month})))$$("home:vue1:trend:topup")._filter_level="m",$$("home:vue1:trend:topup")._current_month=e.data.month,$$("home:vue1:trend:topup").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||t.rec_type)}));else{var n=Object(o.a)("topup","dt_trend",e.data.month+"-01");$$("home:vue1:trend:topup").showProgress(),$$("home:vue1:trend:topup").disable(),n.then((function(t){$$("home:vue1:trend:topup")._months.push(e.data.month),$$("home:vue1:trend:topup")._filter_level="m",$$("home:vue1:trend:topup").parse(n).then((function(){$$("home:vue1:trend:topup").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||t.rec_type)}))})),$$("home:vue1:trend:topup")._current_month=e.data.month,$$("home:vue1:trend:topup").enable(),$$("home:vue1:trend:topup").hideProgress()}))}else this._clicked=!0}]},options:{tooltip:{trigger:"axis",show:!0,z:2,axisPointer:{show:!0},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){var t=e[0].name+"<br/>",r=e[0].dimensionNames[1];return t+=e[0].marker+Object(i.b)(e[0].data[r])}},grid:[{top:6,bottom:3,left:5,containLabel:!0}],dataset:[{dimensions:["month","trend"]},{dimensions:["upd_dt","trend_dt"]}],xAxis:[{type:"category",isDim:!0,_type:"trend",splitLine:{show:!1},axisPointer:{show:!0},axisLabel:{show:!0},axisTick:{show:!0,alignWithLabel:!0}}],yAxis:[{type:"value",isDim:!0,splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[{type:"line",encode:{x:"month",y:"trend"},datasetIndex:0,_type:"month_trend",id:"home:topup_split",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"orange"},{offset:1,color:"white"}],global:!1}},smooth:!0,lineStyle:{color:"orange",width:2.5},itemStyle:{color:"orange"},z:3},{type:"line",encode:{x:"upd_dt",y:"trend_dt"},_type:"dt_trend",datasetIndex:1}]}}},s.init=function(e){$$("home:vue1:trend:topup").showProgress(),$$("home:vue1:trend:topup").disable(),a.c.home.push({cmp:"home:vue1:trend:topup",data:Object(o.b)("trend_topup").config.id}),$$("home:vue1:trend:topup")._months=[],$$("home:vue1:trend:topup")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:topup")._filter_level="a",Object(o.b)("trend_topup").waitData.then((function(e){$$("home:vue1:trend:topup")._isDataLoaded=1,$$("home:vue1:trend:topup").parse(Object(o.b)("trend_topup")),$$("home:vue1:trend:topup").enable(),$$("home:vue1:trend:topup").hideProgress()})),$$("home:vue1:trend:topup").data.attachEvent("onStoreLoad",(function(){Object(i.j)("home:vue1:trend:topup")})),$$("home:vue1:trend:topup").data.attachEvent("onBeforeLoad",(function(){"home"==$$("top:menu").getSelectedId()&&($$("home:vue1:trend:topup")._months=[],$$("home:vue1:trend:topup")._current_month=Object(u.a)().d1.substr(0,7),$$("home:vue1:trend:topup")._filter_level="a")}))},s.ready=function(e){$$("topupHome").attachEvent("onAfterRender",(function(){$("button.ui.button.topupHome_"+periodSplit[1]).on("click",(function(){if("a"==e._filter_level)if(e._filter_level="m",e._months.some((function(t){return t==e._current_month})))e.data.filter((function(t){return"month_trend"!=t._type&&(t.period==e._current_month||t.rec_type)}));else{var t=Object(o.a)("topup","dt_trend",e._current_month+"-01");e.showProgress(),e.disable(),t.then((function(r){e._months.push(e._current_month),e.parse(t).then((function(){e.data.filter((function(t){return"month_trend"!=t._type&&(t.period==e._current_month||t.rec_type)}))})),e._current_month=e._current_month,e.enable(),e.hideProgress()}))}})),$("button.ui.button.topupHome_"+periodSplit[0]).on("click",(function(){e&&"m"==e._filter_level&&(e._filter_level="a",e.data.filter((function(e){return"dt_trend"!=e._type})))}))}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n}));var n=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.config=function(){var e=this;return{cols:[{},{rows:[{},{view:"form",localId:"login:form",maxWidth:400,minWidth:245,borderless:!0,margin:10,rows:[{type:"header",template:this.app.config.name},{view:"text",name:"login",label:"Nom utilisateur",labelPosition:"top"},{view:"text",type:"password",name:"pass",label:"Mot de passe",labelPosition:"top"},{view:"button",value:"Connexion",click:function(){return e.do_login()},hotkey:"enter"}],rules:{login:webix.rules.isNotEmpty,pass:webix.rules.isNotEmpty}},{}]},{}]}},a.init=function(e){e.$view.querySelector("input").focus()},a.do_login=function(){var e=this.app.getService("user"),t=this.$$("login:form");if(t.validate()){var r=t.getValues();e.login(r.login,r.pass).catch((function(){webix.html.removeCss(t.$view,"invalid_login"),t.elements.pass.focus(),webix.delay((function(){webix.html.addCss(t.$view,"invalid_login")}))}))}},n}(r(2).b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(108),o=r(109);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){var e=[];return e.push({$subview:a.default}),e.push({$subview:o.default}),{type:"space",margin:5,css:"app-right-panel",padding:4,rows:e}},n}(n.b)},function(e,t){function r(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}webix.protoUI({name:"echarts-grid",defaults:{options:{title:[],grid:[],xAxis:[],yAxis:[],series:[]}},$init:function(){this._ready_awaits=1,this._is_init=0,webix.extend(this,webix.ProgressBar),this.data.provideApi(this,!0);var e=this;this.data.attachEvent("onAfterLoad",(function(){2==this._ready_awaits?(webix.delay(webix.bind(this.render,this)),this.config.ready&&(this.config.ready.call(this,this.data),this._ready_awaits=3)):this._ready_awaits=1})),this.data.attachEvent("onStoreUpdated",(function(){console.log("onStoreUpdated"),2==e._ready_awaits&&webix.delay(webix.bind(e.render,e))})),webix.delay(webix.bind(this.launch_init,this))},launch_init:function(){1==this._ready_awaits&&webix.delay(webix.bind(this._render_once,this))},_render_once:function(){$.extend(!0,this.defaults,this.config);var e=echarts.init(this.$view);this._echart_obj=e,this._ready_awaits=2,this._echart_obj.showLoading(),webix.delay(webix.bind(this.render,this))},render:function(){var e=this.config.options,t=(this.rootelmt,this.data.getRange());if(t.length>0){for(var n,a=function(){var e=n.value,r=e._dim?e._dim:"name";e.isDim&&t[0][e._type]&&(e.data=t[0][e._type].map((function(e){return e[r]})))},o=r(e.xAxis);!(n=o()).done;)a();0;for(var i,u=function(){var e=i.value,r=e._dim?e._dim:"name";e.isDim&&t[0][e._type]&&(e.data=t[0][e._type].map((function(e){return e[r]})))},s=r(e.yAxis);!(i=s()).done;)u();0;for(var c,d=function(){var e=c.value,r=e._value?e._value:"value";e._type&&("pie"!=e.type?e.data=t[0][e._type].map((function(e){return e[r]})):e.data=t[0][e._type])},l=r(e.series);!(c=l()).done;)d();if(this.config.stackChart)for(var p,f=r(t[0][this.config.stackChart._type]);!(p=f()).done;){var h=p.value,_={name:h.name,type:"bar",data:[h.value],tooltip:{trigger:"item"},barMinHeight:10};this.config.stackChart._split&&(_.stack="split"),e.series.push(_)}this._echart_obj.setOption(e,!0),this._echart_obj.hideLoading()}},$getSize:function(e,t){return webix.ui.view.prototype.$getSize.call(this,e,t)}},webix.DataLoader,webix.EventSystem,webix.ui.view)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=r(0),o=r(45);function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t,r;function n(t,r,n,a,o){var i;return(i=e.call(this,t,r)||this)._kpi=n,i._did=a,i._vid=o,i}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi,t=(this._did,this._vid,Object(a.d)(e));"mobile"==Object(a.e)()||Object(a.e)();return{view:"toolbar",id:"head:"+e,type:"clean",height:"mobile"==Object(a.e)()||"mobile_rotated"==Object(a.e)()?30:35,cols:[{template:t,borderless:!0,type:"header",css:Object(a.c)(e)},{css:Object(a.c)(e),width:50},{view:"icon",icon:"mdi mdi-export",css:Object(a.c)(e),align:"right"},{view:"icon",icon:"mdi mdi-fullscreen",css:Object(a.c)(e),align:"right"}]}},u.init=function(e){var t=this._kpi,r=this._did,n=(this._vid,webix.ui({view:"contextmenu",click:function(e){if("i"==e&&webix.toPNG($$("head:"+t).getParentView().getChildViews()[1],{filename:t+"_export"}),"p"==e&&webix.toPDF($$("head:"+t).getParentView().getChildViews()[1],{filename:t+"_export",display:"image"}),"c"==e){var n=t;if($$("head:"+t).getParentView().getChildViews()[1].getChildViews().length>0){var a=1;$$("head:"+t).getParentView().getChildViews()[1].getChildViews().forEach((function(e){"treemap"==e._eType?(webix.toCSV($$(e._expDataId),{filter:function(e){return e._type==r},filename:n+"_"+a,ignore:{_type:!0}}),a++):e.data&&"function"==typeof e.data.getRange&&(webix.toCSV(e,{filename:n+"_"+a,ignore:{_type:!0}}),a++)}))}else if($$("head:"+t).getParentView().getChildViews()[1].data&&"function"==typeof $$("head:"+t).getParentView().getChildViews()[1].data.getRange)if($$("head:"+t).getParentView().getChildViews()[1]._echart_obj){var o=1,u=(null==$$(r)?[].concat($$("head:"+t).getParentView().getChildViews()[1].data.getRange().map((function(e){return e._type}))):[].concat($$(r).data.getRange().map((function(e){return e._type})))).filter((function(e,t,r){return r.indexOf(e)==t}));if("echarts-map"==$$("head:"+t).getParentView().getChildViews()[1].config.view)return void webix.toCSV($$("head:"+t).getParentView().getChildViews()[1],{filename:n});for(var s,c=function(){var e=s.value,a={},i={filter:function(t){return void 0===t._type||t._type==e}},u=$$("head:"+t).getParentView().getChildViews()[1]._echart_obj.getOption().series.filter((function(t){return void 0===t._type||t._type==e}));if(i.filename=n+"_"+o,"treemap"==u[0].type)u[0]._type==e&&webix.toCSV($$(r),i);else{var c=u.map((function(e){return e.encode}));for(var d in c[0])a[c[0][d]]=!0;i.columns=a,webix.toCSV($$("head:"+t).getParentView().getChildViews()[1],i)}o++},d=i(u);!(s=d()).done;)c()}else webix.toCSV($$("head:"+t).getParentView().getChildViews()[1],{filename:n,ignore:{_type:!0}});else webix.message("Les données ne peuvent pas être extraites")}},data:o.a}));webix.event($$("head:"+this._kpi).$view,"click",(function(e){var t=e.target.className;t&&-1!=t.toString().indexOf("mdi-export")&&(n.setContext(webix.$$(e.target)),n.show(e.target))}));var a={view:"toolbar",id:"head:full:"+t,type:"clean",cols:[{},{view:"icon",icon:"mdi mdi-fullscreen-exit",align:"right",click:function(){webix.fullscreen.exit()}}]};webix.event($$("head:"+this._kpi).$view,"click",(function(e){var r=e.target.className;r&&-1!=r.toString().indexOf("mdi-fullscreen")&&webix.fullscreen.set($$("head:"+t).getParentView().getChildViews()[1],{head:a})}))},n}(n.b)},function(e,t,r){"use strict";r.r(t);var n=r(0);webix.protoUI({name:"mob-stats-card",defaults:{content:{header:"",shortheader:"",wseuil:210,meta:"",description:"",kpi_class:"ui blue huge header",kpi_val:"",kpi_variation:"ui tiny caret up icon",kpi_variation_val:""}},$init:function(){this._ready_awaits=1,this._is_init=0,webix.extend(this,webix.ProgressBar),this.data.provideApi(this,!0);var e=this;webix.event(window,"resize",(function(){2==e._ready_awaits&&null!=e.data&&webix.delay(webix.bind(e.render,e))})),this.attachEvent("onAfterLoad",(function(){2==this._ready_awaits?(webix.delay(webix.bind(this.render,this)),this.config.ready&&(this.config.ready.call(this,this.data),this._ready_awaits=3)):this._ready_awaits=1})),this.data.attachEvent("onStoreUpdated",(function(){2==e._ready_awaits&&webix.delay(webix.bind(e.render,e))})),webix.delay(webix.bind(this.launch_init,this))},launch_init:function(){1==this._ready_awaits&&webix.delay(webix.bind(this._render_once,this))},_render_once:function(){var e=$.extend(!0,this.defaults,this.config),t=d3.select(this.$view).append("div"),r=this.$width;t.attr("class","ui link fluid card"),t.style("height","100%"),this.rootelmt=t;var n=t.append("div");n.classed("content",!0);var a=n.append("div");a.classed("right floated",!0),a.append("i").classed(e.content.kpi_variation,!0),a.append("span").attr("class","ui description").html("...");var o=r<e.content.seuil?e.content.shortheader:e.content.header,i=r<e.content.wdseuil?e.content.shortdesc:e.content.meta;e.content.moblab?n.append("div").attr("class","tiny header lab").html(e.content.moblab):n.append("div").attr("class","tiny header lab").html(o),e.content.mobdesc?n.append("div").attr("class","ui tiny meta desc").html(e.content.mobdesc):n.append("div").attr("class","ui tiny meta desc").html(i),n.append("p").attr("class","ui blue tiny header").html("..."),this._ready_awaits=2,webix.delay(webix.bind(this.render,this))},render:function(){var e=this.rootelmt,t=this.config,r=(r=[].concat(this.data.getRange())).filter((function(e){return e.kpi==t._type})),a=this.$width;t=this.config;this.config.content.moblab?e.select("div div").select(".lab").html(this.config.content.moblab):e.select("div div").select(".lab").html(a<this.config.content.seuil?this.config.content.shortheader:this.config.content.header),this.config.content.mobdesc?e.select("div div").select(".desc").html(this.config.content.mobdesc):e.select("div div").select(".desc").html(a<t.content.wdseuil?t.content.shortdesc:t.content.meta),e.selectAll("div div i").data(r).attr("class",(function(e){return e.var<0?"ui red tiny caret down icon":"ui green tiny caret up icon"})),e.selectAll("div div span").data(r).attr("class",(function(e){return e.var<0?"ui red tiny header":"ui green tiny header"})).html((function(e,t){return Math.abs(e.var)+"%"})),e.selectAll("div p").data(r).html((function(e,t){return e.kpi.indexOf("data")<0?Object(n.h)(e.value):Object(n.a)(e.value)}))},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)},$getSize:function(e,t){return webix.ui.view.prototype.$getSize.call(this,e,t)}},webix.DataLoader,webix.EventSystem,webix.ui.view)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(27),r(1)),o=r(11),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"home:vue1:operators:parc",options:{tooltip:{trigger:"axis",show:!0,axisPointer:{type:"shadow"},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},animation:!0,title:[{text:"Par operateur",left:"50%",top:5,textAlign:"center",textStyle:{fontSize:12}}],grid:[{left:5,bottom:5,top:20,right:"20%",containLabel:!0}],xAxis:[{type:"value",splitLine:{show:!1},axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}}],yAxis:[{type:"category",axisLabel:{interval:0,textStyle:{fontSize:10}},splitLine:{show:!1},axisTick:{show:!0}}],dataset:[{dimensions:["operator","op_qty"]}],series:[{type:"bar",_type:"op_split",z:3,datasetIndex:0,showBackground:!0,barMaxWidth:30,barMinHeight:10,encode:{x:"op_qty",y:"operator"},tooltip:{trigger:"item",show:!0,formatter:function(e){return e.name+": "+Object(i.h)(e.data.op_qty)}},itemStyle:{color:function(t){return e.revenueOP[t.value.operator]}},label:{normal:{position:"right",show:!0},formatter:function(e){return Object(i.h)(e.value)}}}]}}}))},u.init=function(e){$$("home:vue1:operators:parc").showProgress(),$$("home:vue1:operators:parc").disable(),a.c.home.push({cmp:"home:vue1:operators:parc",data:Object(o.b)("parc_operators").config.id}),Object(o.b)("parc_operators").waitData.then((function(e){$$("home:vue1:operators:parc")._isDataLoaded=1,$$("home:vue1:operators:parc").parse(Object(o.b)("parc_operators")),$$("home:vue1:operators:parc").enable(),$$("home:vue1:operators:parc").hideProgress()})),$$("home:vue1:operators:parc").data.attachEvent("onStoreLoad",(function(){Object(i.j)("home:vue1:operators:parc")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return o}));var n=r(2),a=r(0);var o=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){var e=this._kpi;return{view:"toolbar",type:"clean",cols:[{template:Object(a.d)(e),type:"header",css:Object(a.c)(e),height:30}]}},n}(n.b)},function(e,t,r){"use strict";r.r(t);var n=r(0);webix.protoUI({name:"stats-card",defaults:{content:{header:"",shortheader:"",wseuil:210,meta:"",description:"",kpi_class:"ui blue huge header",kpi_val:"",kpi_variation:"small caret up icon",kpi_variation_val:""}},$init:function(){this._ready_awaits=1,this._is_init=0,webix.extend(this,webix.ProgressBar),this.data.provideApi(this,!0);var e=this;webix.event(window,"resize",(function(){2==e._ready_awaits&&null!=e.data&&webix.delay(webix.bind(e.render,e))})),this.attachEvent("onAfterLoad",(function(){2==this._ready_awaits?(webix.delay(webix.bind(this.render,this)),this.config.ready&&(this.config.ready.call(this,this.data),this._ready_awaits=3)):this._ready_awaits=1})),this.data.attachEvent("onStoreUpdated",(function(){2==e._ready_awaits&&webix.delay(webix.bind(e.render,e))})),webix.delay(webix.bind(this.launch_init,this))},launch_init:function(){1==this._ready_awaits&&webix.delay(webix.bind(this._render_once,this))},_render_once:function(){var e=$.extend(!0,this.defaults,this.config),t=d3.select(this.$view).append("div"),r=this.$width;t.attr("class","ui link fluid card data-tooltip='TEST'"),t.style("height","100%"),this.rootelmt=t;var n=t.append("div");n.classed("content",!0);var a=n.append("div");a.classed("right floated",!0),a.append("i").classed(e.content.kpi_variation,!0),a.append("span").attr("class","ui description").html("..."),n.append("div").attr("class","header lab").html(r<e.content.seuil?e.content.shortheader:e.content.header),n.append("div").attr("class","ui tiny meta desc").html(r<e.content.wdseuil?e.content.shortdesc:e.content.meta),n.append("p").attr("class","ui blue header").html("..."),this._ready_awaits=2,webix.delay(webix.bind(this.render,this))},render:function(){var e=this.rootelmt,t=this.config,r=(r=[].concat(this.data.getRange())).filter((function(e){return e.kpi==t._type})),a=this.$width;t=this.config;e.select("div div").select(".lab").html(a<this.config.content.seuil?this.config.content.shortheader:this.config.content.header),e.select("div div").select(".desc").html(a<t.content.wdseuil?t.content.shortdesc:t.content.meta),e.selectAll("div div i").data(r).attr("class",(function(e){return e.var<0?"red small caret down icon":"green small caret up icon"})),e.selectAll("div div span").data(r).attr("class",(function(e){return e.var<0?"ui red small header":"ui green small header"})).html((function(e,t){return Math.abs(e.var)+"%"})),e.selectAll("div p").data(r).html((function(e,t){return e.kpi.indexOf("data")<0?Object(n.h)(e.value):Object(n.a)(e.value)}))},$setSize:function(e,t){webix.ui.view.prototype.$setSize.call(this,e,t)},$getSize:function(e,t){return webix.ui.view.prototype.$getSize.call(this,e,t)}},webix.DataLoader,webix.EventSystem,webix.ui.view)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(102),o=r(107);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){var e=[];return e.push({$subview:o.default}),e.push({$subview:a.default}),{type:"space",margin:5,css:"app-right-panel",padding:4,rows:e}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return a}));var n=r(2);var a=function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=a.prototype;return o.config=function(){return{rows:[{view:"toolbar",css:"webix_dark",padding:{left:8},elements:[{view:"label",label:this.app.config.name}]},{type:"space",cols:[{view:"sidebar",id:"top:menu",width:180,layout:"y",select:!0,template:"<span class='webix_icon #icon#'></span> #value# ",data:[{value:"DashBoard",id:"start",icon:"wxi-plus-square"},{value:"Data",id:"data",icon:"wxi-columns"},{value:"Settings",id:"settings",icon:"wxi-pencil"}]},{$subview:!0}]}]}},o.init=function(){this.use(n.c.Menu,"top:menu")},a}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=r(111),o=r(112),i=r(0),u=r(3);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){var e=[];return e.push({$subview:o.default}),e.push({$subview:a.default}),{type:"space",margin:5,css:"app-right-panel",padding:4,rows:e}},s.init=function(e){var t=this;Object(i.i)("parc",Object(i.e)()),u.b.dashboards.parc=t,webix.event(window,"resize",(function(){if("parc"==$$("top:menu").getSelectedId()){if(Object(i.f)("parc")!=Object(i.e)()&&(Object(i.i)("parc",Object(i.e)()),null!=u.b.dashboards.parc._container&&u.b.dashboards.parc.refresh()),"mobile_rotated"==Object(i.e)())return void $$("parc:stats").hide();$$("parc:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("parc:stats").define("gridColumns",t._colCount),$$("parc:stats").adjust()}}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=r(22),o=r(23),i=r(8);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"carousel",id:"parc_type",css:"webix_dark",cols:[{type:"clean",rows:[new a.default(this.app,"","fai"),new i.default(this.app,"","parcByType_fai",2),new o.default(this.app,"","fai")]},{type:"clean",rows:[new a.default(this.app,"","gros"),new i.default(this.app,"","parcByType_gros",2),new o.default(this.app,"","gros")]}]}},u.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return o}));var n=r(2),a=r(32);var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.config=function(){return{view:"carousel",css:"webix_dark",cols:[{type:"clean",rows:[new a.default(this.app,"","FAI")]},{type:"clean",rows:[new a.default(this.app,"","GROS")]}]}},o.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=r(0),o=r(122),i=r(119);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"tabview",id:"parc:tab",animate:!1,cells:[{id:"tab:fai",header:Object(a.g)("parc_fai"),body:i.default},{id:"tab:gros",header:Object(a.g)("parc_gros"),body:o.default}]}},u.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(9),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return a.a.then((function(e){return{view:"echarts-grid-dataset",id:"parc:vue1:off:trend",animation:!0,beforedisplay:function(t,r,a){var o=this,u=[],s=[],c=[],d=t.map((function(e){return e.off_group})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==t[0]._type?t.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):t.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){c.push(e.parcOff[r]),s.push({dimensions:["month","trend"],source:t.filter((function(e){return e.operator==r&&"month_trend"==e._type})),isAdded:!0}),u.push({type:"bar",stack:"split",id:"off_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,_type:"month_trend",itemStyle:{color:e.parcOff[r]},_isStack:!0,name:r,encode:{x:"month",y:"trend"},gridIndex:1}),s.push({dimensions:["upd_dt","trend"],source:t.filter((function(e){return e.off_group==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,_isStack:!0,name:r,itemStyle:{color:e.parcOff[r]},enable:{x:"upd_dt",y:"trend"},gridIndex:1,datasetIndex:s.length,_type:"dt_trend"}),a.on("click",{seriesId:"off_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0}))})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=c.length&&(r.color=c),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=u.length&&(r.series=[].concat(u,r.series)),r.xAxis[0].data=[].concat(l)},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=s(e);!(t=n()).done;){var a=t.value;r+=a.marker+a.seriesName+" : "+Object(i.b)(a.value.trend)+"<br/>"}return r},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:"5",type:"scroll",textStyle:{fontSize:12}},title:[{text:"Evolution du parc",left:"50%",textAlign:"center",textStyle:{fontSize:12}}],dataset:[{dimensions:["off_group","qty"]}],grid:[{top:25,bottom:35,right:10,left:5,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[],graphic:[{type:"group",top:5,right:"40",onclick:function(e){"m"==$$("parc:vue1:off:trend")._filter_level&&($$("parc:vue1:off:trend").config.options.graphic[0].children[0].style.fill="#DADEE0",$$("parc:vue1:off:trend").config.options.graphic[1].children[0].style.fill="#fff",$$("parc:vue1:off:trend")._filter_level="a",$$("parc:vue1:off:trend").data.filter((function(e){return"dt_trend"!=e._type})))},children:[{type:"rect",z:100,left:"center",top:"middle",shape:{width:20,height:20},style:{fill:"#DADEE0",stroke:"#555",lineWidth:2,shadowBlur:8,shadowOffsetX:3,shadowOffsetY:3,shadowColor:"rgba(0,0,0,0.3)"}},{type:"text",z:100,left:"center",top:"middle",style:{fill:"#333",text:"Y",font:"12px Microsoft YaHei"}}]},{type:"group",top:5,right:"15",onclick:function(e){n.filterHandler({data:{month:$$("parc:vue1:off:trend")._current_month}})},children:[{type:"rect",z:100,left:"center",top:"middle",shape:{width:20,height:20},style:{fill:"#fff",stroke:"#555",lineWidth:2,shadowBlur:8,shadowOffsetX:3,shadowOffsetY:3,shadowColor:"rgba(0,0,0,0.3)"}},{type:"text",z:100,left:"center",top:"middle",style:{fill:"#333",text:"M",font:"12px Microsoft YaHei"}}]}]}}}))},c.init=function(e){$$("parc:vue1:off:trend").showProgress(),$$("parc:vue1:off:trend").disable(),$$("parc:vue1:off:trend")._filter_level="a",$$("parc:vue1:off:trend")._months=[],$$("parc:vue1:off:trend")._current_month=Object(u.a)().d1.substr(0,7),a.c.parc.push({cmp:"parc:vue1:off:trend",data:Object(o.b)("parc_off_trend").config.id}),Object(o.b)("parc_off_trend").waitData.then((function(e){$$("parc:vue1:off:trend")._isDataLoaded=1,$$("parc:vue1:off:trend").parse(Object(o.b)("parc_off_trend")),$$("parc:vue1:off:trend").enable(),$$("parc:vue1:off:trend").hideProgress()})),$$("parc:vue1:off:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("parc:vue1:off:trend")})),$$("parc:vue1:off:trend").data.attachEvent("onBeforeLoad",(function(){"parc"==$$("top:menu").getSelectedId()&&($$("parc:vue1:off:trend")._filter_level="a",$$("parc:vue1:off:trend")._months=[],$$("parc:vue1:off:trend")._current_month=Object(u.a)().d1.substr(0,7))}))},n.filterHandler=function(e){if($$("parc:vue1:off:trend").config.options.graphic[0].children[0].style.fill="#fff",$$("parc:vue1:off:trend").config.options.graphic[1].children[0].style.fill="#DADEE0",$$("parc:vue1:off:trend")._months||($$("parc:vue1:off:trend")._months=[]),$$("parc:vue1:off:trend")._months.some((function(t){return t==e.data.month})))$$("parc:vue1:off:trend")._filter_level="m",$$("parc:vue1:off:trend")._current_month=e.data.month,$$("parc:vue1:off:trend").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||"op_split"==t._type)}));else{var t=Object(o.a)("operator","vue2",e.data.month+"-01");$$("parc:vue1:off:trend").showProgress(),$$("parc:vue1:off:trend").disable(),t.then((function(r){$$("parc:vue1:off:trend")._months.push(e.data.month),$$("parc:vue1:off:trend")._filter_level="m",$$("parc:vue1:off:trend").parse(t).then((function(){$$("parc:vue1:off:trend").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||"op_split"==t._type)}))})),$$("parc:vue1:off:trend")._current_month=e.data.month,$$("parc:vue1:off:trend").enable(),$$("parc:vue1:off:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(123),o=r(125);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){var e=[];return e.push({$subview:a.default}),e.push({$subview:o.default}),{type:"space",margin:5,css:"app-right-panel",padding:4,rows:e}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=r(126),o=r(127),i=r(0),u=r(3);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){var e=[];return e.push({$subview:a.default}),e.push({$subview:o.default}),{type:"space",margin:5,css:"app-right-panel",padding:4,rows:e}},s.init=function(e){var t=this;Object(i.i)("revenue",Object(i.e)()),u.b.dashboards.revenue=t,webix.event(window,"resize",(function(){if("revenue"==$$("top:menu").getSelectedId()){if(Object(i.f)("revenue")!=Object(i.e)()&&(Object(i.i)("revenue",Object(i.e)()),null!=u.b.dashboards.revenue._container&&u.b.dashboards.revenue.refresh()),"mobile_rotated"==Object(i.e)())return void $$("rev:stats").hide();$$("rev:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("rev:stats").define("gridColumns",t._colCount),$$("rev:stats").adjust()}}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"echarts-grid-dataset",id:"rev:vue1:type:net",animation:!0,beforedisplay:function(e,t){0!=e.length&&(t.series[0].data=e)},options:{tooltip:{formatter:function(e){return e.marker+e.name+" : "+Object(i.b)(e.value)},position:function(e,t,r,n,a){var o={top:e[1]+10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},title:[{text:a.d.revenue.by_type_by_produit?a.d.revenue.by_type_by_produit:"",top:5,left:"50%",textAlign:"center",textStyle:{fontSize:12}}],label:{position:"insideTopLeft",formatter:function(e){return e.name+" : "+Object(i.h)(e.value)}},series:[{name:"Revenu",type:"treemap",leafDepth:1,levels:[{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]},{colorMappingBy:"index",color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"]}]}]}}},u.init=function(e){e._eType="treemap",e._expDataId=Object(o.b)("rev_type_net_exp").config.id,e.showProgress(),e.disable(),a.c.revenue.push({cmp:"rev:vue1:type:net",data:Object(o.b)("rev_type_net").config.id}),a.c.revenue.push({cmp:"rev:vue1:type:net:exp",data:Object(o.b)("rev_type_net_exp").config.id}),Object(o.b)("rev_type_net").waitData.then((function(t){e._isDataLoaded=1,e.parse(Object(o.b)("rev_type_net")),e.enable(),e.hideProgress()})),e.data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:type:net")}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=r(24),o=r(25),i=r(8);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"carousel",id:"rev_line",css:"webix_dark",cols:[{type:"clean",rows:[new a.default(this.app,"","FAI"),new i.default(this.app,"","revByLine_FAI",2),new o.default(this.app,"","FAI")]},{type:"clean",rows:[new a.default(this.app,"","GROS"),new i.default(this.app,"","revByLine_GROS",2),new o.default(this.app,"","GROS")]}]}},u.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=r(33),o=r(26),i=r(34),u=r(8);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"carousel",id:"rev_type",css:"webix_dark",cols:[{type:"clean",rows:[new a.default(this.app,"","fai"),new u.default(this.app,"","revParType_fai",2),new o.default(this.app,"","fai"),new i.default(this.app,"","fai")]},{type:"clean",rows:[new a.default(this.app,"","gros"),new u.default(this.app,"","revParType_gros",2),new o.default(this.app,"","gros"),new i.default(this.app,"","gros")]}]}},s.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0),u=r(4);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){return{view:"echarts-grid-dataset",id:"rev:vue1:trend:pay",animation:!0,charts_event:{click:[{seriesId:"rev:pay_trend",seriesType:"bar"},function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=this;this.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),this._clicked&&(t=!0,r._clicked=!1,clearTimeout(this.executeDoubleClick))}if(t)if($("button.ui.button.revPay_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:trend:pay")._months||($$("rev:vue1:trend:pay")._months=[]),$$("rev:vue1:trend:pay")._months.some((function(t){return t==e.data.month})))$$("rev:vue1:trend:pay")._filter_level="m",$$("rev:vue1:trend:pay")._current_month=e.data.month,$$("rev:vue1:trend:pay").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||"rev_split"==t._type)}));else{var n=Object(o.a)("pay","dt_trend",e.data.month+"-01");$$("rev:vue1:trend:pay").showProgress(),$$("rev:vue1:trend:pay").disable(),n.then((function(t){$$("rev:vue1:trend:pay")._months.push(e.data.month),$$("rev:vue1:trend:pay")._filter_level="m",$$("rev:vue1:trend:pay").parse(n).then((function(){$$("rev:vue1:trend:pay").data.filter((function(t){return"month_trend"!=t._type&&(t.period==e.data.month||"rev_split"==t._type)}))})),$$("rev:vue1:trend:pay")._current_month=e.data.month,$$("rev:vue1:trend:pay").enable(),$$("rev:vue1:trend:pay").hideProgress()}))}else this._clicked=!0}]},options:{tooltip:{trigger:"axis",show:!0,z:2,axisPointer:{show:!0},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o},formatter:function(e){var t=e[0].name+"<br/>",r=e[0].dimensionNames[1];return t+=e[0].marker+Object(i.b)(e[0].data[r])}},title:{text:"Paiements",right:"15%",top:5,textAlign:"center",textStyle:{fontSize:12}},grid:[{left:5,top:10,bottom:3,containLabel:!0}],dataset:[{dimensions:["month","revenue"]},{dimensions:["upd_dt","revenue"]}],xAxis:[{type:"category",splitLine:{show:!1},axisPointer:{show:!0},axisTick:{show:!0,alignWithLabel:!0}}],yAxis:[{type:"value",splitNumber:4,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[{type:"line",gridIndex:1,encode:{x:"month",y:"revenue"},seriesLayoutBy:"row",datasetIndex:0,_type:"month_trend",_dim:"key",id:"rev:pay_trend",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"orange"},{offset:1,color:"white"}],global:!1}},smooth:!0,lineStyle:{color:"orange",width:2.5},itemStyle:{color:"orange"},z:3,barMaxWidth:40,barMinHeight:10},{type:"line",gridIndex:1,encode:{x:"upd_dt",y:"revenue"},_type:"dt_trend",datasetIndex:1}]}}},s.init=function(e){$$("rev:vue1:trend:pay").showProgress(),$$("rev:vue1:trend:pay").disable(),a.c.revenue.push({cmp:"rev:vue1:trend:pay",data:Object(o.b)("pay_trend").config.id}),$$("rev:vue1:trend:pay")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend:pay")._months=[],$$("rev:vue1:trend:pay")._filter_level="a",Object(o.b)("pay_trend").waitData.then((function(e){$$("rev:vue1:trend:pay")._isDataLoaded=1,$$("rev:vue1:trend:pay").parse(Object(o.b)("pay_trend")),$$("rev:vue1:trend:pay").enable(),$$("rev:vue1:trend:pay").hideProgress()})),$$("rev:vue1:trend:pay").data.attachEvent("onBeforeLoad",(function(){"revenue"==$$("top:menu").getSelectedId()&&($$("rev:vue1:trend:pay")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend:pay")._months=[],$$("rev:vue1:trend:pay")._filter_level="a")})),$$("rev:vue1:trend:pay").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:trend:pay")}))},s.ready=function(e){$$("revPay").attachEvent("onAfterRender",(function(){$("button.ui.button.revPay_"+periodSplit[1]).on("click",(function(){if("a"==$$("rev:vue1:trend:pay")._filter_level)if($$("rev:vue1:trend:pay")._filter_level="m",$$("rev:vue1:trend:pay")._months.some((function(e){return e==$$("rev:vue1:trend:pay")._current_month})))$$("rev:vue1:trend:pay").data.filter((function(e){return"month_trend"!=e._type&&(e.period==$$("rev:vue1:trend:pay")._current_month||"rev_split"==e._type)}));else{var e=Object(o.a)("pay","d_trend",$$("rev:vue1:trend:pay")._current_month+"-01");$$("rev:vue1:trend:pay").showProgress(),$$("rev:vue1:trend:pay").disable(),e.then((function(t){$$("rev:vue1:trend:pay")._months.push($$("rev:vue1:trend:pay")._current_month),$$("rev:vue1:trend:pay").parse(e).then((function(){$$("rev:vue1:trend:pay").data.filter((function(e){return"month_trend"!=e._type&&(e.period==$$("rev:vue1:trend:pay")._current_month||"rev_split"==e._type)}))})),$$("rev:vue1:trend:pay")._current_month=$$("rev:vue1:trend:pay")._current_month,$$("rev:vue1:trend:pay").enable(),$$("rev:vue1:trend:pay").hideProgress()}))}})),$("button.ui.button.revPay_"+periodSplit[0]).on("click",(function(){$$("rev:vue1:trend:pay")&&"m"==$$("rev:vue1:trend:pay")._filter_level&&($$("rev:vue1:trend:pay")._filter_level="a",$$("rev:vue1:trend:pay").data.filter((function(e){return"dt_trend"!=e._type})))}))}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=r(0),o=r(128),i=r(133);var u=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){return{view:"tabview",id:"rev:tab",animate:!1,cells:[{id:"tab:fai",header:Object(a.g)("rev_fai"),body:o.default},{id:"tab:gros",header:Object(a.g)("rev_gros"),body:i.default}]}},u.init=function(){},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(27),r(1)),o=r(7),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"rev:vue1:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[],d=e.map((function(e){return e.rev_type})).filter((function(e,t,r){return r.indexOf(e)==t}));0!=e.length&&(a.off("click"),d.forEach((function(r){e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","revenue"],source:e.filter((function(e){return e.rev_type==r&&"month_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.revenue[r]},stack:"split",id:"rev_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,_isStack:!0,name:r,encode:{x:"month",y:"revenue"},gridIndex:1})),e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","revenue"],source:e.filter((function(e){return e.rev_type==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.revenue[r]},itemStyle:{color:t.revenue[r]},_isStack:!0,name:r,enable:{x:"upd_dt",y:"revenue"},datasetIndex:s.length,gridIndex:1})),e.some((function(e){return"slot_trend"==e._type}))&&(s.push({dimensions:["slot","revenue"],source:e.filter((function(e){return e.rev_type==r&&"slot_trend"==e._type})),isAdded:!0}),u.push({type:"bar",itemStyle:{color:t.revenue[r]},_isStack:!0,name:r,enable:{x:"slot",y:"revenue"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"rev_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.rechargeEC[r])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=c.length&&(r.color=[].concat(c)),0!=u.length&&(r.series=[].concat(u,r.series)),e.some((function(e){return"slot_trend"==e._type}))?r.legend.selectedMode="single":r.legend.selectedMode="multiple",e.some((function(e){return"dt_trend"==e._type}))&&a.on("click",{seriesType:"line"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeSDoubleClick=setTimeout((function(){r._sclicked=!1}),500),o._sclicked&&(t=!0,r._sclicked=!1,clearTimeout(o.executeSDoubleClick))}t?n.filterSlotHandler(e):o._sclicked=!0})))},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+r.revenue[o.seriesName]+" : "+Object(i.b)(o.value.revenue)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},dataset:[{dimensions:["rev_type","revenue"]}],grid:[{left:5,top:10,right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",splitNumber:3,axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),$$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend")._months=[],$$("rev:vue1:trend")._days=[],$$("rev:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.revenue.push({cmp:"rev:vue1:trend",data:Object(o.b)("revType_trend").config.id}),Object(o.b)("revType_trend").waitData.then((function(e){$$("rev:vue1:trend")._isDataLoaded=1,$$("rev:vue1:trend").parse(Object(o.b)("revType_trend")),$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()})),$$("rev:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:trend")})),$$("rev:vue1:trend").data.attachEvent("onBeforeLoad",(function(){$$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend")._months=[],$$("rev:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend")._current_upd_dt=Object(u.a)().d1})),$("button.ui.button.revByType_"+periodSplit[1]).on("click",(function(){"m"!=$$("rev:vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("rev:vue1:trend")._current_month}})})),$("button.ui.button.revByType_"+periodSplit[2]).on("click",(function(){"s"!=$$("rev:vue1:trend")._filter_level&&n.filterSlotHandler({data:{upd_dt:$$("rev:vue1:trend")._current_upd_dt,seriesName:$$("rev:vue1:trend")._current_serie_selected}})})),$("button.ui.button.revByType_"+periodSplit[0]).on("click",(function(){"m"!=$$("rev:vue1:trend")._filter_level&&"s"!=$$("rev:vue1:trend")._filter_level||($$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend").data.filter((function(e){return"month_trend"==e._type||"rev_split"==e._type})))}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.revByType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:trend")._months||($$("rev:vue1:trend")._months=[]),$$("rev:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("rev:vue1:trend")._filter_level="m",$$("rev:vue1:trend")._current_month=e.data.month,$$("rev:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}));else{var t=Object(o.a)("revenue","dt_trend",e.data.month+"-01");$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),t.then((function(r){$$("rev:vue1:trend")._months.push(e.data.month),$$("rev:vue1:trend")._filter_level="m",$$("rev:vue1:trend").parse(t).then((function(){$$("rev:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}))})),$$("rev:vue1:trend")._current_month=e.data.month,$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()}))}},n.filterSlotHandler=function(e){if(e.data)if($("button.ui.button.revByType_"+periodSplit[2]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:trend")._days||($$("rev:vue1:trend")._days=[]),$$("rev:vue1:trend")._days.some((function(t){return t==e.data.upd_dt})))$$("rev:vue1:trend")._filter_level="s",$$("rev:vue1:trend")._current_upd_dt=e.data.upd_dt,$$("rev:vue1:trend").config.options.legend.selected={},$$("rev:vue1:trend").config.options.legend.selected[e.seriesName]=!0,$$("rev:vue1:trend").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt||"rev_split"==t._type}));else{var t=Object(o.a)("revenue","slot_trend",e.data.upd_dt,"vue3");$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),t.then((function(r){$$("rev:vue1:trend")._days.push(e.data.upd_dt),$$("rev:vue1:trend")._filter_level="s",$$("rev:vue1:trend").config.options.legend.selected={},$$("rev:vue1:trend").config.options.legend.selected[e.seriesName]=!0,$$("rev:vue1:trend").parse(t).then((function(){$$("rev:vue1:trend").data.filter((function(t){return"slot_trend"==t._type&&t.period==e.data.upd_dt||"rev_split"==t._type}))})),$$("rev:vue1:trend")._current_upd_dt=e.data.upd_dt,$$("rev:vue1:trend")._current_serie_selected=e.seriesName,$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){return webix.promise.all([a.a,a.e]).then((function(e){var t=e[0],r=e[1];return{view:"echarts-grid-dataset",id:"rev:vue1:trend",animation:!0,beforedisplay:function(e,r,a){var o=this,u=[],s=[],c=[];if(0!=e.length){var d=e.map((function(e){return e.rev_type})).filter((function(e,t,r){return r.indexOf(e)==t})),l="month_trend"==e[0]._type?e.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):e.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));l.sort(),a.off("click"),d.forEach((function(r){var d;e.some((function(e){return"month_trend"==e._type}))&&(s.push({dimensions:["month","revenue"],source:e.filter((function(e){return e.rev_type==r&&"month_trend"==e._type})),isAdded:!0}),u.push(((d={type:"bar",itemStyle:{color:t.revenue[r]},stack:"split",id:"rev_split_trend:"+r,datasetIndex:s.length,barMinHeight:10,_isStack:!0,name:r,encode:{x:"month",y:"revenue"},gridIndex:1}).barMinHeight=10,d.barMaxWidth=40,d)));e.some((function(e){return"dt_trend"==e._type}))&&(s.push({dimensions:["upd_dt","revenue"],source:e.filter((function(e){return e.rev_type==r&&"dt_trend"==e._type})),isAdded:!0}),u.push({type:"line",smooth:!0,lineStyle:{color:t.revenue[r]},itemStyle:{color:t.revenue[r]},_isStack:!0,name:r,enable:{x:"upd_dt",y:"revenue"},datasetIndex:s.length,gridIndex:1})),a.on("click",{seriesId:"rev_split_trend:"+r,seriesType:"bar"},(function(e){var t="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!t){var r=o;o.executeDoubleClick=setTimeout((function(){r._clicked=!1}),500),o._clicked&&(t=!0,r._clicked=!1,clearTimeout(o.executeDoubleClick))}t?n.filterHandler(e):o._clicked=!0})),c.push(t.rechargeEC[r])})),r.series=r.series.filter((function(e){return void 0===e._isStack})),r.dataset=r.dataset.filter((function(e){return void 0===e.isAdded})),0!=s.length&&(r.dataset=[].concat(r.dataset,s)),0!=c.length&&(r.color=[].concat(c)),0!=u.length?r.series=[].concat(u,r.series):r.legend.selectedMode="multiple",r.xAxis[0].data=[].concat(l)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,n=e[0].name+"<br/>",a=s(e);!(t=a()).done;){var o=t.value;n+=o.marker+(r.revenue[o.seriesName]?r.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.revenue)+"<br/>"}return n},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return r.revenue[e]?r.revenue[e]:e}},title:[{text:"Evolution par type",textStyle:{fontSize:12},left:"50%",textAlign:"center"}],dataset:[{dimensions:["rev_type","revenue"]}],grid:[{left:5,top:"25",right:5,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),$$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend")._months=[],$$("rev:vue1:trend")._days=[],$$("rev:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend")._current_upd_dt=Object(u.a)().d1,a.c.revenue.push({cmp:"rev:vue1:trend",data:Object(o.b)("revType_trend").config.id}),Object(o.b)("revType_trend").waitData.then((function(e){$$("rev:vue1:trend")._isDataLoaded=1,$$("rev:vue1:trend").parse(Object(o.b)("revType_trend")),$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()})),$("button.ui.button.revParType_"+periodSplit[1]).on("click",(function(){"m"!=$$("rev:vue1:trend")._filter_level&&n.filterHandler({data:{month:$$("rev:vue1:trend")._current_month}})})),$("button.ui.button.revParType_"+periodSplit[0]).on("click",(function(){"m"==$$("rev:vue1:trend")._filter_level&&($$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend").data.filter((function(e){return"month_trend"==e._type})))})),$$("rev:vue1:trend").data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:trend")})),Object(o.b)("revType_trend").attachEvent("onBeforeLoad",(function(){"revenue"==$$("top:menu").getSelectedId()&&($$("rev:vue1:trend")._filter_level="a",$$("rev:vue1:trend")._months=[],$$("rev:vue1:trend")._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend")._current_upd_dt=Object(u.a)().d1)}))},n.filterHandler=function(e){if(e.data)if($("button.ui.button.revParType_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:trend")._months||($$("rev:vue1:trend")._months=[]),$$("rev:vue1:trend")._months.some((function(t){return t==e.data.month})))$$("rev:vue1:trend")._filter_level="m",$$("rev:vue1:trend")._current_month=e.data.month,$$("rev:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}));else{var t=Object(o.a)("split_trend","dt_trend",e.data.month+"-01","vue0");$$("rev:vue1:trend").showProgress(),$$("rev:vue1:trend").disable(),t.then((function(r){$$("rev:vue1:trend")._months.push(e.data.month),$$("rev:vue1:trend")._filter_level="m",$$("rev:vue1:trend").parse(t).then((function(){$$("rev:vue1:trend").data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}))})),$$("rev:vue1:trend")._current_month=e.data.month,$$("rev:vue1:trend").enable(),$$("rev:vue1:trend").hideProgress()}))}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return d}));var n=r(2),a=(r(10),r(1)),o=r(7),i=r(0),u=r(4);function s(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._type=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var c=n.prototype;return c.config=function(){var e=this._type;return webix.promise.all([a.a,a.e]).then((function(t){var r=t[0],a=t[1];return{view:"echarts-grid-dataset",id:"rev:vue1:trend:"+e,animation:!0,beforedisplay:function(t,a,o){var u=this,s=[],c=[],d=[];if(0!=t.length){var l=t.map((function(e){return e.rev_type})).filter((function(e,t,r){return r.indexOf(e)==t})),p="month_trend"==t[0]._type?t.map((function(e){return e.month})).filter((function(e,t,r){return r.indexOf(e)==t})):t.map((function(e){return e.upd_dt})).filter((function(e,t,r){return r.indexOf(e)==t}));p.sort();var f=[];"month_trend"==t[0]._type&&(t.sort((function(e,t){return t.month<e.month?1:-1})),f=t.map((function(e){return e.month})).filter((function(e){return void 0!==e}))),"dt_trend"==t[0]._type&&(t.sort((function(e,t){return t.upd_dt<e.upd_dt?1:-1})),f=t.map((function(e){return e.upd_dt})).filter((function(e){return void 0!==e}))),"slot_trend"==t[0]._type&&(t.sort((function(e,t){return t.slot<e.slot?1:-1})),f=t.map((function(e){return e.slot})).filter((function(e){return void 0!==e}))),f=f.filter((function(e,t,r){return r.indexOf(e)==t})),o.off("click"),l.forEach((function(a){var l;t.some((function(e){return"month_trend"==e._type}))&&(c.push({dimensions:["month","revenue"],source:t.filter((function(e){return e.rev_type==a&&"month_trend"==e._type})),isAdded:!0}),s.push(((l={type:"bar",itemStyle:{color:r.revenue[a]},stack:"split",id:e+"_rev_split_trend:"+a,datasetIndex:c.length,barMinHeight:10,_isStack:!0,name:a,encode:{x:"month",y:"revenue"},gridIndex:1}).barMinHeight=10,l.barMaxWidth=40,l)));t.some((function(e){return"dt_trend"==e._type}))&&(c.push({dimensions:["upd_dt","revenue"],source:t.filter((function(e){return e.rev_type==a&&"dt_trend"==e._type})),isAdded:!0}),s.push({type:"line",smooth:!0,lineStyle:{color:r.revenue[a]},itemStyle:{color:r.revenue[a]},_isStack:!0,name:a,enable:{x:"upd_dt",y:"revenue"},datasetIndex:c.length,gridIndex:1})),o.on("click",{seriesId:e+"_rev_split_trend:"+a,seriesType:"bar"},(function(t){var r="mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)();if(!r){var a=u;u.executeDoubleClick=setTimeout((function(){a._clicked=!1}),500),u._clicked&&(r=!0,a._clicked=!1,clearTimeout(u.executeDoubleClick))}r?n.filterHandler(t,e):u._clicked=!0})),d.push(r.rechargeEC[a])})),a.series=a.series.filter((function(e){return void 0===e._isStack})),a.dataset=a.dataset.filter((function(e){return void 0===e.isAdded})),0!=f.length&&(a.xAxis[0].data=f),0!=c.length&&(a.dataset=[].concat(a.dataset,c)),0!=d.length&&(a.color=[].concat(d)),0!=s.length?a.series=[].concat(s,a.series):a.legend.selectedMode="multiple",a.xAxis[0].data=[].concat(p)}},options:{tooltip:{trigger:"axis",show:!0,z:2,formatter:function(e){for(var t,r=e[0].name+"<br/>",n=s(e);!(t=n()).done;){var o=t.value;r+=o.marker+(a.revenue[o.seriesName]?a.revenue[o.seriesName]:o.seriesName)+" : "+Object(i.b)(o.value.revenue)+"<br/>"}return r},backgroundColor:"rgba(245, 245, 245, 0.8)",borderWidth:1,borderColor:"#ccc",padding:10,textStyle:{color:"#000"},position:function(e,t,r,n,a){var o={top:10};return o[["left","right"][+(e[0]<a.viewSize[0]/2)]]=30,o}},legend:{show:!0,itemGap:20,bottom:5,type:"scroll",textStyle:{fontSize:10},formatter:function(e){return a.revenue[e]?a.revenue[e]:e}},title:[{text:"Evolution par type",textStyle:{fontSize:12},left:"50%",textAlign:"center"}],dataset:[{dimensions:["rev_type","revenue"]}],grid:[{left:5,top:"25",right:10,bottom:35,containLabel:!0}],xAxis:[{axisLabel:{show:!0},axisTick:{show:!0},type:"category"}],yAxis:[{type:"value",axisLabel:{formatter:function(e,t){return Object(i.h)(e)}},splitLine:{show:!0}}],series:[]}}}))},c.init=function(e){var t=this._type;$$("rev:vue1:trend:"+t).showProgress(),$$("rev:vue1:trend:"+t).disable(),$$("rev:vue1:trend:"+t)._filter_level="a",$$("rev:vue1:trend:"+t)._months=[],$$("rev:vue1:trend:"+t)._days=[],$$("rev:vue1:trend:"+t)._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend:"+t)._current_upd_dt=Object(u.a)().d1,a.c.revenue.push({cmp:"rev:vue1:trend:"+t,data:Object(o.b)("revType_trend_"+t).config.id}),Object(o.b)("revType_trend_"+t).waitData.then((function(e){$$("rev:vue1:trend:"+t)._isDataLoaded=1,$$("rev:vue1:trend:"+t).parse(Object(o.b)("revType_trend_"+t)),$$("rev:vue1:trend:"+t).enable(),$$("rev:vue1:trend:"+t).hideProgress()})),$("button.ui.button.revParType_"+t+"_"+periodSplit[1]).on("click",(function(){"m"!=$$("rev:vue1:trend:"+t)._filter_level&&n.filterHandler({data:{month:$$("rev:vue1:trend:"+t)._current_month}},t)})),$("button.ui.button.revParType_"+t+"_"+periodSplit[0]).on("click",(function(){"m"==$$("rev:vue1:trend:"+t)._filter_level&&($$("rev:vue1:trend:"+t)._filter_level="a",$$("rev:vue1:trend:"+t).data.filter((function(e){return"month_trend"==e._type})))})),$$("rev:vue1:trend:"+t).data.attachEvent("onStoreLoad",(function(){Object(i.j)("rev:vue1:trend:"+t)})),Object(o.b)("revType_trend_"+t).attachEvent("onBeforeLoad",(function(){"revenue"==$$("top:menu").getSelectedId()&&($$("rev:vue1:trend:"+t)._filter_level="a",$$("rev:vue1:trend:"+t)._months=[],$$("rev:vue1:trend:"+t)._current_month=Object(u.a)().d1.substr(0,7),$$("rev:vue1:trend:"+t)._current_upd_dt=Object(u.a)().d1)}))},n.filterHandler=function(e,t){if(e.data){var r="fai"==t?"vue1":"vue2";if($("button.ui.button.revParType_"+t+"_"+periodSplit[1]).addClass("active").siblings().removeClass("active"),$$("rev:vue1:trend:"+t)._months||($$("rev:vue1:trend:"+t)._months=[]),$$("rev:vue1:trend:"+t)._months.some((function(t){return t==e.data.month})))$$("rev:vue1:trend:"+t)._filter_level="m",$$("rev:vue1:trend:"+t)._current_month=e.data.month,$$("rev:vue1:trend:"+t).data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}));else{var n=Object(o.a)("split_trend","dt_trend",e.data.month+"-01",r);$$("rev:vue1:trend:"+t).showProgress(),$$("rev:vue1:trend:"+t).disable(),n.then((function(r){$$("rev:vue1:trend:"+t)._months.push(e.data.month),$$("rev:vue1:trend:"+t)._filter_level="m",$$("rev:vue1:trend:"+t).parse(n).then((function(){$$("rev:vue1:trend:"+t).data.filter((function(t){return"month_trend"!=t._type&&t.period==e.data.month||"rev_split"==t._type}))})),$$("rev:vue1:trend:"+t)._current_month=e.data.month,$$("rev:vue1:trend:"+t).enable(),$$("rev:vue1:trend:"+t).hideProgress()}))}}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i}));var n=r(2),a=r(134),o=r(135);var i=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){var e=[];return e.push({$subview:a.default}),e.push({$subview:o.default}),{type:"space",margin:5,css:"app-right-panel",padding:4,rows:e}},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return u}));var n=r(2),a=(r(20),r(21),r(15)),o=r(4),i=r(1);var u=function(e){var t,r;function n(t,r,n){var a;return(a=e.call(this,t,r)||this)._kpi=n,a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=n.prototype;return u.config=function(){var e=this._kpi;return{view:"mobile"==Object(o.b)()||"mobile_rotated"==Object(o.b)()?"mob-stats-card":"stats-card",id:"sl:stat:"+e,_type:e,content:{header:i.i["sl_"+e].label,meta:i.i["sl_"+e].desc,shortheader:i.i["sl_"+e].shortlab?i.i["sl_"+e].shortlab:i.i["sl_"+e].label.substr(0,4),seuil:i.i["sl_"+e].wseuil?i.i["sl_"+e].wseuil:150,shortdesc:i.i["sl_"+e].shortdesc?i.i["sl_"+e].shortdesc:i.i["sl_"+e].desc,wdseuil:i.i["sl_"+e].wdseuil?i.i["sl_"+e].wdseuil:150,moblab:i.i["sl_"+e].moblab?i.i["sl_"+e].moblab:i.i["sl_"+e].label.substr(0,2)}}},u.init=function(e){var t=this._kpi;$$("sl:stat:"+t).showProgress(),$$("sl:stat:"+t).disable(),i.c.sales.push({cmp:"sl:stat:"+t,data:Object(a.b)("sales_stats").config.id}),Object(a.b)("sales_stats").waitData.then((function(e){$$("sl:stat:"+t).parse(Object(a.b)("sales_stats")),$$("sl:stat:"+t).enable(),$$("sl:stat:"+t).hideProgress()})),$$("sl:stat:"+t).data.attachEvent("onStoreLoad",(function(){Object(o.h)("sl:stat:"+t)}))},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n}));var n=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){return{type:"clean",rows:[{type:"header",template:"Settings"},{template:"Place app's seetings here"}]}},n}(r(2).b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return n}));var n=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.config=function(){return{rows:[{type:"header",template:"Dashboard"},{template:"Place main app's stats here",borderless:!0}]}},n}(r(2).b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return p}));var n=r(2),a=r(1),o=r(97),i=r(95),u=r(96),s=r(94),c=r(3),d=r(4),l=r(54);var p=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var p=n.prototype;return p.config=function(){return Object(c.a)(),a.k.waitData.then((function(){return{rows:["mobile"==Object(d.b)()||"mobile_rotated"==Object(d.b)()?u.default:i.default,{cols:[{$subview:o.default},{type:"space",margin:5,css:"app-right-panel",padding:4,rows:[{$subview:!0}]}]},{template:"<p class='title'></b></p>",height:20,css:"footer"}]}}))},p.init=function(e){Object(l.b)(this.app),c.b.app=this.app,Object(d.f)(),webix.protoUI({name:"c-dashboard",isDragNode:function(e){return-1!=(e.className||"").toString().indexOf("webix_header")?e:!(!e.parentNode||e==this.$view)&&this.isDragNode(e.parentNode)},$dragCreate:function(e,t){return!!this.isDragNode(t.target)&&webix.ui.dashboard.prototype.$dragCreate.apply(this,arguments)}},webix.ui.dashboard),webix.protoUI({name:"m-dashboard",isDragNode:function(e){return-1!=(e.className||"").toString().indexOf("webix_header")?e:!(!e.parentNode||e==this.$view)&&this.isDragNode(e.parentNode)},$dragCreate:function(e,t){return!1}},webix.ui.dashboard),this._jetFiltMenu=this.ui(s.default),a.k.waitData.then((function(){var e=a.k.getItem(a.k.getFirstId());"mobile"!=Object(d.b)()&&"mobile_rotated"!=Object(d.b)()&&($$("dashtitle").define("label","<span style='color:#fff;'"+("mobile"==Object(d.b)()?"font-size:10px":"")+" >"+("mobile"==Object(d.b)()?"":e.dashTitle)+"</span>"),$$("dashtitle").refresh()),Object(d.e)()})),c.b.mobileMenuhide=null!=webix.storage.session.get("mobileMenuhide")&&webix.storage.session.get("mobileMenuhide"),webix.event(window,"resize",(function(){Object(d.b)()!=webix.storage.session.get("screenType")&&Object(d.f)()})),webix.DataStore.prototype.sorting.as.abs_sort=function(e,t){return Math.abs(e)>Math.abs(t)?1:-1},webix.Touch.limit(!0)},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return s}));var n=r(2),a=r(47),o=r(143),i=r(0),u=r(3);var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var s=n.prototype;return s.config=function(){var e=[];this._colCount=4,this._maxColCount=4;var t={view:"mobile"!=Object(i.e)()&&"mobile_rotated"!=Object(i.e)()?"c-dashboard":"m-dashboard",id:"traff:stats",gridColumns:this._colCount,gridRows:1,maxHeight:100,responsive:"hide",cells:[{view:"panel",x:0,y:0,dx:1,dy:1,body:new a.default(this.app,"","voice")},{view:"panel",x:1,y:0,dx:1,dy:1,body:new a.default(this.app,"","sms")},{view:"panel",x:2,y:0,dx:1,dy:1,body:new a.default(this.app,"","data")},{view:"panel",x:3,y:0,dx:1,dy:1,body:new a.default(this.app,"","rpyg")}]};return e.push(t),e.push({$subview:o.default}),console.log(t),{type:"space",margin:5,css:"app-right-panel",padding:4,rows:e}},s.init=function(e){var t=this;Object(i.i)("traffic",Object(i.e)()),u.b.dashboards.traffic=t,webix.event(window,"resize",(function(){if("traffic"==$$("top:menu").getSelectedId()){if(Object(i.f)("traffic")!=Object(i.e)()&&(Object(i.i)("traffic",Object(i.e)()),null!=u.b.dashboards.traffic._container&&u.b.dashboards.traffic.refresh()),"mobile_rotated"==Object(i.e)())return void $$("traff:stats").hide();$$("traff:stats").show();var e=window.screen.width;if(e/t._colCount>160){if(!(t._colCount<t._maxColCount))return;if(t._colCount=t._colCount+1,e/t._colCount<160)return}else for(;e/t._colCount<160;)t._colCount=t._colCount-1;$$("traff:stats").define("gridColumns",t._colCount),$$("traff:stats").adjust()}}))},s.ready=function(e){var t=this;if("mobile_rotated"!=Object(i.e)()){$$("traff:stats").show();for(var r=window.screen.width;r/t._colCount<160;)t._colCount=t._colCount-1;r/t._colCount>160&&(t._colCount<t._maxColCount&&(t._colCount=t._colCount+1),r/t._colCount<160&&(t._colCount=t._colCount-1)),$$("traff:stats").define("gridColumns",t._colCount),$$("traff:stats").adjust()}else $$("traff:stats").hide()},n}(n.b)},function(e,t){},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return o}));var n=r(2),a=new webix.DataCollection({data:[{id:1,title:"The Shawshank Redemption",year:1994,votes:678790,rating:9.2,rank:1},{id:2,title:"The Godfather",year:1972,votes:511495,rating:9.2,rank:2},{id:3,title:"The Godfather: Part II",year:1974,votes:319352,rating:9,rank:3},{id:4,title:"The Good, the Bad and the Ugly",year:1966,votes:213030,rating:8.9,rank:4},{id:5,title:"My Fair Lady",year:1964,votes:533848,rating:8.9,rank:5},{id:6,title:"12 Angry Men",year:1957,votes:164558,rating:8.9,rank:6}]});var o=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=n.prototype;return o.config=function(){return{view:"datatable",autoConfig:!0}},o.init=function(e){e.parse(a)},n}(n.b)},function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return i})),r.d(t,"App",(function(){return i}));r(185);var n=r(2),a=r(54);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var i=function(e){var t,r;function i(t){var r,i={id:"comm-dash",version:"1.0.0",debug:!1,start:"/top/"+(webix.storage.session.get("top.currentmenu")?webix.storage.session.get("top.currentmenu"):"home")};return(r=e.call(this,o({},i,t))||this).use(n.c.User,{model:a.a}),r}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(n.a)},function(e,t,r){},function(e,t,r){var n={"./bills":147,"./bills.js":147,"./bills/agentTab":52,"./bills/agentTab.js":52,"./bills/billByAgView":53,"./bills/billByAgView.js":53,"./bills/billByZone":51,"./bills/billByZone.js":51,"./bills/billSplitView":19,"./bills/billSplitView.js":19,"./bills/billsByBTByMkt":38,"./bills/billsByBTByMkt.js":38,"./bills/billsByOffTrend":36,"./bills/billsByOffTrend.js":36,"./bills/billsByOffer":37,"./bills/billsByOffer.js":37,"./bills/billsDetDash":90,"./bills/billsDetDash.js":90,"./bills/billsStats":35,"./bills/billsStats.js":35,"./bills/billsTab":88,"./bills/billsTab.js":88,"./bills/graphDash":89,"./bills/graphDash.js":89,"./bills/payByMeth":50,"./bills/payByMeth.js":50,"./bills/recouvrByOff":49,"./bills/recouvrByOff.js":49,"./bills/recouvrementView":48,"./bills/recouvrementView.js":48,"./bills/statsView":86,"./bills/statsView.js":86,"./data":183,"./data.js":183,"./general/echart_cmp_dataset":10,"./general/echart_cmp_dataset.js":10,"./general/filters/dateFilter":91,"./general/filters/dateFilter.js":91,"./general/filters/filterElement":92,"./general/filters/filterElement.js":92,"./general/filters/filterForm":93,"./general/filters/filterForm.js":93,"./general/filters/filterMenue":94,"./general/filters/filterMenue.js":94,"./general/filters/filtersicons":87,"./general/filters/filtersicons.js":87,"./general/headerToolBar":95,"./general/headerToolBar.js":95,"./general/loginBarElmt":43,"./general/loginBarElmt.js":43,"./general/mobileheadtoolbar":96,"./general/mobileheadtoolbar.js":96,"./general/sidemenu":97,"./general/sidemenu.js":97,"./home":148,"./home.js":148,"./home/ArpuTrendView":100,"./home/ArpuTrendView.js":100,"./home/bundleTrendView":149,"./home/bundleTrendView.js":149,"./home/dmdByTypeTrend":101,"./home/dmdByTypeTrend.js":101,"./home/graphDash":102,"./home/graphDash.js":102,"./home/graphHeaders":5,"./home/graphHeaders.js":5,"./home/mobstatsingle":21,"./home/mobstatsingle.js":21,"./home/parcByTypeTrend":103,"./home/parcByTypeTrend.js":103,"./home/payByTypeTrend":105,"./home/payByTypeTrend.js":105,"./home/revenueByTypeTrend":104,"./home/revenueByTypeTrend.js":104,"./home/statsView":107,"./home/statsView.js":107,"./home/statsingle":20,"./home/statsingle.js":20,"./home/topupTrendView":150,"./home/topupTrendView.js":150,"./home/trafficByTypeTrend":106,"./home/trafficByTypeTrend.js":106,"./home/vignetteView":40,"./home/vignetteView.js":40,"./login":151,"./login.js":151,"./monitor":152,"./monitor.js":152,"./monitor/monDash":109,"./monitor/monDash.js":109,"./monitor/monLine":84,"./monitor/monLine.js":84,"./monitor/monStat":30,"./monitor/monStat.js":30,"./monitor/monTab":110,"./monitor/monTab.js":110,"./monitor/statsView":108,"./monitor/statsView.js":108,"./newHome/ArpuTrendView":60,"./newHome/ArpuTrendView.js":60,"./newHome/echart_cmp":153,"./newHome/echart_cmp.js":153,"./newHome/echart_cmp_dataset":27,"./newHome/echart_cmp_dataset.js":27,"./newHome/graphDash":98,"./newHome/graphDash.js":98,"./newHome/graphHeaders":154,"./newHome/graphHeaders.js":154,"./newHome/mobstatsingle":155,"./newHome/mobstatsingle.js":155,"./newHome/parcByProd":55,"./newHome/parcByProd.js":55,"./newHome/parcOPView":156,"./newHome/parcOPView.js":156,"./newHome/parcTrendView":56,"./newHome/parcTrendView.js":56,"./newHome/payByTypeTrend":57,"./newHome/payByTypeTrend.js":57,"./newHome/revenueByTypeTrend_new":58,"./newHome/revenueByTypeTrend_new.js":58,"./newHome/statHeader":157,"./newHome/statHeader.js":157,"./newHome/statsView":99,"./newHome/statsView.js":99,"./newHome/statsingle":158,"./newHome/statsingle.js":158,"./newHome/topupTrendView":59,"./newHome/topupTrendView.js":59,"./newHome/trafficByTypeTrend":61,"./newHome/trafficByTypeTrend.js":61,"./newHome/vignetteView":39,"./newHome/vignetteView.js":39,"./oldhome":159,"./oldhome.js":159,"./others/mapChart_World":146,"./others/mapChart_World.js":146,"./others/periodSelector":8,"./others/periodSelector.js":8,"./others/smui_cmp":145,"./others/smui_cmp.js":145,"./otop":160,"./otop.js":160,"./parc":161,"./parc.js":161,"./parc/CaroussParcType":162,"./parc/CaroussParcType.js":162,"./parc/caroussParcView":163,"./parc/caroussParcView.js":163,"./parc/graphDash":111,"./parc/graphDash.js":111,"./parc/netAddView":63,"./parc/netAddView.js":63,"./parc/parcBTMkt":117,"./parc/parcBTMkt.js":117,"./parc/parcBTView":113,"./parc/parcBTView.js":113,"./parc/parcByBillByMark":64,"./parc/parcByBillByMark.js":64,"./parc/parcByOfferView":114,"./parc/parcByOfferView.js":114,"./parc/parcByProdView":62,"./parc/parcByProdView.js":62,"./parc/parcByStatusNet":65,"./parc/parcByStatusNet.js":65,"./parc/parcByType":22,"./parc/parcByType.js":22,"./parc/parcByZone":118,"./parc/parcByZone.js":118,"./parc/parcFAIDash":119,"./parc/parcFAIDash.js":119,"./parc/parcGROSDash":122,"./parc/parcGROSDash.js":122,"./parc/parcGrosOffView":116,"./parc/parcGrosOffView.js":116,"./parc/parcGrosView":115,"./parc/parcGrosView.js":115,"./parc/parcLGTrend":121,"./parc/parcLGTrend.js":121,"./parc/parcLGView":120,"./parc/parcLGView.js":120,"./parc/parcTab":164,"./parc/parcTab.js":164,"./parc/parcTypeTrend":165,"./parc/parcTypeTrend.js":165,"./parc/parcTypeTrend_new":23,"./parc/parcTypeTrend_new.js":23,"./parc/parcView":32,"./parc/parcView.js":32,"./parc/statsView":112,"./parc/statsView.js":112,"./parc/vignetteView":44,"./parc/vignetteView.js":44,"./recharge":166,"./recharge.js":166,"./recharge/recByChann":69,"./recharge/recByChann.js":69,"./recharge/recByProdByType":68,"./recharge/recByProdByType.js":68,"./recharge/recByTypeTrendView":67,"./recharge/recByTypeTrendView.js":67,"./recharge/recByTypeView":66,"./recharge/recByTypeView.js":66,"./recharge/recByValueView":70,"./recharge/recByValueView.js":70,"./recharge/recDashGraph":125,"./recharge/recDashGraph.js":125,"./recharge/rechargeMontantStat":124,"./recharge/rechargeMontantStat.js":124,"./recharge/rechargeTypeStat":46,"./recharge/rechargeTypeStat.js":46,"./recharge/statsView":123,"./recharge/statsView.js":123,"./revenue":167,"./revenue.js":167,"./revenue/RevTypeNet":168,"./revenue/RevTypeNet.js":168,"./revenue/carroussRevByLine":169,"./revenue/carroussRevByLine.js":169,"./revenue/carroussRevByType":170,"./revenue/carroussRevByType.js":170,"./revenue/graphDash":127,"./revenue/graphDash.js":127,"./revenue/paymentsTrend":171,"./revenue/paymentsTrend.js":171,"./revenue/revByClient":75,"./revenue/revByClient.js":75,"./revenue/revByOP":71,"./revenue/revByOP.js":71,"./revenue/revFAIDash":128,"./revenue/revFAIDash.js":128,"./revenue/revGROSDash":133,"./revenue/revGROSDash.js":133,"./revenue/revTab":172,"./revenue/revTab.js":172,"./revenue/revenueByBill":130,"./revenue/revenueByBill.js":130,"./revenue/revenueByGroupByOff":34,"./revenue/revenueByGroupByOff.js":34,"./revenue/revenueByLine":24,"./revenue/revenueByLine.js":24,"./revenue/revenueByLineTrend":25,"./revenue/revenueByLineTrend.js":25,"./revenue/revenueByTypeByProd":73,"./revenue/revenueByTypeByProd.js":73,"./revenue/revenueByTypeSplit":74,"./revenue/revenueByTypeSplit.js":74,"./revenue/revenueByTypeSplitNew":33,"./revenue/revenueByTypeSplitNew.js":33,"./revenue/revenueByTypeSplitTrend":173,"./revenue/revenueByTypeSplitTrend.js":173,"./revenue/revenueByTypeTrend":174,"./revenue/revenueByTypeTrend.js":174,"./revenue/revenueByTypeTrendNew":26,"./revenue/revenueByTypeTrendNew.back":175,"./revenue/revenueByTypeTrendNew.back.js":175,"./revenue/revenueByTypeTrendNew.js":26,"./revenue/revenueByZones":129,"./revenue/revenueByZones.js":129,"./revenue/revenueSaleSplit":132,"./revenue/revenueSaleSplit.js":132,"./revenue/revenueSalesTrend":131,"./revenue/revenueSalesTrend.js":131,"./revenue/statsView":126,"./revenue/statsView.js":126,"./revenue/traffByOP":72,"./revenue/traffByOP.js":72,"./revenue/vignetteView":41,"./revenue/vignetteView.js":41,"./sales":176,"./sales.js":176,"./sales/salesByCategory":140,"./sales/salesByCategory.js":140,"./sales/salesByPoPByUser":142,"./sales/salesByPoPByUser.js":142,"./sales/salesByPoPTrend":141,"./sales/salesByPoPTrend.js":141,"./sales/salesByTypeByProd":138,"./sales/salesByTypeByProd.js":138,"./sales/salesByTypeTrend":139,"./sales/salesByTypeTrend.js":139,"./sales/salesByUserTrend":136,"./sales/salesByUserTrend.js":136,"./sales/salesDash":135,"./sales/salesDash.js":135,"./sales/salesStats":42,"./sales/salesStats.js":42,"./sales/salesTotTrend":137,"./sales/salesTotTrend.js":137,"./sales/statsView":134,"./sales/statsView.js":134,"./salesStats":177,"./salesStats.js":177,"./settings":178,"./settings.js":178,"./start":179,"./start.js":179,"./top":180,"./top.js":180,"./traffic":181,"./traffic.js":181,"./traffic/DataTrafficDash":144,"./traffic/DataTrafficDash.js":144,"./traffic/TraffDataBySite":80,"./traffic/TraffDataBySite.js":80,"./traffic/TraffDataByType":81,"./traffic/TraffDataByType.js":81,"./traffic/TrafficByDest":77,"./traffic/TrafficByDest.js":77,"./traffic/TrafficByOP":78,"./traffic/TrafficByOP.js":78,"./traffic/TrafficByOffer":29,"./traffic/TrafficByOffer.js":29,"./traffic/TrafficByTypeTrend":28,"./traffic/TrafficByTypeTrend.js":28,"./traffic/TrafficDash":85,"./traffic/TrafficDash.js":85,"./traffic/TrafficIntGeo":76,"./traffic/TrafficIntGeo.js":76,"./traffic/TrafficIntSplit":79,"./traffic/TrafficIntSplit.js":79,"./traffic/TrafficTab":143,"./traffic/TrafficTab.js":143,"./traffic/parcData":82,"./traffic/parcData.js":82,"./traffic/trafficDataByType":83,"./traffic/trafficDataByType.js":83,"./traffic/vignetteView":47,"./traffic/vignetteView.js":47};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=186},function(e,t,r){var n={"./en":182,"./en.js":182};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=187}])}));